ACC.address={_autoload:["bindToChangeAddressButton","bindCreateUpdateAddressForm","bindSuggestedDeliveryAddresses","bindCountrySpecificAddressForms","showAddressFormButtonPanel","bindViewAddressBook","bindToColorboxClose","showRemoveAddressFromBookConfirmation","backToListAddresses"],spinner:$("<img src='"+ACC.config.commonResourcePath+"/images/spinner.gif' />"),addressID:"",handleChangeAddressButtonClick:function(){return ACC.address.addressID=$(this).data("address")?$(this).data("address"):"",$("#summaryDeliveryAddressFormContainer").show(),$("#summaryOverlayViewAddressBook").show(),$("#summaryDeliveryAddressBook").hide(),$.getJSON(getDeliveryAddressesUrl,ACC.address.handleAddressDataLoad),!1},handleAddressDataLoad:function(data){ACC.address.setupDeliveryAddressPopupForm(data),ACC.colorbox.open("",{inline:!0,href:"#summaryDeliveryAddressOverlay",overlayClose:!1,onOpen:function(){ACC.address.emptyAddressForm(),$(document).on("change","#saveAddress",function(){var saveAddressChecked=$(this).prop("checked");$("#defaultAddress").prop("disabled",!saveAddressChecked),saveAddressChecked||$("#defaultAddress").prop("checked",!1)})}})},setupDeliveryAddressPopupForm:function(data){$("#summaryDeliveryAddressBook").html($("#deliveryAddressesTemplate").tmpl({addresses:data})),$("#summaryDeliveryAddressBook button.use_address").click(ACC.address.handleSelectExistingAddressClick),$("#summaryDeliveryAddressBook button.edit").click(ACC.address.handleEditAddressClick),$("#summaryDeliveryAddressBook button.default").click(ACC.address.handleDefaultAddressClick)},emptyAddressForm:function(){var options={url:getDeliveryAddressFormUrl,data:{addressId:ACC.address.addressID,createUpdateStatus:""},type:"GET",dataType:"html",success:function(data){$("#summaryDeliveryAddressFormContainer").html(data),ACC.address.bindCreateUpdateAddressForm()}};$.ajax(options)},handleSelectExistingAddressClick:function(){var addressId=$(this).attr("data-address");return $.postJSON(setDeliveryAddressUrl,{addressId:addressId},ACC.address.handleSelectExitingAddressSuccess),!1},handleEditAddressClick:function(){$("#summaryDeliveryAddressFormContainer").show(),$("#summaryOverlayViewAddressBook").show(),$("#summaryDeliveryAddressBook").hide();var addressId=$(this).attr("data-address"),options={url:getDeliveryAddressFormUrl,data:{addressId:addressId,createUpdateStatus:""},target:"#summaryDeliveryAddressFormContainer",type:"GET",success:function(data){ACC.address.bindCreateUpdateAddressForm(),ACC.colorbox.resize()},error:function(xht,textStatus,ex){console.log("Failed to update cart. Error details ["+xht+", "+textStatus+", "+ex+"]")}};return $(this).ajaxSubmit(options),!1},handleDefaultAddressClick:function(){var addressId=$(this).attr("data-address"),options={url:setDefaultAddressUrl,data:{addressId:addressId},type:"GET",success:function(data){ACC.address.setupDeliveryAddressPopupForm(data)},error:function(xht,textStatus,ex){console.log("Failed to update address book. Error details ["+xht+", "+textStatus+", "+ex+"]")}};return $(this).ajaxSubmit(options),!1},handleSelectExitingAddressSuccess:function(data){null!=data?(ACC.refresh.refreshPage(data),ACC.colorbox.close()):console.log("Failed to set delivery address")},bindCreateUpdateAddressForm:function(){$(".create_update_address_form").each(function(){var options={type:"POST",beforeSubmit:function(){$("#checkout_delivery_address").block({message:ACC.address.spinner})},success:function(data){$("#summaryDeliveryAddressFormContainer").html(data);var status=$(".create_update_address_id").attr("status");null!=status&&"success"===status.toLowerCase()?(ACC.refresh.getCheckoutCartDataAndRefreshPage(),ACC.colorbox.close()):(ACC.address.bindCreateUpdateAddressForm(),ACC.colorbox.resize())},error:function(xht,textStatus,ex){console.log("Failed to update cart. Error details ["+xht+", "+textStatus+", "+ex+"]")},complete:function(){$("#checkout_delivery_address").unblock()}};$(this).ajaxForm(options)})},refreshDeliveryAddressSection:function(data){$(".summaryDeliveryAddress").replaceWith($("#deliveryAddressSummaryTemplate").tmpl(data))},bindSuggestedDeliveryAddresses:function(){var status=$(".add_edit_delivery_address_id").attr("status");null!=status&&"hasSuggestedAddresses"==status&&ACC.address.showSuggestedAddressesPopup()},showSuggestedAddressesPopup:function(){$(document).ready(function(){ACC.colorbox.open("Suggested Addresses",{href:"#popup_suggested_delivery_addresses",inline:!0,width:"525px",onComplete:function(){$(this).colorbox.resize()}})})},bindCountrySpecificAddressForms:function(){$(document).on("change","#countrySelector select",function(){var options={addressCode:"",countryIsoCode:$(this).val()};ACC.address.displayCountrySpecificAddressForm(options,ACC.address.showAddressFormButtonPanel)})},showAddressFormButtonPanel:function(){""!==$("#countrySelector :input").val()&&$("#addressform_button_panel").show()},bindToColorboxClose:function(){$(document).on("click",".closeColorBox",function(){ACC.colorbox.close()})},displayCountrySpecificAddressForm:function(options,callback){$.ajax({url:ACC.config.encodedContextPath+"/my-account/addressform",async:!0,data:options,dataType:"html",beforeSend:function(){$("#i18nAddressForm").html(ACC.address.spinner)}}).done(function(data){$("#i18nAddressForm").html($(data).html()),"function"==typeof callback&&callback.call()})},bindToChangeAddressButton:function(){$(document).on("click",".summaryDeliveryAddress .editButton",ACC.address.handleChangeAddressButtonClick)},bindViewAddressBook:function(){$(document).on("click",".js-address-book",function(e){e.preventDefault(),ACC.colorbox.open("Saved Addresses",{href:"#addressbook",inline:!0,width:"380px"})}),$(document).on("click","#summaryOverlayViewAddressBook",function(){$("#summaryDeliveryAddressFormContainer").hide(),$("#summaryOverlayViewAddressBook").hide(),$("#summaryDeliveryAddressBook").show(),ACC.colorbox.resize()})},showRemoveAddressFromBookConfirmation:function(){$(document).on("click",".removeAddressFromBookButton",function(){var addressId=$(this).data("addressId"),popupTitle=$(this).data("popupTitle");ACC.colorbox.open(popupTitle,{inline:!0,height:!1,href:"#popup_confirm_address_removal_"+addressId,onComplete:function(){$(this).colorbox.resize()}})})},backToListAddresses:function(){$(".addressBackBtn").on("click",function(){var sUrl=$(this).data("backToAddresses");window.location=sUrl})}},ACC.autocomplete={_autoload:["bindSearchAutocomplete","bindDisableSearch"],bindSearchAutocomplete:function(){$.widget("custom.yautocomplete",$.ui.autocomplete,{_create:function(){var option=this.element.data("options");this._setOptions({minLength:option.minCharactersBeforeRequest,displayProductImages:option.displayProductImages,delay:option.waitTimeBeforeRequest,autocompleteUrl:option.autocompleteUrl,source:this.source}),$.ui.autocomplete.prototype._create.call(this)},options:{cache:{},focus:function(){return!1},select:function(event,ui){ui.item.value=ACC.sanitizer.sanitize(ui.item.value),window.location.href=ui.item.url}},_renderItem:function(ul,item){if("autoSuggestion"==item.type){var renderHtml=$("<a>").attr("href",item.url).append($("<div>").addClass("name").text(item.value));return $("<li>").data("item.autocomplete",item).append(renderHtml).appendTo(ul)}if("productResult"==item.type){renderHtml=$("<a>").attr("href",item.url).append(item.image?$("<div>").addClass("thumb").append($("<img>").attr("src",item.image)):null).append($("<div>").addClass("name").html(ACC.sanitizer.sanitize(item.value))).append($("<div>").addClass("price").text(item.price));return $("<li>").data("item.autocomplete",item).append(renderHtml).appendTo(ul)}},source:function(request,response){var self=this,term=request.term.toLowerCase();if(term in self.options.cache)return response(self.options.cache[term]);$.getJSON(self.options.autocompleteUrl,{term:request.term},function(data){var autoSearchData=[];return null!=data.suggestions&&$.each(data.suggestions,function(i,obj){autoSearchData.push({value:obj.term,url:ACC.config.encodedContextPath+"/search?text="+encodeURIComponent(obj.term),type:"autoSuggestion"})}),null!=data.products&&$.each(data.products,function(i,obj){autoSearchData.push({value:ACC.sanitizer.sanitize(obj.name),code:obj.code,desc:ACC.sanitizer.sanitize(obj.description),manufacturer:ACC.sanitizer.sanitize(obj.manufacturer),url:ACC.config.encodedContextPath+obj.url,price:obj.price.formattedValue,type:"productResult",image:null!=obj.images&&self.options.displayProductImages?obj.images[0].url:null})}),self.options.cache[term]=autoSearchData,response(autoSearchData)})}}),$search=$(".js-site-search-input"),0<$search.length&&$search.yautocomplete()},bindDisableSearch:function(){$("#js-site-search-input").keyup(function(){$("#js-site-search-input").val($("#js-site-search-input").val().replace(/^\s+/gm,"")),$(".js_search_button").prop("disabled",""==this.value)})}},ACC.carousel={_autoload:[["bindCarousel",0<$(".js-owl-carousel").length],"bindJCarousel"],carouselConfig:{default:{navigation:!0,navigationText:["<span class='glyphicon glyphicon-chevron-left'></span>","<span class='glyphicon glyphicon-chevron-right'></span>"],pagination:!1,itemsCustom:[[0,1],[640,2],[1024,4],[1400,6]]},"rotating-image":{navigation:!1,pagination:!0,singleItem:!0},"lazy-reference":{navigation:!0,navigationText:["<span class='glyphicon glyphicon-chevron-left'></span>","<span class='glyphicon glyphicon-chevron-right'></span>"],pagination:!1,itemsDesktop:[5e3,7],itemsDesktopSmall:[1200,5],itemsTablet:[768,4],itemsMobile:[480,3],lazyLoad:!0}},bindCarousel:function(){$(".js-owl-carousel").each(function(){var $c=$(this);$.each(ACC.carousel.carouselConfig,function(key,config){$c.hasClass("js-owl-"+key)&&$(document).find(".js-owl-"+key).owlCarousel(config)})})},bindJCarousel:function(){$(".modal").colorbox({onComplete:function(){ACC.common.refreshScreenReaderBuffer()},onClosed:function(){ACC.common.refreshScreenReaderBuffer()}}),$(".svw").each(function(){$(this).waitForImages(function(){$(this).slideView({toolTip:!0,ttOpacity:.6,autoPlay:!0,autoPlayTime:8e3})})})}},ACC.cart={_autoload:["bindHelp","cartRestoration","bindCartPage","bindMultiDEntryRemoval","bindMultidCartProduct",["bindApplyVoucher",0!=$("#js-voucher-apply-btn").length],["bindToReleaseVoucher",0!=$("#js-applied-vouchers").length]],bindHelp:function(){$(document).on("click",".js-cart-help",function(e){e.preventDefault();var title=$(this).data("help");ACC.colorbox.open(ACC.common.encodeHtml(title),{html:$(".js-help-popup-content").text(),width:"300px"})})},cartRestoration:function(){$(".cartRestoration").click(function(){var sCartUrl=$(this).data("cartUrl");window.location=sCartUrl})},bindCartPage:function(){$(document).on("click",".js-show-editable-grid",function(event){ACC.cart.populateAndShowEditableGrid(this,event)})},bindMultiDEntryRemoval:function(){$(document).on("click",".js-submit-remove-product-multi-d",function(){var itemIndex=$(this).data("index"),$form=$(document).find("#updateCartForm"+itemIndex),initialCartQuantity=$form.find("input[name=initialQuantity]"),cartQuantity=$form.find("input[name=quantity]"),productCode=($form.find("input[name=entryNumber]").val(),$form.find("input[name=productCode]").val());cartQuantity.val(0),initialCartQuantity.val(0),ACC.track.trackRemoveFromCart(productCode,initialCartQuantity,cartQuantity.val());var method=$form.attr("method")?$form.attr("method").toUpperCase():"GET";$.ajax({url:$form.attr("action"),data:$form.serialize(),type:method,dataType:"text",success:function(data){location.reload()},error:function(){console.log("Failed to remove quantity. Error details ["+xht+", "+textStatus+", "+ex+"]")}})})},populateAndShowEditableGrid:function(element,event){var readOnly=$(element).data("readOnlyMultidGrid"),itemIndex=$(element).data("index");grid=$(document).find("#ajaxGrid"+itemIndex);var gridEntries=$(document).find("#grid"+itemIndex),arrSubEntries=gridEntries.data("sub-entries").split(","),firstVariantCode=arrSubEntries[0].split(":")[0];$(element).toggleClass("open");for(var targetUrl=gridEntries.data("target-url"),mapCodeQuantity=new Object,i=0;i<arrSubEntries.length;i++){var arrValue=arrSubEntries[i].split(":");mapCodeQuantity[arrValue[0]]=arrValue[1]}0<grid.children("#cartOrderGridForm").length?grid.slideToggle("slow"):$.ajax({url:targetUrl,data:{productCode:firstVariantCode,readOnly:readOnly},type:"GET",dataType:"html",success:function(data){grid.html(data),$("#ajaxGrid").removeAttr("id");for(var $gridContainer=grid.find(".product-grid-container"),numGrids=$gridContainer.length,i=0;i<numGrids;i++)ACC.cart.getProductQuantity($gridContainer.eq(i),mapCodeQuantity,i);grid.slideDown("slow"),ACC.cart.coreCartGridTableActions(element,mapCodeQuantity),ACC.productorderform.coreTableScrollActions(grid.children("#cartOrderGridForm"))},error:function(xht,textStatus,ex){console.log("Failed to get variant matrix. Error details ["+xht+", "+textStatus+", "+ex+"]")}})},coreCartGridTableActions:function(element,mapCodeQuantity){ACC.productorderform.bindUpdateFutureStockButton(".update_future_stock_button"),ACC.productorderform.bindVariantSelect($(".variant-select-btn"),"cartOrderGridForm");var itemIndex=$(element).data("index"),quantityBefore=0,grid=$(document).find("#ajaxGrid"+itemIndex+" .product-grid-container");grid.on("focusin",".sku-quantity",function(event){quantityBefore=jQuery.trim(this.value),$(this).parents("tr").next(".variant-summary").remove(),$(this).parents("table").data(ACC.productorderform.selectedVariantData)?ACC.productorderform.selectedVariants=$(this).parents("table").data(ACC.productorderform.selectedVariantData):ACC.productorderform.selectedVariants=[],""==quantityBefore&&(quantityBefore=0,this.value=0)}),grid.on("focusout keypress",".sku-quantity",function(event){var quantityAfter,gridLevelTotalPrice,currentIndex,variantCode,$gridTotalValue,currentPrice,_this,priceSibling,propSibling,currentSkuId,currentBaseTotal,newVariant,code=event.keyCode||event.which||event.charCode;13!=code&&null!=code||(quantityAfter=0,gridLevelTotalPrice="",currentIndex=parseInt($(this).attr("id").match("[0-9]+")),this.value=ACC.productorderform.filterSkuEntry(this.value),quantityAfter=jQuery.trim(this.value),variantCode=$(document).find("input[id='cartEntries["+currentIndex+"].sku']").val(),isNaN(jQuery.trim(this.value))&&(this.value=0),""==quantityAfter&&(quantityAfter=0,this.value=0),$gridTotalValue=grid.find("[data-grid-total-id=total_value_"+currentIndex+"]"),currentPrice=$(document).find("input[id='productPrice["+currentIndex+"]']").val(),0<quantityAfter&&(gridLevelTotalPrice=ACC.productorderform.formatTotalsCurrency(parseFloat(currentPrice)*parseInt(quantityAfter))),$gridTotalValue.text(gridLevelTotalPrice),_this=this,priceSibling=$(this).siblings(".price"),propSibling=$(this).siblings(".variant-prop"),currentSkuId=$(this).next(".td_stock").data("sku-id"),currentBaseTotal=$(this).siblings(".data-grid-total"),this.value!=quantityBefore&&(newVariant=!0,ACC.productorderform.selectedVariants.forEach(function(item,index){item.id===currentSkuId&&(newVariant=!1,"0"===_this.value||0===_this.value?ACC.productorderform.selectedVariants.splice(index,1):(ACC.productorderform.selectedVariants[index].quantity=_this.value,ACC.productorderform.selectedVariants[index].total=ACC.productorderform.updateVariantTotal(priceSibling,_this.value,currentBaseTotal)))}),newVariant&&0<this.value&&ACC.productorderform.selectedVariants.push({id:currentSkuId,size:propSibling.data("variant-prop"),quantity:_this.value,total:ACC.productorderform.updateVariantTotal(priceSibling,_this.value,currentBaseTotal)})),ACC.productorderform.showSelectedVariant($(this).parents("table")),0<this.value&&this.value!=quantityBefore?$(this).parents("table").addClass("selected"):0===ACC.productorderform.selectedVariants.length&&$(this).parents("table").removeClass("selected").find(".variant-summary").remove(),quantityBefore!=quantityAfter&&$.ajax({url:ACC.config.encodedContextPath+"/cart/updateMultiD",data:{productCode:variantCode,quantity:quantityAfter,entryNumber:-1},type:"POST",success:function(data,textStatus,xhr){ACC.cart.refreshCartData(data,-1,quantityAfter,itemIndex),mapCodeQuantity[variantCode]=quantityAfter},error:function(xhr,textStatus,error){var redirectUrl=xhr.getResponseHeader("redirectUrl"),connection=xhr.getResponseHeader("Connection");null!==redirectUrl?window.location=redirectUrl:"close"===connection&&window.location.reload()}}))})},refreshCartData:function(cartData,entryNum,quantity,itemIndex){if(0==cartData.entries.length)location.reload();else{var form;if(-1==entryNum){for(var productCode=(form=$(document).find(".js-qty-form"+itemIndex)).find("input[name=productCode]").val(),quantity=0,entryPrice=0,i=0;i<cartData.entries.length;i++){var entry=cartData.entries[i];if(entry.product.code==productCode){quantity=entry.quantity,entryPrice=entry.totalPrice,ACC.cart.updateEntryNumbersForCartMenuData(entry);break}}0==quantity?location.reload():(form.find(".qtyValue").text(quantity),form.parent().parent().find(".js-item-total").text(entryPrice.formattedValue))}ACC.cart.refreshCartPageWithJSONResponse(cartData)}},refreshCartPageWithJSONResponse:function(cartData){ACC.minicart.updateMiniCartDisplay(),$(".js-cart-top-totals").text($("#cartTopTotalSectionTemplate").tmpl(cartData)),$("div .cartpotproline").remove(),$("div .cartproline").remove(),$(".js-cart-totals").remove(),$("#ajaxCartPotentialPromotionSection").text($("#cartPotentialPromotionSectionTemplate").tmpl(cartData)),$("#ajaxCartPromotionSection").text($("#cartPromotionSectionTemplate").tmpl(cartData)),$("#ajaxCart").text($("#cartTotalsTemplate").tmpl(cartData)),ACC.quote.bindQuoteDiscount()},updateEntryNumbersForCartMenuData:function(entry){var entryNumbers="";$.each(entry.entries,function(index,subEntry){0!=index&&(entryNumbers+=";"),entryNumbers+=subEntry.entryNumber}),$(".js-execute-entry-action-button").data("actionEntryNumbers",entryNumbers)},getProductQuantity:function(gridContainer,mapData,i){var tables=gridContainer.find("table");$.each(tables,function(index,currentTable){var skus=jQuery.map($(currentTable).find("input[type='hidden'].sku"),function(o){return o.value}),quantities=jQuery.map($(currentTable).find("input[type='textbox'].sku-quantity"),function(o){return o}),selectedVariants=[];$.each(skus,function(index,skuId){var currentIndex,gridTotalValue,gridLevelTotalPrice,currentPrice,quantity=mapData[skuId];null!=quantity&&(quantities[index].value=quantity,currentIndex=parseInt(quantities[index].id.match("[0-9]+")),gridTotalValue=gridContainer.find("[data-grid-total-id=total_value_"+currentIndex+"]"),gridLevelTotalPrice="",currentPrice=$(document).find("input[id='productPrice["+currentIndex+"]']").val(),0<quantity&&(gridLevelTotalPrice=ACC.productorderform.formatTotalsCurrency(parseFloat(currentPrice)*parseInt(quantity))),gridTotalValue.text(gridLevelTotalPrice),selectedVariants.push({id:skuId,size:$(quantities[index]).siblings(".variant-prop").data("variant-prop"),quantity:quantity,total:gridLevelTotalPrice}))}),0!=selectedVariants.length&&($.tmpl(ACC.productorderform.$variantSummaryTemplate,{variants:selectedVariants}).appendTo($(currentTable).addClass("selected")),$(currentTable).find(".variant-summary .variant-property").text($(currentTable).find(".variant-detail").data("variant-property")),$(currentTable).data(ACC.productorderform.selectedVariantData,selectedVariants))})},bindMultidCartProduct:function(){$(document).on("click",".showQuantityProduct",function(event){ACC.multidgrid.populateAndShowGrid(this,event,!0)}),$(document).on("click",".showQuantityProductOverlay",function(event){ACC.multidgrid.populateAndShowGridOverlay(this,event)})},bindApplyVoucher:function(){$("#js-voucher-apply-btn").on("click",function(e){ACC.cart.handleApplyVoucher(e)}),$("#js-voucher-code-text").on("keypress",function(e){13==(e.keyCode?e.keyCode:e.which)&&ACC.cart.handleApplyVoucher(e)})},handleApplyVoucher:function(e){var voucherCode=$.trim($("#js-voucher-code-text").val());""!=voucherCode&&0<voucherCode.length&&$("#applyVoucherForm").submit()},bindToReleaseVoucher:function(){$(".js-release-voucher-remove-btn").on("click",function(event){$(this).closest("form").submit()})}},ACC.cartitem={_autoload:["bindCartItem"],submitTriggered:!1,bindCartItem:function(){$(".js-execute-entry-action-button").on("click",function(){var entryAction=$(this).data("entryAction"),entryActionUrl=$(this).data("entryActionUrl"),entryProductCode=$(this).data("entryProductCode"),entryInitialQuantity=$(this).data("entryInitialQuantity"),actionEntryNumbers=$(this).data("actionEntryNumbers");"REMOVE"==entryAction&&ACC.track.trackRemoveFromCart(entryProductCode,entryInitialQuantity);var cartEntryActionForm=$("#cartEntryActionForm");actionEntryNumbers.toString().split(";").forEach(function(entryNumber){var entryNumbersInput=$("<input>").attr("type","hidden").attr("name","entryNumbers").val(entryNumber);cartEntryActionForm.append($(entryNumbersInput))}),cartEntryActionForm.attr("action",entryActionUrl).submit()}),$(".js-update-entry-quantity-input").on("blur",function(e){ACC.cartitem.handleUpdateQuantity(this,e)}).on("keyup",function(e){return ACC.cartitem.handleKeyEvent(this,e)}).on("keydown",function(e){return ACC.cartitem.handleKeyEvent(this,e)})},handleKeyEvent:function(elementRef,event){return 13!=event.which||ACC.cartitem.submitTriggered?!ACC.cartitem.submitTriggered:(ACC.cartitem.submitTriggered=ACC.cartitem.handleUpdateQuantity(elementRef,event),!1)},handleUpdateQuantity:function(elementRef,event){var form=$(elementRef).closest("form"),productCode=form.find("input[name=productCode]").val(),initialCartQuantity=form.find("input[name=initialQuantity]").val(),newCartQuantity=form.find("input[name=quantity]").val();return initialCartQuantity!=newCartQuantity&&(ACC.track.trackUpdateCart(productCode,initialCartQuantity,newCartQuantity),form.submit(),!0)}},$(document).ready(function(){$(".js-cartItemDetailBtn").click(function(event){event.stopPropagation();var thisDetailGroup=$(this).parent(".js-cartItemDetailGroup");$(thisDetailGroup).toggleClass("open"),$(thisDetailGroup).hasClass("open")?($(".js-cartItemDetailGroup").not(thisDetailGroup).removeClass("open"),$(".js-cartItemDetailBtn").attr("aria-expanded","true")):$(".js-cartItemDetailBtn").attr("aria-expanded","false"),$(document).click(function(){$(thisDetailGroup).removeClass("open")})}),$(".js-entry-comment-button").click(function(event){event.preventDefault();var linkID=$(this).attr("href");$(linkID).toggleClass("in"),$(thisDetailGroup).removeClass("open")})}),ACC.checkout={_autoload:["bindCheckO","bindForms","bindSavedPayments"],bindForms:function(){$(document).on("click","#addressSubmit",function(e){e.preventDefault(),$("#addressForm").submit()}),$(document).on("click","#deliveryMethodSubmit",function(e){e.preventDefault(),$("#selectDeliveryMethodForm").submit()})},bindSavedPayments:function(){$(document).on("click",".js-saved-payments",function(e){e.preventDefault();var title=$("#savedpaymentstitle").html();$.colorbox({href:"#savedpaymentsbody",inline:!0,maxWidth:"100%",opacity:.7,title:title,close:'<span class="glyphicon glyphicon-remove"></span>',onComplete:function(){}})})},bindCheckO:function(){$(".doFlowSelectedChange").change(function(){"multistep-pci"==$("#selectAltCheckoutFlow").val()?$("#selectPciOption").show():$("#selectPciOption").hide()}),$(".js-continue-shopping-button").click(function(){var checkoutUrl=$(this).data("continueShoppingUrl");window.location=checkoutUrl}),$(".js-create-quote-button").click(function(){$(this).prop("disabled",!0);var createQuoteUrl=$(this).data("createQuoteUrl");window.location=createQuoteUrl}),$(".expressCheckoutButton").click(function(){document.getElementById("expressCheckoutCheckbox").checked=!0}),$(document).on("input",".confirmGuestEmail,.guestEmail",function(){$(".guestEmail").val()===$(".confirmGuestEmail").val()?$(".guestCheckoutBtn").removeAttr("disabled"):$(".guestCheckoutBtn").attr("disabled","disabled")}),$(".js-continue-checkout-button").click(function(){var expressCheckoutObject,flow,redirectUrl,checkoutUrl=$(this).data("checkoutUrl");return ACC.pickupinstore.validatePickupinStoreCartEntires()||((expressCheckoutObject=$(".express-checkout-checkbox")).is(":checked")?window.location=expressCheckoutObject.data("expressCheckoutUrl"):null==(flow=$("#selectAltCheckoutFlow").val())||""==flow||"select-checkout"==flow?window.location=checkoutUrl:("multistep-pci"==flow&&(flow="multistep"),redirectUrl=checkoutUrl+"/select-flow?flow="+flow+"&pci="+$("#selectPciOption").val(),window.location=redirectUrl)),!1})}},ACC.checkoutsteps={_autoload:["permeateLinks"],permeateLinks:function(){$(document).on("click",".js-checkout-step",function(e){e.preventDefault(),window.location=$(this).closest("a").attr("href")})}},ACC.cms={loadComponent:function(id,type,target,onSuccess,onError){var self=this;id&&$.ajax({url:ACC.config.contextPath+"/cms/component?componentUid="+encodeURIComponent(id),cache:!1,type:"GET",dataType:"html",success:function(result){reprocess=-1<result.indexOf("js-responsive-image"),self.insertHtml(result,target,reprocess),onSuccess&&onSuccess(result,id,type,target)},error:function(result){onError&&onError(result,id,type,target)}})},insertHtml:function(html,target,reprocess){target&&($(target).html(html),reprocess&&ACC.global.reprocessImages())}};var cboxOptions={width:"95%",height:"95%",maxWidth:"960px",maxHeight:"960px"};function dropdownParent($this){var selector=$this.attr("href"),$parent=(selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,""))&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}function dropdownClearMenus(e){e&&3===e.which||($(".dropdown-backdrop").remove(),$(".dropdown-toggle").each(function(){var $parent=dropdownParent($(this));$parent.hasClass("open")&&(e&&"click"==e.type&&/input|textarea/i.test(e.target.tagName)&&$.contains($parent[0],e.target)||$parent.removeClass("open"))}))}function dropdownToggle(e){var $this=$(this);if(!$this.is(".disabled, :disabled")){var $parent=dropdownParent($this),isActive=$parent.hasClass("open");if(dropdownClearMenus(),!isActive){"ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length&&$(document.createElement("div")).addClass("dropdown-backdrop").insertAfter($(this)).on("click",dropdownClearMenus);if(e.isDefaultPrevented())return;$this.trigger("focus").attr("aria-expanded","true"),$parent.toggleClass("open")}return!1}}$(".cbox-link").colorbox(cboxOptions),$(window).resize(function(){$("#colorbox").hasClass("variantSelectMobile")||$.colorbox.resize({width:window.innerWidth>parseInt(cboxOptions.maxWidth)?cboxOptions.maxWidth:cboxOptions.width,height:window.innerHeight>parseInt(cboxOptions.maxHeight)?cboxOptions.maxHeight:cboxOptions.height})}),ACC.colorbox={config:{maxWidth:"100%",opacity:.7,width:"auto",transition:"none",close:'<span class="glyphicon glyphicon-remove"></span>',title:'<div class="headline"><span class="headline-text">{title}</span></div>',onComplete:function(){$.colorbox.resize(),ACC.common.refreshScreenReaderBuffer()},onClosed:function(){ACC.common.refreshScreenReaderBuffer()}},open:function(title,config){return(config=$.extend({},ACC.colorbox.config,config)).title=config.title.replace(/{title}/g,title),$.colorbox(config)},resize:function(){$.colorbox.resize()},close:function(){$.colorbox.close()}},ACC.common={currentCurrency:$("main").data("currencyIsoCode")||"USD",processingMessage:$("<img>").attr("src",ACC.config.commonResourcePath+"/images/spinner.gif"),blockFormAndShowProcessingMessage:function(submitButton){submitButton.parents("form:first").block({message:ACC.common.processingMessage})},refreshScreenReaderBuffer:function(){$("#accesibility_refreshScreenReaderBufferField").attr("value",(new Date).getTime())},checkAuthenticationStatusBeforeAction:function(actionCallback){$.ajax({url:ACC.config.authenticationStatusUrl,statusCode:{401:function(){location.href=ACC.config.loginUrl}},dataType:"json",success:function(data){"authenticated"==data&&actionCallback()}})},encodeHtml:function(rawText){return rawText.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\//g,"&#47;")}},jQuery.extend({postJSON:function(url,data,callback){return jQuery.post(url,data,callback,"json")}}),$.ajaxPrefilter(function(options,originalOptions,jqXHR){"post"!==options.type&&"POST"!==options.type||(void 0===options.data?options.data="CSRFToken="+ACC.config.CSRFToken:options.data instanceof window.FormData?options.data.append("CSRFToken",ACC.config.CSRFToken):/application\/json/i.test(options.contentType)?jqXHR.setRequestHeader("CSRFToken",ACC.config.CSRFToken):-1===options.data.indexOf("CSRFToken")&&(options.data=options.data+"&CSRFToken="+ACC.config.CSRFToken))}),ACC.forgottenpassword={_autoload:["bindLink"],bindLink:function(){$(document).on("click",".js-password-forgotten",function(e){e.preventDefault();var titleHtml=ACC.common.encodeHtml($(this).data("cboxTitle"));ACC.colorbox.open(titleHtml,{href:$(this).data("link"),width:"350px",fixed:!0,top:150,onOpen:function(){$("#validEmail").remove()},onComplete:function(){$("form#forgottenPwdForm").ajaxForm({success:function(data){$(data).closest("#validEmail").length?0===$("#validEmail").length&&($(".forgotten-password").replaceWith(data),ACC.colorbox.resize()):($("#forgottenPwdForm .control-group").replaceWith($(data).find(".control-group")),ACC.colorbox.resize())}})}})})}},ACC.global={_autoload:[["passwordStrength",0<$(".password-strength").length],"bindToggleOffcanvas","bindToggleXsSearch","bindHoverIntentMainNavigation","initImager","backToHome","bindDropdown","closeAccAlert"],passwordStrength:function(){$(".password-strength").pstrength({verdicts:[ACC.pwdStrengthTooShortPwd,ACC.pwdStrengthVeryWeak,ACC.pwdStrengthWeak,ACC.pwdStrengthMedium,ACC.pwdStrengthStrong,ACC.pwdStrengthVeryStrong],minCharText:ACC.pwdStrengthMinCharText})},bindToggleOffcanvas:function(){$(document).on("click",".js-toggle-sm-navigation",function(){ACC.global.toggleClassState($("main"),"offcanvas"),ACC.global.toggleClassState($("html"),"offcanvas"),ACC.global.toggleClassState($("body"),"offcanvas"),ACC.global.resetXsSearch()})},bindToggleXsSearch:function(){$(document).on("click",".js-toggle-xs-search",function(){ACC.global.toggleClassState($(".site-search"),"active"),ACC.global.toggleClassState($(".js-mainHeader .navigation--middle"),"search-open")})},resetXsSearch:function(){$(".site-search").removeClass("active"),$(".js-mainHeader .navigation--middle").removeClass("search-open")},toggleClassState:function($e,c){return $e.hasClass(c)?$e.removeClass(c):$e.addClass(c),$e.hasClass(c)},bindHoverIntentMainNavigation:function(){enquire.register("screen and (min-width:"+ACC.common.encodeHtml(screenMdMin)+")",{match:function(){$(".js-enquire-has-sub").hoverIntent(function(){var $this=$(this),itemWidth=$this.width(),$subNav=$this.find(".js_sub__navigation"),subNavWidth=$subNav.outerWidth(),mainNavWidth=$(".js_navigation--bottom").width(),leftPos=$this.position().left+itemWidth/2-subNavWidth/2,topPos=$this.position().top+$this.height();0<leftPos&&leftPos+subNavWidth<mainNavWidth?$subNav.css({left:leftPos,top:topPos,right:"auto"}):leftPos<0?$subNav.css({left:0,top:topPos,right:"auto"}):mainNavWidth<leftPos+subNavWidth&&$subNav.css({right:0,top:topPos,left:"auto"}),$this.addClass("show-sub")},function(){$(this).removeClass("show-sub")})},unmatch:function(){$(".js_sub__navigation").removeAttr("style"),$(".js-enquire-has-sub").hoverIntent(function(){})}})},initImager:function(elems){elems=elems||".js-responsive-image",this.imgr=new Imager(elems)},reprocessImages:function(elems){elems=elems||".js-responsive-image",null==this.imgr?this.initImager(elems):this.imgr.checkImagesNeedReplacing($(elems))},addGoogleMapsApi:function(callback){var googleApiSrc;null!=callback&&0==$(".js-googleMapsApi").length?(googleApiSrc="//maps.googleapis.com/maps/api/js?key="+ACC.common.encodeHtml(ACC.config.googleApiKey)+"&sensor=false&callback="+ACC.common.encodeHtml(callback),$("head").append($("<script>").addClass("js-googleMapsApi").attr("type","text/javascript").attr("src",googleApiSrc))):null!=callback&&eval(callback+"()")},backToHome:function(){$(".backToHome").on("click",function(){var sUrl=ACC.config.contextPath;window.location=sUrl})},bindDropdown:function(){$(document).on("click",".dropdown-toggle",dropdownToggle)},closeAccAlert:function(){$(".closeAccAlert").on("click",function(){$(this).parent(".getAccAlert").remove()})}},ACC.hopdebug={bindAll:function(){this.bindShowDebugMode()},bindShowDebugMode:function(){$("#hopDebugMode").data("hopDebugMode")||$("#showDebugPage").val()||$("#hostedOrderPagePostForm").submit()}},$(document).ready(function(){ACC.hopdebug.bindAll()}),ACC.imagegallery={_autoload:["bindImageGallery"],bindImageGallery:function(){$(".js-gallery").each(function(){var $image=$(this).find(".js-gallery-image"),$carousel=$(this).find(".js-gallery-carousel");$image.owlCarousel({singleItem:!0,pagination:!0,navigation:!0,lazyLoad:!0,navigationText:[$("<span>").addClass("glyphicon glyphicon-chevron-left"),$("<span>").addClass("glyphicon glyphicon-chevron-right")],afterAction:function(){ACC.imagegallery.syncPosition($image,$carousel,this.currentItem),$image.data("zoomEnable",!0)},startDragging:function(){$image.data("zoomEnable",!1)},afterLazyLoad:function(e){var b=$image.data("owlCarousel")||{};b.currentItem||(b.currentItem=0),function(e){$(e).zoom({url:$(e).find("img.lazyOwl").data("zoomImage"),touch:!0,on:"grab",touchduration:300,onZoomIn:function(){},onZoomOut:function(){$image.data("owlCarousel").dragging(!0),$image.data("zoomEnable",!0)},zoomEnableCallBack:function(){var bool=$image.data("zoomEnable"),owl=$image.data("owlCarousel");return!1===bool?owl.dragging(!0):owl.dragging(!1),bool}})}($($image.find("img.lazyOwl")[b.currentItem]).parent())}}),$carousel.owlCarousel({navigation:!0,navigationText:[$("<span>").addClass("glyphicon glyphicon-chevron-left"),$("<span>").addClass("glyphicon glyphicon-chevron-right")],pagination:!1,items:2,itemsDesktop:[5e3,7],itemsDesktopSmall:[1200,5],itemsTablet:[768,4],itemsMobile:[480,3],lazyLoad:!0,afterAction:function(){}}),$carousel.on("click","a.item",function(e){e.preventDefault(),$image.trigger("owl.goTo",$(this).parent(".owl-item").data("owlItem"))})})},syncPosition:function($image,$carousel,currentItem){$carousel.trigger("owl.goTo",currentItem)}},ACC.langcurrency={_autoload:["bindLangCurrencySelector"],bindLangCurrencySelector:function(){$("#lang-selector").change(function(){$("#lang-form").submit()}),$("#currency-selector").change(function(){$("#currency-form").submit()})}},ACC.minicart={_autoload:["bindMiniCart"],bindMiniCart:function(){$(document).on("click",".js-mini-cart-link",function(e){e.preventDefault();var url=$(this).data("miniCartUrl"),cartName=0!=$(this).find(".js-mini-cart-count").html()?$(this).data("miniCartName"):$(this).data("miniCartEmptyName");ACC.colorbox.open(ACC.common.encodeHtml(cartName),{href:url,maxWidth:"100%",width:"380px",initialWidth:"380px"})}),$(document).on("click",".js-mini-cart-close-button",function(e){e.preventDefault(),ACC.colorbox.close()})},updateMiniCartDisplay:function(){var cartItems=$(".js-mini-cart-link").data("miniCartItemsText"),miniCartRefreshUrl=$(".js-mini-cart-link").data("miniCartRefreshUrl");$.ajax({url:miniCartRefreshUrl,cache:!1,type:"GET",dataType:"json",success:function(jsonData){var $cartItems=$("<span>").addClass("items-desktop hidden-xs hidden-sm").text(" "+cartItems),$numberItem=$("<span>").addClass("nav-items-total").text(jsonData.miniCartCount).append($cartItems);$(".js-mini-cart-link .js-mini-cart-count").empty(),$(".js-mini-cart-link .js-mini-cart-count").append($numberItem),$(".js-mini-cart-link .js-mini-cart-price").text(jsonData.miniCartPrice)}})}};var oDoc=document;ACC.navigation={_autoload:["offcanvasNavigation","myAccountNavigation","orderToolsNavigation"],offcanvasNavigation:function(){enquire.register("screen and (max-width:"+ACC.common.encodeHtml(screenSmMax)+")",{match:function(){$(document).on("click",".js-enquire-offcanvas-navigation .js-enquire-has-sub .js_nav__link--drill__down",function(e){e.preventDefault(),$(".js-userAccount-Links").hide(),$(".js-enquire-offcanvas-navigation ul.js-offcanvas-links").addClass("active"),$(".js-enquire-offcanvas-navigation .js-enquire-has-sub").removeClass("active"),$(this).parent(".js-enquire-has-sub").addClass("active")}),$(document).on("click",".js-enquire-offcanvas-navigation .js-enquire-sub-close",function(e){e.preventDefault(),$(".js-userAccount-Links").show(),$(".js-enquire-offcanvas-navigation ul.js-offcanvas-links").removeClass("active"),$(".js-enquire-offcanvas-navigation .js-enquire-has-sub").removeClass("active")})},unmatch:function(){$(".js-userAccount-Links").show(),$(".js-enquire-offcanvas-navigation ul.js-offcanvas-links").removeClass("active"),$(".js-enquire-offcanvas-navigation .js-enquire-has-sub").removeClass("active"),$(document).off("click",".js-enquire-offcanvas-navigation .js-enquire-has-sub > a"),$(document).off("click",".js-enquire-offcanvas-navigation .js-enquire-sub-close")}})},myAccountNavigation:function(){$(".js-mobile-logo").html($(".js-site-logo a").clone()),$(".nav-form").append($("<span>").addClass("glyphicon glyphicon-list-alt"));var aAcctData=[],sSignBtn="",oMyAccountData=$(".accNavComponent"),oMMainNavDesktop=$(".js-secondaryNavAccount > ul");$(".navigation--bottom > ul.nav__links.nav__links--products");if(oMyAccountData)for(var aLinks=oMyAccountData.find("a"),i=0;i<aLinks.length;i++)aAcctData.push({link:aLinks[i].href,text:aLinks[i].title});var navClose=$("<div>").addClass("close-nav").append($("<button>").attr("type","button").addClass("js-toggle-sm-navigation btn").append($("<span>").addClass("glyphicon glyphicon-remove")));$(".liOffcanvas a")&&0<$(".liOffcanvas a").length&&(sSignBtn=$("<li>").addClass("auto liUserSign").append($("<a>").addClass("userSign").attr("href",$(".liOffcanvas a")[0].href).text($(".liOffcanvas a")[0].innerHTML)));var navButtons,oUserInfo=$(".nav__right ul li.logged_in");if(oUserInfo&&1===oUserInfo.length){var sUserBtn=$("<li>").addClass("auto").append($("<div>").addClass("userGroup").append($("<span>").addClass("glyphicon glyphicon-user myAcctUserIcon")).append($("<div>").addClass("userName").html(oUserInfo[0].innerHTML)));0<aAcctData.length&&$(sUserBtn).find(".userGroup").append($("<a>").addClass("collapsed js-nav-collapse").attr("id","signedInUserOptionsToggle").attr("data-toggle","collapse").attr("data-target",".offcanvasGroup1").append($("<span>").addClass("glyphicon glyphicon-chevron-up myAcctExp"))),sUserBtn.append(navClose),$(".js-sticky-user-group").html(sUserBtn),$(".js-userAccount-Links").append(sSignBtn),$(".js-userAccount-Links").append($("<li>").addClass("auto").append($("<div>").addClass("myAccountLinksContainer js-myAccountLinksContainer"))),(myAccountHook=$("<div>").addClass("myAccountLinksHeader js-myAccount-toggle").attr("data-toggle","collapse").attr("data-parent",".nav__right").text(oMyAccountData.data("title"))).insertBefore(oMyAccountData),$(".myAccountLinksHeader").click(function(){return $(this).toggleClass("show"),$(".js-secondaryNavAccount").slideToggle(400),$(this).hasClass("show")&&($(".myCompanyLinksHeader").removeClass("show"),$(".js-secondaryNavCompany").slideUp(400)),!1});var myAccountHook=$("<div>").addClass("sub-nav").append($("<a>").attr("id","signedInUserAccountToggle").addClass("myAccountLinksHeader collapsed js-myAccount-toggle").attr("data-toggle","collapse").attr("data-target",".offcanvasGroup2").text(oMyAccountData.data("title")).append($("<span>").addClass("glyphicon glyphicon-chevron-down myAcctExp")));$(".js-myAccountLinksContainer").append(myAccountHook),$(".js-myAccountLinksContainer").append($("<ul>").attr("data-trigger","#signedInUserAccountToggle").addClass("offcanvasGroup2 offcanvasNoBorder collapse js-nav-collapse-body subNavList js-myAccount-root sub-nav")),$("#signedInUserAccountToggle").click(function(){$(this).toggleClass("show"),$(".offcanvasGroup2").slideToggle(400),$(this).hasClass("show")?($(this).find("span").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up"),$("#signedInCompanyToggle").removeClass("show"),$("#signedInCompanyToggle").find("span").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down"),$(".offcanvasGroup3").slideUp(400)):$(this).find("span").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")});for(i=aAcctData.length-1;0<=i;i--){(oLink=oDoc.createElement("a")).title=aAcctData[i].text,oLink.href=aAcctData[i].link,oLink.innerHTML=ACC.common.encodeHtml(aAcctData[i].text),(oListItem=oDoc.createElement("li")).appendChild(oLink),(oListItem=$(oListItem)).addClass("auto "),$(".js-myAccount-root").append(oListItem)}}else{sSignBtn&&(navButtons=sSignBtn.append(navClose),$(".js-sticky-user-group").append(navButtons))}for(var oLink,oListItem,i=0;i<aAcctData.length;i++){(oLink=oDoc.createElement("a")).title=aAcctData[i].text,oLink.href=aAcctData[i].link,oLink.innerHTML=ACC.common.encodeHtml(aAcctData[i].text),(oListItem=oDoc.createElement("li")).appendChild(oLink),(oListItem=$(oListItem)).addClass("auto col-md-4"),oMMainNavDesktop.get(0).appendChild(oListItem.get(0))}$(".js-secondaryNavAccount").on("shown.bs.collapse",function(){$(".js-secondaryNavCompany").hasClass("in")&&$(".js-myCompany-toggle").click()}),$(".js-secondaryNavCompany").on("shown.bs.collapse",function(){$(".js-secondaryNavAccount").hasClass("in")&&$(".js-myAccount-toggle").click()}),$(".js-nav-collapse-body").on("hidden.bs.collapse",function(e){var target=$(e.target),targetSpanSelector=target.attr("data-trigger")+" > span";target.hasClass("in")?$(document).find(targetSpanSelector).removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up"):$(document).find(targetSpanSelector).removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")}),$(".js-nav-collapse-body").on("show.bs.collapse",function(e){var target=$(e.target),targetSpanSelector=target.attr("data-trigger")+" > span";target.hasClass("in")?$(document).find(targetSpanSelector).removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down"):$(document).find(targetSpanSelector).removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up")})},orderToolsNavigation:function(){$(".js-nav-order-tools").on("click",function(e){$(this).toggleClass("js-nav-order-tools--active")})}},ACC.order={_autoload:["backToOrderHistory","bindMultidProduct"],backToOrderHistory:function(){$(".orderBackBtn > button").on("click",function(){var sUrl=$(this).data("backToOrders");window.location=sUrl})},bindMultidProduct:function(){$(document).on("click",".js-show-multiD-grid-in-order",function(event){return ACC.multidgrid.populateAndShowGrid(this,event,!0),!1}),$(document).on("click",".showMultiDGridInOrderOverlay",function(event){ACC.multidgrid.populateAndShowGridOverlay(this,event)})}},ACC.paginationsort={downUpKeysPressed:!1,bindAll:function(){this.bindPaginationSort()},bindPaginationSort:function(){ACC.paginationsort.bindSortForm($("#sortForm1")),ACC.paginationsort.bindSortForm($("#sortForm2"))},bindSortForm:function(sortForm){sortForm.change(function(){ACC.paginationsort.downUpPressed||this.submit(),ACC.paginationsort.downUpPressed=!1})},sortFormIEFix:function(sortOptions,selectedOption){sortOptions.keydown(function(e){38===e.keyCode||40===e.keyCode?ACC.paginationsort.downUpPressed=!0:13===e.keyCode&&selectedOption!==$(this).val()?$(this).parent().submit():ACC.paginationsort.downUpPressed=!1})}},$(document).ready(function(){ACC.paginationsort.bindAll()}),ACC.payment={activateSavedPaymentButton:function(){$(document).on("click",".js-saved-payments",function(e){e.preventDefault();var titleHtml=$("#savedpaymentstitle").html();$.colorbox({href:"#savedpaymentsbody",inline:!0,maxWidth:"100%",opacity:.7,width:"320px",title:titleHtml,close:'<span class="glyphicon glyphicon-remove"></span>',onComplete:function(){}})})},bindPaymentCardTypeSelect:function(){ACC.payment.filterCardInformationDisplayed(),$("#card_cardType").change(function(){"024"==$(this).val()?$("#startDate, #issueNum").show():$("#startDate, #issueNum").hide()})},filterCardInformationDisplayed:function(){"024"==$("#card_cardType").val()?$("#startDate, #issueNum").show():$("#startDate, #issueNum").hide()}},$(document).ready(function(){ACC.payment.activateSavedPaymentButton(),ACC.payment.bindPaymentCardTypeSelect()}),ACC.paymentDetails={_autoload:["showRemovePaymentDetailsConfirmation"],showRemovePaymentDetailsConfirmation:function(){$(document).on("click",".removePaymentDetailsButton",function(){var paymentId=$(this).data("paymentId"),popupTitle=$(this).data("popupTitle");ACC.colorbox.open(ACC.common.encodeHtml(popupTitle),{inline:!0,href:"#popup_confirm_payment_removal_"+paymentId,onComplete:function(){$(this).colorbox.resize()}})})}},ACC.pickupinstore={_autoload:["bindClickPickupInStoreButton","bindPickupButton","bindPickupClose","bindPickupInStoreSearch"],storeId:"",unbindPickupPaginationResults:function(){$(document).off("click","#colorbox .js-pickup-store-pager-prev"),$(document).off("click","#colorbox .js-pickup-store-pager-next")},bindPickupPaginationResults:function(){var listHeight=$("#colorbox .js-pickup-store-list").height(),$listitems=$("#colorbox .js-pickup-store-list > li"),listItemHeight=$listitems.height(),totalCount=$listitems.length,curPos=0;function checkPosition(){var curPage=Math.ceil(curPos/(5*listItemHeight)*-1)+1;$("#colorbox .js-pickup-store-pager-item-from").text(5*curPage-4);var tocount=totalCount<5*curPage?totalCount:5*curPage;5*curPage-4==1?$("#colorbox .js-pickup-store-pager-prev").hide():$("#colorbox .js-pickup-store-pager-prev").show(),totalCount<=5*curPage?$("#colorbox .js-pickup-store-pager-next").hide():$("#colorbox .js-pickup-store-pager-next").show(),$("#colorbox .js-pickup-store-pager-item-to").text(tocount)}$("#colorbox .js-pickup-store-pager-item-all").text(totalCount),$("#colorbox .store-navigation-pager").show(),checkPosition(),$(document).on("click","#colorbox .js-pickup-store-pager-prev",function(e){e.preventDefault(),$listitems.css("transform","translateY("+(curPos+listHeight)+"px)"),curPos+=listHeight,checkPosition()}),$(document).on("click","#colorbox .js-pickup-store-pager-next",function(e){e.preventDefault(),$listitems.css("transform","translateY("+(curPos-listHeight)+"px)"),curPos-=listHeight,checkPosition()})},bindPickupInStoreQuantity:function(){$(".pdpPickupQtyPlus").click(function(e){e.preventDefault();var inputQty=$(".js-add-pickup-cart #pdpPickupAddtoCartInput"),currentVal=parseInt(inputQty.val()),maxVal=inputQty.data("max");!isNaN(currentVal)&&currentVal<maxVal&&(inputQty.val(currentVal+1),inputQty.change())}),$(".pdpPickupQtyMinus").click(function(e){e.preventDefault();var inputQty=$(".js-add-pickup-cart #pdpPickupAddtoCartInput"),currentVal=parseInt(inputQty.val()),minVal=inputQty.data("min");!isNaN(currentVal)&&minVal<currentVal&&(inputQty.val(currentVal-1),inputQty.change())}),$("body").on("keyup",".js-add-pickup-cart #pdpPickupAddtoCartInput",function(event){var input=$(event.target);input.val(this.value.match(/[0-9]*/));input.val()})},bindPickupInStoreSearch:function(){$(document).on("click","#pickupstore_location_search_button",function(e){return ACC.pickupinstore.locationSearchSubmit($("#locationForSearch").val(),$("#atCartPage").val(),$("#entryNumber").val(),$(this).parents("form").attr("action")),!1}),$(document).on("keypress","#locationForSearch",function(e){if(13===e.keyCode)return e.preventDefault(),ACC.pickupinstore.locationSearchSubmit($("#locationForSearch").val(),$("#atCartPage").val(),$("input.entryNumber").val(),$(this).parents("form").attr("action")),!1})},bindPickupHereInStoreButtonClick:function(){$(document).on("click",".pickup_add_to_bag_instore_button",function(e){$(this).prev(".hiddenPickupQty").val($("#pickupQty").val())}),$(document).on("click",".pickup_here_instore_button",function(e){$(this).prev(".hiddenPickupQty").val($("#pickupQty").val()),ACC.colorbox.close()})},locationSearchSubmit:function(location,cartPage,entryNumber,actionUrl,latitude,longitude){$("#colorbox .js-add-to-cart-for-pickup-popup, #colorbox .js-qty-selector-minus, #colorbox .js-qty-selector-input, #colorbox .js-qty-selector-plus").attr("disabled","disabled"),$.post({url:actionUrl,data:{locationQuery:location,cartPage:cartPage,entryNumber:entryNumber,latitude:latitude,longitude:longitude},dataType:"text",success:function(response){ACC.pickupinstore.refreshPickupInStoreColumn(response)}})},createListItemHtml:function(data,id){var $rdioEl=$("<input>").attr("type","radio").attr("name","storeNamePost").attr("id","pickup-entry-"+id).attr("data-id",id).addClass("js-pickup-store-input").val(data.displayName),$spanElStInfo=$("<span>").addClass("pickup-store-info").append($("<span>").addClass("pickup-store-list-entry-name").text(data.displayName)).append($("<span>").addClass("pickup-store-list-entry-address").text(data.line1+" "+data.line2)).append($("<span>").addClass("pickup-store-list-entry-city").text(data.town)),$spanElStAvail=$("<span>").addClass("store-availability").append($("<span>").addClass("available").append(document.createTextNode(data.formattedDistance)).append("<br>").append(data.stockPickupHtml)),$lblEl=$("<label>").addClass("js-select-store-label").attr("for","pickup-entry-"+id).append($spanElStInfo).append($spanElStAvail);return $("<li>").addClass("pickup-store-list-entry").append($rdioEl).append($lblEl)},refreshPickupInStoreColumn:function(data){data=$.parseJSON(data);var $storeList=$("#colorbox .js-pickup-store-list");for($storeList.empty(),$("#colorbox .js-pickup-component").data("data",data),i=0;i<data.data.length;i++)$storeList.append(ACC.pickupinstore.createListItemHtml(data.data[i],i));ACC.pickupinstore.unbindPickupPaginationResults(),ACC.pickupinstore.bindPickupPaginationResults();var firstInput=$("#colorbox .js-pickup-store-input")[0];$(firstInput).click(),$("#colorbox .js-add-to-cart-for-pickup-popup, #colorbox .js-qty-selector-minus, #colorbox .js-qty-selector-input, #colorbox .js-qty-selector-plus").removeAttr("disabled")},bindClickPickupInStoreButton:function(){$(document).on("click",".js-pickup-in-store-button",function(e){e.preventDefault();var ele=$(this),productId="pickupModal_"+$(this).attr("id"),productIdNUM=$(this).attr("id");productIdNUM=(productIdNUM=productIdNUM.split("_"))[1];var boxContent=$("#popup_store_pickup_form > #pickupModal").clone(),titleHeader=$("#pickupTitle > .pickup-header").html();ACC.colorbox.open(titleHeader,{html:boxContent,width:"960px",onComplete:function(){$("#colorbox .js-add-to-cart-for-pickup-popup, #colorbox .js-qty-selector-minus, #colorbox .js-qty-selector-input, #colorbox .js-qty-selector-plus").attr("disabled","disabled"),boxContent.show(),ACC.pickupinstore.pickupStorePager();$("#colorbox .js-pickup-tabs").accessibleTabs({tabhead:".tabhead",tabbody:".tabbody",fx:"show",fxspeed:0,currentClass:"active",autoAnchor:!0,cssClassAvailable:!0});$("#colorbox #pickupModal *").each(function(){null!=$(this).attr("data-id")&&($(this).attr("id",$(this).attr("data-id")),$(this).removeAttr("data-id"))}),$("#colorbox input#locationForSearch").focus(),$("#colorbox #pickupModal").attr("id",productId),$("#colorbox #"+productId+" .thumb").html(ele.data("imgHtml")),$("#colorbox #"+productId+" .js-pickup-product-price").html(ele.data("productcart"));var variants=ele.data("productcartVariants"),variantsBox=$("#colorbox #"+productId+" .js-pickup-product-variants");$.each(variants,function(key,value){variantsBox.append($("<span>").text(value))}),$("#colorbox  #"+productId+" .js-pickup-product-info").html(ele.data("productnameHtml")),$("#colorbox #"+productId+" form.searchPOSForm").attr("action",ele.data("actionurl")),$("#colorbox #"+productId+" form.searchPOSForm").attr("id","pickup_in_store_search_form_product_"+productIdNUM),$("#colorbox #"+productId+" #pdpPickupAddtoCartInput").attr("value",void 0!==$("#pdpPickupAddtoCartInput").val()?$("#pdpPickupAddtoCartInput").val():ele.data("value")),$("#colorbox #"+productId+" input#entryNumber").attr("value",ele.data("entrynumber")),$("#colorbox #"+productId+" input#atCartPage").attr("value",ele.data("cartpage")),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(position){ACC.pickupinstore.locationSearchSubmit("",$("#atCartPage").val(),ele.data("entrynumber"),ele.data("actionurl"),position.coords.latitude,position.coords.longitude)},function(error){console.log("An error occurred... The error code and message are: "+error.code+"/"+error.message)}),ACC.product.bindToAddToCartStorePickUpForm()}})})},pickupStorePager:function(){$(document).on("change","#colorbox .js-pickup-store-input",function(e){e.preventDefault(),$("#colorbox .js-pickup-tabs li.first a").click();var storeData=(storeData=$("#colorbox .js-pickup-component").data("data")).data,storeId=$(this).data("id"),$ele=$("#colorbox .display-details");$.each(storeData[storeId],function(key,value){var $oele;"url"==key?($ele.find(".js-store-image").empty(),""!=value&&$ele.find(".js-store-image").append($("<img>").attr("src",value).attr("alt",""))):"productcode"==key?$ele.find(".js-store-productcode").val(value):"openings"==key?(($oele=$ele.find(".js-store-"+key)).empty(),""!=value&&$.each(value,function(key2,value2){$oele.append($("<dt>").text(key2)),$oele.append($("<dd>").text(value2))})):"specialOpenings"==key||(""!=value?$ele.find(".js-store-"+key).text(value):$ele.find(".js-store-"+key).empty())}),$(document).one("click","#colorbox .js-pickup-map-tab",function(){ACC.pickupinstore.storeId=storeData[storeId],ACC.global.addGoogleMapsApi("ACC.pickupinstore.drawMap")});var input,e=$("#colorbox .pickup-store-list-entry input:checked");$("#add_to_cart_storepickup_form .js-store-id").attr("id",e.attr("id")),$("#add_to_cart_storepickup_form .js-store-id").attr("name",e.attr("name")),$("#add_to_cart_storepickup_form .js-store-id").val(e.val()),0<storeData[storeId].stockLevel||""==storeData[storeId].stockLevel?((input=$("#add_to_cart_storepickup_form .js-qty-selector-input")).data("max",storeData[storeId].stockLevel),ACC.productDetail.checkQtySelector(input,"reset"),$("#add_to_cart_storepickup_form").show()):$("#add_to_cart_storepickup_form").hide()}),$(document).on("click",".js-select-store-label",function(e){$("#colorbox .js-pickup-component").addClass("show-store"),$("#colorbox #cboxTitle .headline-inner").addClass("hidden-xs hidden-sm"),$("#colorbox #cboxTitle .back-to-storelist").removeClass("hidden-xs hidden-sm")}),$(document).on("click",".js-back-to-storelist",function(e){$("#colorbox .js-pickup-component").removeClass("show-store"),$("#colorbox #cboxTitle .headline-inner").removeClass("hidden-xs hidden-sm"),$("#colorbox #cboxTitle .back-to-storelist").addClass("hidden-xs hidden-sm")})},bindPickupButton:function(){$(document).on("click",".js-pickup-button",function(e){e.preventDefault(),$e=$(this).parent().nextAll(".js-inline-layer"),$e.addClass("open");var h=$e.height();$e.removeClass("open"),$e.animate({height:h})})},bindPickupClose:function(){$(document).on("click",".js-close-inline-layer",function(e){e.preventDefault(),$e=$(this).parents(".js-inline-layer"),$e.animate({height:0})})},checkIfPointOfServiceIsEmpty:function(cartEntryDeliveryModeForm){return!cartEntryDeliveryModeForm.find(".pointOfServiceName").text().trim().length},validatePickupinStoreCartEntires:function(){var validationErrors=!1;return $("form.cartEntryShippingModeForm").each(function(){var formid="#"+$(this).attr("id");$(formid+" input[value=pickUp][checked]").length&&ACC.pickupinstore.checkIfPointOfServiceIsEmpty($(this))&&($(this).addClass("shipError"),validationErrors=!0)}),validationErrors&&($("div#noStoreSelected").show().focus(),$(window).scrollTop(0)),validationErrors},drawMap:function(){var centerPoint,mapOptions,map,marker,infowindow;storeInformation=ACC.pickupinstore.storeId,0<$("#colorbox .js-map-canvas").length&&($("#colorbox .js-map-canvas").attr("id","pickup-map"),centerPoint=new google.maps.LatLng(storeInformation.storeLatitude,storeInformation.storeLongitude),mapOptions={zoom:13,zoomControl:!0,panControl:!0,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,center:centerPoint},map=new google.maps.Map(document.getElementById("pickup-map"),mapOptions),marker=new google.maps.Marker({position:new google.maps.LatLng(storeInformation.storeLatitude,storeInformation.storeLongitude),map:map,title:storeInformation.name,icon:"https://maps.google.com/mapfiles/markerA.png"}),infowindow=new google.maps.InfoWindow({content:ACC.common.encodeHtml(storeInformation.name),disableAutoPan:!0}),google.maps.event.addListener(marker,"click",function(){infowindow.open(map,marker)}))}},ACC.product={_autoload:["bindToAddToCartForm","enableStorePickupButton","enableVariantSelectors","bindFacets"],bindFacets:function(){$(document).on("click",".js-show-facets",function(e){e.preventDefault();var selectRefinementsTitle=$(this).data("selectRefinementsTitle"),colorBoxTitleHtml=ACC.common.encodeHtml(selectRefinementsTitle);ACC.colorbox.open(colorBoxTitleHtml,{href:".js-product-facet",inline:!0,width:"480px",onComplete:function(){$(document).on("click",".js-product-facet .js-facet-name",function(e){e.preventDefault(),$(".js-product-facet  .js-facet").removeClass("active"),$(this).parents(".js-facet").addClass("active"),$.colorbox.resize()})},onClosed:function(){$(document).off("click",".js-product-facet .js-facet-name")}})}),enquire.register("screen and (min-width:"+screenSmMax+")",function(){$("#cboxClose").click()})},enableAddToCartButton:function(){$(".js-enable-btn").each(function(){$(this).hasClass("outOfStock")||$(this).hasClass("out-of-stock")||$(this).prop("disabled",!1)})},enableVariantSelectors:function(){$(".variant-select").prop("disabled",!1)},bindToAddToCartForm:function(){$(".add_to_cart_form").ajaxForm({beforeSubmit:ACC.product.showRequest,success:ACC.product.displayAddToCartPopup}),setTimeout(function(){$ajaxCallEvent=!0},2e3)},showRequest:function(arr,$form,options){return!!$ajaxCallEvent&&!($ajaxCallEvent=!1)},bindToAddToCartStorePickUpForm:function(){$("#colorbox #add_to_cart_storepickup_form").ajaxForm({success:ACC.product.displayAddToCartPopup})},enableStorePickupButton:function(){$(".js-pickup-in-store-button").prop("disabled",!1)},displayAddToCartPopup:function(cartResult,statusText,xhr,formElement){$ajaxCallEvent=!0,$("#addToCartLayer").remove(),"function"==typeof ACC.minicart.updateMiniCartDisplay&&ACC.minicart.updateMiniCartDisplay();var titleHeader=$("#addToCartTitle").html();ACC.colorbox.open(titleHeader,{html:cartResult.addToCartLayer,width:"460px"});var productCode=$("[name=productCodePost]",formElement).val(),quantityField=$("[name=qty]",formElement).val(),quantity=1;null!=quantityField&&(quantity=quantityField);var cartAnalyticsData=cartResult.cartAnalyticsData,cartData={cartCode:cartAnalyticsData.cartCode,productCode:productCode,quantity:quantity,productPrice:cartAnalyticsData.productPostPrice,productName:cartAnalyticsData.productName};ACC.track.trackAddToCart(productCode,quantity,cartData)}},$(document).ready(function(){$ajaxCallEvent=!0,ACC.product.enableAddToCartButton()}),ACC.productDetail={_autoload:["initPageEvents","bindVariantOptions"],checkQtySelector:function(self,mode){var $qtySelector=$(document).find(self).parents(".js-qty-selector"),input=$qtySelector.find(".js-qty-selector-input"),inputVal=parseInt(input.val()),max=input.data("max"),minusBtn=$qtySelector.find(".js-qty-selector-minus"),plusBtn=$qtySelector.find(".js-qty-selector-plus");$qtySelector.find(".btn").removeAttr("disabled"),"minus"==mode?1!=inputVal?(ACC.productDetail.updateQtyValue(self,inputVal-1),inputVal-1==1&&minusBtn.attr("disabled","disabled")):minusBtn.attr("disabled","disabled"):"reset"==mode?ACC.productDetail.updateQtyValue(self,1):"plus"==mode?"FORCE_IN_STOCK"==max?ACC.productDetail.updateQtyValue(self,inputVal+1):inputVal<=max?(ACC.productDetail.updateQtyValue(self,inputVal+1),inputVal+1==max&&plusBtn.attr("disabled","disabled")):plusBtn.attr("disabled","disabled"):"input"==mode?1==inputVal?minusBtn.attr("disabled","disabled"):"FORCE_IN_STOCK"==max&&0<inputVal?ACC.productDetail.updateQtyValue(self,inputVal):inputVal==max?plusBtn.attr("disabled","disabled"):inputVal<1?(ACC.productDetail.updateQtyValue(self,1),minusBtn.attr("disabled","disabled")):max<inputVal&&(ACC.productDetail.updateQtyValue(self,max),plusBtn.attr("disabled","disabled")):"focusout"==mode&&(isNaN(inputVal)?(ACC.productDetail.updateQtyValue(self,1),minusBtn.attr("disabled","disabled")):max<=inputVal&&plusBtn.attr("disabled","disabled"))},updateQtyValue:function(self,value){var input=$(document).find(self).parents(".js-qty-selector").find(".js-qty-selector-input"),addtocartQty=$(document).find(self).parents(".addtocart-component").find("#addToCartForm").find(".js-qty-selector-input"),configureQty=$(document).find(self).parents(".addtocart-component").find("#configureForm").find(".js-qty-selector-input");input.val(value),addtocartQty.val(value),configureQty.val(value)},initPageEvents:function(){function changeOnVariantOptionSelection(optionSelected){window.location.href=optionSelected.attr("value")}$(document).on("click",".js-qty-selector .js-qty-selector-minus",function(){ACC.productDetail.checkQtySelector(this,"minus")}),$(document).on("click",".js-qty-selector .js-qty-selector-plus",function(){ACC.productDetail.checkQtySelector(this,"plus")}),$(document).on("keydown",".js-qty-selector .js-qty-selector-input",function(e){" "!=$(this).val()&&(48<=e.which&&e.which<=57||96<=e.which&&e.which<=105)||8==e.which||46==e.which||37==e.which||39==e.which||9==e.which||(38==e.which?ACC.productDetail.checkQtySelector(this,"plus"):40==e.which?ACC.productDetail.checkQtySelector(this,"minus"):e.preventDefault())}),$(document).on("keyup",".js-qty-selector .js-qty-selector-input",function(e){ACC.productDetail.checkQtySelector(this,"input"),ACC.productDetail.updateQtyValue(this,$(this).val())}),$(document).on("focusout",".js-qty-selector .js-qty-selector-input",function(e){ACC.productDetail.checkQtySelector(this,"focusout"),ACC.productDetail.updateQtyValue(this,$(this).val())}),$("#Size").change(function(){changeOnVariantOptionSelection($("#Size option:selected"))}),$("#variant").change(function(){changeOnVariantOptionSelection($("#variant option:selected"))}),$(".selectPriority").change(function(){window.location.href=$(this[this.selectedIndex]).val()})},bindVariantOptions:function(){ACC.productDetail.bindCurrentStyle(),ACC.productDetail.bindCurrentSize(),ACC.productDetail.bindCurrentType()},bindCurrentStyle:function(){var currentStyle=$("#currentStyleValue").data("styleValue"),styleSpan=$(".styleName");null!=currentStyle&&styleSpan.text(": "+currentStyle)},bindCurrentSize:function(){var currentSize=$("#currentSizeValue").data("sizeValue"),sizeSpan=$(".sizeName");null!=currentSize&&sizeSpan.text(": "+currentSize)},bindCurrentType:function(){var currentSize=$("#currentTypeValue").data("typeValue"),sizeSpan=$(".typeName");null!=currentSize&&sizeSpan.text(": "+currentSize)}},ACC.quickview={_autoload:["bindToUiCarouselLink"],initQuickviewLightbox:function(){ACC.product.enableAddToCartButton(),ACC.product.bindToAddToCartForm(),ACC.product.enableStorePickupButton()},refreshScreenReaderBuffer:function(){$("#accesibility_refreshScreenReaderBufferField").attr("value",(new Date).getTime())},bindToUiCarouselLink:function(){var titleHeaderHtml=$("#quickViewTitle").html();$(".js-owl-carousel-reference .js-reference-item").colorbox({close:'<span class="glyphicon glyphicon-remove"></span>',title:titleHeaderHtml,maxWidth:"100%",onComplete:function(){ACC.quickview.refreshScreenReaderBuffer(),ACC.quickview.initQuickviewLightbox(),ACC.ratingstars.bindRatingStars($(".quick-view-stars"))},onClosed:function(){ACC.quickview.refreshScreenReaderBuffer()}})}},ACC.ratingstars={_autoload:[["bindRatingStars",0<$(".js-ratingCalc").length],["bindRatingStarsSet",0<$(".js-ratingCalcSet").length]],bindRatingStars:function(){$(".js-ratingCalc").each(function(){var rating=$(this).data("rating");$(this).find(".js-greenStars").width($(this).width()*(parseFloat(rating.rating,10)/rating.total))})},bindRatingStarsSet:function(){$(".js-writeReviewStars").on({mouseleave:function(){clearReviewState();var sV=2*parseFloat($(".js-ratingSetInput").val(),10);"number"!=typeof sV||isNaN(sV)?clearReviewState():setReviewState(sV)}});var ratingIcons=$(".js-writeReviewStars .js-ratingIcon"),setReviewState=function(index){ratingIcons.slice(0,parseFloat(index,10)).addClass("active")},clearReviewState=function(){ratingIcons.removeClass("active")};ratingIcons.on({mouseenter:function(){clearReviewState(),setReviewState($(this).index()+1)},mouseleave:function(){$(this).removeClass("active")},click:function(){$(".js-ratingSetInput").val(($(this).index()+1)/2)}})}},ACC.refinements={_autoload:[["bindMoreLessToggles",0!==$(".js-facet-form").length],["bindMoreStoresToggles",0!==$(".js-facet-form").length],["init",0!==$(".js-facet-form").length],["bindSearch",0!==$(".js-facet-form").length]],coords:{},storeSearchData:{},init:function(){navigator.geolocation.getCurrentPosition(function(position){ACC.refinements.coords=position.coords},function(error){console.log("An error occurred... The error code and message are: "+error.code+"/"+error.message)})},bindSearch:function(){$(document).on("submit","#user_location_form",function(e){e.preventDefault();var q=$(".js-shop-stores-facet .js-shop-store-search-input").val();0<q.length&&ACC.refinements.getInitStoreData(q)}),$(document).on("click","#findStoresNearMeAjax",function(e){e.preventDefault(),ACC.refinements.getInitStoreData(null,ACC.refinements.coords.latitude,ACC.refinements.coords.longitude)})},getInitStoreData:function(q,latitude,longitude){$(".alert").remove(),data={q:"",page:"0"},null!=q&&(data.q=q),null!=latitude&&(data.latitude=latitude),null!=longitude&&(data.longitude=longitude),ACC.refinements.storeSearchData=data,ACC.refinements.getStoreData()},getStoreData:function(){url=$(".js-facet-form").data("url"),$.ajax({url:url,data:ACC.refinements.storeSearchData,type:"get",dataType:"text",success:function(response){window.location.reload()}})},bindMoreLessToggles:function(){$(document).on("click",".js-shop-stores-facet .js-facet-change-link",function(e){e.preventDefault(),$(".js-shop-stores-facet .js-facet-container").hide(),$(".js-shop-stores-facet .js-facet-form").show()}),$(document).on("change",".js-product-facet .js-facet-checkbox",function(){$(this).parents("form").submit()}),$(document).on("click",".js-product-facet .js-more-facet-values-link",function(e){e.preventDefault(),$(this).parents(".js-facet").find(".js-facet-top-values").hide(),$(this).parents(".js-facet").find(".js-facet-list-hidden").show(),$(this).parents(".js-facet").find(".js-more-facet-values").hide(),$(this).parents(".js-facet").find(".js-less-facet-values").show()}),$(document).on("click",".js-product-facet .js-less-facet-values-link",function(e){e.preventDefault(),$(this).parents(".js-facet").find(".js-facet-top-values").show(),$(this).parents(".js-facet").find(".js-facet-list-hidden").hide(),$(this).parents(".js-facet").find(".js-more-facet-values").show(),$(this).parents(".js-facet").find(".js-less-facet-values").hide()})},bindMoreStoresToggles:function(){$(document).on("click",".js-shop-stores-facet .js-more-stores-facet-values",function(e){e.preventDefault(),$(".js-shop-stores-facet ul.js-facet-list li.hidden").slice(0,5).removeClass("hidden").first().find(".js-facet-checkbox").focus(),0===$(".js-shop-stores-facet ul.js-facet-list li.hidden").length&&$(".js-shop-stores-facet .js-more-stores-facet-values").hide()})}},DOMPurify.addHook("uponSanitizeAttribute",function(node,event){"em"===node.nodeName.toLowerCase()&&"class"===event.attrName.toLowerCase()||node.removeAttribute(event.attrName)}),ACC.sanitizer={config:{ALLOWED_TAGS:["pre","address","em","hr","p","div","h1","h2","h3","h4","h5","h6","ul","ol","li","blockquote","b","i","s","o","sup","sub","ins","del","strong","strike","tt","code","big","small","br","span"]},sanitize:function(dirty){return DOMPurify.sanitize(dirty,ACC.sanitizer.config)}},ACC.silentorderpost={spinner:$("<img>").attr("src",ACC.config.commonResourcePath+"/images/spinner.gif"),bindUseDeliveryAddress:function(){var options;$("#useDeliveryAddress").on("change",function(){var options;$("#useDeliveryAddress").is(":checked")?(options={countryIsoCode:$("#useDeliveryAddressData").data("countryisocode"),useDeliveryAddress:!0},ACC.silentorderpost.enableAddressForm(),ACC.silentorderpost.displayCreditCardAddressForm(options,ACC.silentorderpost.useDeliveryAddressSelected),ACC.silentorderpost.disableAddressForm()):(ACC.silentorderpost.clearAddressForm(),ACC.silentorderpost.enableAddressForm())}),$("#useDeliveryAddress").is(":checked")&&(options={countryIsoCode:$("#useDeliveryAddressData").data("countryisocode"),useDeliveryAddress:!0},ACC.silentorderpost.enableAddressForm(),ACC.silentorderpost.displayCreditCardAddressForm(options,ACC.silentorderpost.useDeliveryAddressSelected),ACC.silentorderpost.disableAddressForm())},bindSubmitSilentOrderPostForm:function(){$(".submit_silentOrderPostForm").click(function(){ACC.common.blockFormAndShowProcessingMessage($(this)),$(".billingAddressForm").filter(":hidden").remove(),ACC.silentorderpost.enableAddressForm(),$("#silentOrderPostForm").submit()})},bindCycleFocusEvent:function(){$("#lastInTheForm").blur(function(){$('#silentOrderPostForm [tabindex$="10"]').focus()})},isEmpty:function(obj){return null==obj||""===obj},disableAddressForm:function(){$('input[id^="address\\."]').prop("disabled",!0),$('select[id^="address\\."]').prop("disabled",!0)},enableAddressForm:function(){$('input[id^="address\\."]').prop("disabled",!1),$('select[id^="address\\."]').prop("disabled",!1)},clearAddressForm:function(){$('input[id^="address\\."]').val(""),$('select[id^="address\\."]').val("")},useDeliveryAddressSelected:function(){var countryIsoCode;$("#useDeliveryAddress").is(":checked")?(countryIsoCode=$("#address\\.country").val($("#useDeliveryAddressData").data("countryisocode")).val(),ACC.silentorderpost.isEmpty(countryIsoCode)?($("#useDeliveryAddress").click(),$("#useDeliveryAddress").parent().hide()):ACC.silentorderpost.disableAddressForm()):(ACC.silentorderpost.clearAddressForm(),ACC.silentorderpost.enableAddressForm())},bindCreditCardAddressForm:function(){$("#billingCountrySelector :input").on("change",function(){var options={countryIsoCode:$(this).val(),useDeliveryAddress:!1};ACC.silentorderpost.displayCreditCardAddressForm(options)})},displayCreditCardAddressForm:function(options,callback){$.ajax({url:ACC.config.encodedContextPath+"/checkout/multi/sop/billingaddressform",async:!0,data:options,dataType:"html",beforeSend:function(){$("#billingAddressForm").html(ACC.silentorderpost.spinner)}}).done(function(data){$("#billingAddressForm").html(data),"function"==typeof callback&&callback.call()})}},$(document).ready(function(){ACC.silentorderpost.bindUseDeliveryAddress(),ACC.silentorderpost.bindSubmitSilentOrderPostForm(),ACC.silentorderpost.bindCreditCardAddressForm(),$("#useDeliveryAddress").click()}),ACC.tabs={_autoload:[["bindTabs",0<$(".js-tabs").length],"hideReviewBtn","determineToDisplayReviews"],bindTabs:function(){$e=$(".js-tabs");var tabs=$e.accessibleTabs({tabhead:".tabhead",tabbody:".tabbody",fx:"show",fxspeed:0,currentClass:"active",autoAnchor:!0});$e.on("click",".tabhead",function(e){var offset;e.preventDefault(),$(this).hasClass("active")?$(this).removeClass("active"):($(this).parents(".js-tabs").children(".tabs-list").find("a[href='#"+$(this).attr("id")+"']").click(),offset=$(this).offset().top,$("body,html").scrollTop(offset))}),$e.on("click","#tabreview",function(e){e.preventDefault(),ACC.track.trackShowReviewClick(),ACC.tabs.showReviewsAction("reviews")}),$e.on("click",".all-reviews-btn",function(e){e.preventDefault(),ACC.tabs.showReviewsAction("allreviews"),ACC.tabs.hideReviewBtn(".all-reviews-btn"),ACC.tabs.showReviewBtn(".less-reviews-btn")}),$e.on("click",".less-reviews-btn",function(e){e.preventDefault(),ACC.tabs.showReviewsAction("reviews"),ACC.tabs.hideReviewBtn(".less-reviews-btn"),ACC.tabs.showReviewBtn(".all-reviews-btn")}),$(document).on("click",".js-writeReviewTab",function(e){e.preventDefault(),tabs.showAccessibleTabSelector($(this).attr("href")),$(".js-review-write").show(),$("#reviewForm input[name=headline]").focus()}),$(document).on("click",".js-review-write-toggle",function(e){e.preventDefault(),$(".js-review-write:visible").length<1?$(".js-review-write").show():$(".js-review-write").hide()}),$(document).on("click",".js-openTab",function(){tabs.showAccessibleTabSelector($(this).attr("href"))})},showReviewsAction:function(s){$.get($("#reviews").data(s),void 0,function(result){$("#reviews").html(ACC.sanitizer.sanitize(result)),0<$(".js-ratingCalc").length&&(ACC.ratingstars.bindRatingStars(),ACC.tabs.showingAllReviews())},"html")},hideReviewBtn:function(btnClass){btnClass=void 0===btnClass?".less-reviews-btn":btnClass,$(btnClass).hide()},showReviewBtn:function(btnClass){$(btnClass).show()},showingAllReviews:function(){$("#showingAllReviews").data("showingallreviews")&&ACC.tabs.hideReviewBtn(".all-reviews-btn")},determineToDisplayReviews:function(){"#tabreview"===location.hash&&ACC.tabs.showReviewsAction("reviews")}},ACC.termsandconditions={bindTermsAndConditionsLink:function(){$(document).on("click",".termsAndConditionsLink",function(e){e.preventDefault(),$.colorbox({maxWidth:"100%",maxHeight:"80%",width:"870px",scrolling:!0,href:$(this).attr("href"),close:'<span class="glyphicon glyphicon-remove"></span>',title:'<div class="headline"><span class="headline-text">Terms and Conditions</span></div>',onComplete:function(){ACC.common.refreshScreenReaderBuffer()},onClosed:function(){ACC.common.refreshScreenReaderBuffer()}})})},handleRegisterChkTermsConditionsChange:function(){$("#registerChkTermsConditions").change(function(e){e.preventDefault();var btnSubmit=$(this).parents("form:first").find(":submit");$(this).is(":checked")?btnSubmit.prop("disabled",!1):btnSubmit.prop("disabled",!0)})}},$(function(){ACC.termsandconditions.bindTermsAndConditionsLink(),ACC.termsandconditions.handleRegisterChkTermsConditionsChange(),$("#registerChkTermsConditions").removeAttr("disabled"),$('[name="consentForm.consentGiven"]').removeAttr("disabled")}),ACC.track={trackAddToCart:function(productCode,quantity,cartData){window.mediator.publish("trackAddToCart",{productCode:productCode,quantity:quantity,cartData:cartData})},trackRemoveFromCart:function(productCode,initialCartQuantity){window.mediator.publish("trackRemoveFromCart",{productCode:productCode,initialCartQuantity:initialCartQuantity})},trackUpdateCart:function(productCode,initialCartQuantity,newCartQuantity){window.mediator.publish("trackUpdateCart",{productCode:productCode,initialCartQuantity:initialCartQuantity,newCartQuantity:newCartQuantity})},trackShowReviewClick:function(productCode){window.mediator.publish("trackShowReviewClick",{})}},ACC.storefinder={_autoload:[["init",0!=$(".js-store-finder").length],["bindStoreChange",0!=$(".js-store-finder").length],["bindSearch",0!=$(".js-store-finder").length],"bindPagination"],storeData:"",storeId:"",coords:{},storeSearchData:{},createListItemHtml:function(data,id){var $rdioEl=$("<input>").addClass("js-store-finder-input").attr("type","radio").attr("name","storeNamePost").attr("id","store-filder-entry-"+id).attr("data-id",id).val(data.displayName),$spanInfo=$("<span>").addClass("entry__info").append($("<span>").addClass("entry__name").text(data.displayName)).append($("<span>").addClass("entry__address").text(data.line1+" "+data.line2)).append($("<span>").addClass("entry__city").text(data.town)),$spanDistance=$("<span>").addClass("entry__distance").append($("<span>").text(data.formattedDistance)),$label=$("<label>").addClass("js-select-store-label").attr("for","store-filder-entry-"+id).append($spanInfo).append($spanDistance);return $("<li>").addClass("list__entry").append($rdioEl).append($label)},refreshNavigation:function(){data=ACC.storefinder.storeData;var $storeList=$(".js-store-finder-navigation-list");if($storeList.empty(),data){for(i=0;i<data.data.length;i++)$storeList.append(ACC.storefinder.createListItemHtml(data.data[i],i));var firstInput=$(".js-store-finder-input")[0];$(firstInput).click()}var page=ACC.storefinder.storeSearchData.page;$(".js-store-finder-pager-item-from").text(10*page+1);var to=10*page+10>ACC.storefinder.storeData.total?ACC.storefinder.storeData.total:10*page+10;$(".js-store-finder-pager-item-to").text(to),$(".js-store-finder-pager-item-all").text(ACC.storefinder.storeData.total),$(".js-store-finder").removeClass("show-store")},bindPagination:function(){function checkStatus(page){0==page?$(".js-store-finder-pager-prev").attr("disabled","disabled"):$(".js-store-finder-pager-prev").removeAttr("disabled"),page==Math.floor(ACC.storefinder.storeData.total/10)?$(".js-store-finder-pager-next").attr("disabled","disabled"):$(".js-store-finder-pager-next").removeAttr("disabled")}$(document).on("click",".js-store-finder-details-back",function(e){e.preventDefault(),$(".js-store-finder").removeClass("show-store")}),$(document).on("click",".js-store-finder-pager-prev",function(e){e.preventDefault();var page=ACC.storefinder.storeSearchData.page;ACC.storefinder.getStoreData(page-1),checkStatus(page-1)}),$(document).on("click",".js-store-finder-pager-next",function(e){e.preventDefault();var page=ACC.storefinder.storeSearchData.page;ACC.storefinder.getStoreData(page+1),checkStatus(page+1)})},bindStoreChange:function(){$(document).on("change",".js-store-finder-input",function(e){e.preventDefault(),storeData=ACC.storefinder.storeData.data;var storeId=$(this).data("id"),$ele=$(".js-store-finder-details");$.each(storeData[storeId],function(key,value){var $oele,$features;"image"==key?($ele.find(".js-store-image").empty(),""!=value&&$ele.find(".js-store-image").append($("<img>").attr("src",value).attr("alt",""))):"productcode"==key?$ele.find(".js-store-productcode").val(value):"openings"==key?(($oele=$ele.find(".js-store-"+key)).empty(),""!=value&&$.each(value,function(key2,value2){$oele.append($("<dt>").text(key2)),$oele.append($("<dd>").text(value2))})):"specialOpenings"==key||("features"==key?(($features=$ele.find(".js-store-"+key)).empty(),$.each(value,function(key2,value2){$features.append($("<li>").text(value2))})):""!=value?$ele.find(".js-store-"+key).text(value):$ele.find(".js-store-"+key).empty())}),ACC.storefinder.storeId=storeData[storeId],ACC.storefinder.initGoogleMap()}),$(document).on("click",".js-select-store-label",function(e){$(".js-store-finder").addClass("show-store")}),$(document).on("click",".js-back-to-storelist",function(e){$(".js-store-finder").removeClass("show-store")})},initGoogleMap:function(){0<$(".js-store-finder-map").length&&ACC.global.addGoogleMapsApi("ACC.storefinder.loadGoogleMap")},loadGoogleMap:function(){var centerPoint,mapOptions,map,marker,infowindow;storeInformation=ACC.storefinder.storeId,0<$(".js-store-finder-map").length&&($(".js-store-finder-map").attr("id","store-finder-map"),centerPoint=new google.maps.LatLng(storeInformation.latitude,storeInformation.longitude),mapOptions={zoom:13,zoomControl:!0,panControl:!0,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,center:centerPoint},map=new google.maps.Map(document.getElementById("store-finder-map"),mapOptions),marker=new google.maps.Marker({position:new google.maps.LatLng(storeInformation.latitude,storeInformation.longitude),map:map,title:storeInformation.name,icon:"https://maps.google.com/mapfiles/markerA.png"}),infowindow=new google.maps.InfoWindow({content:ACC.common.encodeHtml(storeInformation.name),disableAutoPan:!0}),google.maps.event.addListener(marker,"click",function(){infowindow.open(map,marker)}))},bindSearch:function(){$(document).on("submit","#storeFinderForm",function(e){e.preventDefault();var emptySearchMessage,q=$(".js-store-finder-search-input").val();0<q.length?ACC.storefinder.getInitStoreData(q):$(".js-storefinder-alert").length<1&&(emptySearchMessage=$(".btn-primary").data("searchEmpty"),$(".js-store-finder").hide(),$("#storeFinder").before($("<div>").addClass("js-storefinder-alert alert alert-danger alert-dismissable getAccAlert").append($("<button>").addClass("close closeAccAlert").attr("type","button").attr("data-dismiss","alert").attr("aria-hidden","true").text("x")).text(emptySearchMessage)),$(".closeAccAlert").on("click",function(){$(this).parent(".getAccAlert").remove()}))}),$(".js-store-finder").hide(),$(document).on("click","#findStoresNearMe",function(e){e.preventDefault(),ACC.storefinder.getInitStoreData(null,ACC.storefinder.coords.latitude,ACC.storefinder.coords.longitude)})},getStoreData:function(page){ACC.storefinder.storeSearchData.page=page,url=$(".js-store-finder").data("url"),$.ajax({url:url,data:ACC.storefinder.storeSearchData,type:"get",dataType:"json",success:function(response){ACC.storefinder.storeData=response,ACC.storefinder.refreshNavigation(),ACC.storefinder.storeData.total<10&&$(".js-store-finder-pager-next").attr("disabled","disabled")}})},getInitStoreData:function(q,latitude,longitude){$(".alert").remove(),data={q:"",page:0},null!=q&&(data.q=q),null!=latitude&&(data.latitude=latitude),null!=longitude&&(data.longitude=longitude),ACC.storefinder.storeSearchData=data,ACC.storefinder.getStoreData(data.page),$(".js-store-finder").show(),$(".js-store-finder-pager-prev").attr("disabled","disabled"),$(".js-store-finder-pager-next").removeAttr("disabled")},init:function(){$("#findStoresNearMe").attr("disabled","disabled"),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(position){ACC.storefinder.coords=position.coords,$("#findStoresNearMe").removeAttr("disabled")},function(error){console.log("An error occurred... The error code and message are: "+error.code+"/"+error.message)})}},ACC.futurelink={_autoload:["bindFutureStockLink"],bindFutureStockLink:function(){$(document).on("click",".futureStockLink",function(e){e.preventDefault();var url=$(this).attr("href"),title=$(this).attr("title");ACC.colorbox.open(ACC.common.encodeHtml(title),{href:url,maxWidth:"100%",width:"320px",height:"320px",initialWidth:"320px"})})}},ACC.productorderform={_autoload:["headerActions","coreTableActions","addToCartOrderGridForm"],$addToCartOrderForm:$("#AddToCartOrderForm"),$addToCartBtn:$("#addToCartBtn"),$omsErrorMessageContainer:$("#globalMessages"),$emptySkuQuantityInputs:$(".sku-quantity[value]"),$nonEmptySkuQuantityInputs:$(".sku-quantity[value]"),$totalGridValues:$("[data-grid-total-id]"),$futureTooltipTemplate:$("#future-stock-template"),$futureTooltipErrorTemplate:$("#future-tooltip-error-template"),$omsErrorMessageTemplate:$("#oms-error-message-template"),$variantSummaryTemplate:$("#variant-summary"),selectedVariantData:"selected-variant",selectedVariants:[],quantityTotal:0,scrollTopPos:0,headerActions:function(){ACC.productorderform.bindProductDetailToggle($(".product-details-toggle"))},coreTableActions:function(){ACC.productorderform.coreTableScrollActions(ACC.productorderform.$addToCartOrderForm),ACC.productorderform.bindUpdateFutureStockButton(".update_future_stock_button"),ACC.productorderform.bindHideFutureStockInfo(".hide_future_stock_info"),ACC.productorderform.bindVariantSelect($(".variant-select-btn"),"AddToCartOrderForm"),ACC.productorderform.cancelVariantModal(".closeVariantModal"),ACC.productorderform.checkLimitExceed(".sku-quantity");var quantityBefore=0,quantityAfter=0;ACC.productorderform.$addToCartOrderForm.on("click",".sku-quantity",function(event){$(this).select()}),ACC.productorderform.$addToCartOrderForm.on("focusin",".sku-quantity",function(event){quantityBefore=jQuery.trim(this.value),$(this).parents("tr").next(".variant-summary").remove(),$(this).parents("table").data(ACC.productorderform.selectedVariantData)?ACC.productorderform.selectedVariants=$(this).parents("table").data(ACC.productorderform.selectedVariantData):ACC.productorderform.selectedVariants=[],""==quantityBefore&&(quantityBefore=0,this.value=0)}),$(document).find(".sku-quantity").on("blur keypress",function(event){var currentIndex,currentPrice,$currentTotalItems,currentTotalItemsValue,currentTotalPrice,$gridGroup,$closestQuantityValue,$closestAvgPriceValue,$closestSubtotalValue,currentQuantityValue,currentSubtotalValue,totalPrice,gridLevelTotalPrice,$gridTotalValue,code=event.keyCode||event.which||event.charCode;13!=code&&null!=code||(currentIndex=parseInt($(this).attr("id").match("[0-9]+")),totalPrice=0,currentPrice=$(document).find("input[id='productPrice["+currentIndex+"]']").val(),this.value=ACC.productorderform.filterSkuEntry(this.value),currentTotalItemsValue=($currentTotalItems=$(".js-total-items-count")).html(),currentTotalPrice=$(".js-total-price-value").val(),$gridGroup=$(this).parents(".orderForm_grid_group"),isNaN(jQuery.trim(this.value))&&(this.value=0),""==(quantityAfter=jQuery.trim(this.value))&&(quantityAfter=0,this.value=0),ACC.orderform?(void 0!==sessionStorage.totalItems&&void 0!==sessionStorage.totalPriceVal&&(currentTotalItemsValue=sessionStorage.totalItems,currentTotalPrice=sessionStorage.totalPriceVal),totalPrice=0==quantityBefore?($currentTotalItems.html(parseInt(currentTotalItemsValue)+parseInt(quantityAfter)),parseFloat(currentTotalPrice)+parseFloat(currentPrice)*parseInt(quantityAfter)):($currentTotalItems.html(parseInt(currentTotalItemsValue)+(parseInt(quantityAfter)-parseInt(quantityBefore))),parseFloat(currentTotalPrice)+parseFloat(currentPrice)*(parseInt(quantityAfter)-parseInt(quantityBefore))),sessionStorage.totalPrice=ACC.productorderform.formatTotalsCurrency(totalPrice),sessionStorage.totalItems=$currentTotalItems.html(),sessionStorage.totalPriceVal=totalPrice,ACC.orderform.addToSkuQtyInput(this)):$gridGroup&&0<$gridGroup.length&&($closestQuantityValue=$gridGroup.find("#quantityValue"),$closestAvgPriceValue=$gridGroup.find("#avgPriceValue"),$closestSubtotalValue=$gridGroup.find("#subtotalValue"),currentQuantityValue=$closestQuantityValue.val(),currentSubtotalValue=$closestSubtotalValue.val(),totalPrice=0==quantityBefore?($closestQuantityValue.val(parseInt(currentQuantityValue)+parseInt(quantityAfter)),$closestSubtotalValue.val(parseFloat(currentSubtotalValue)+parseFloat(currentPrice)*parseInt(quantityAfter)),$currentTotalItems.html(parseInt(currentTotalItemsValue)+parseInt(quantityAfter)),parseFloat(currentTotalPrice)+parseFloat(currentPrice)*parseInt(quantityAfter)):($closestQuantityValue.val(parseInt(currentQuantityValue)+(parseInt(quantityAfter)-parseInt(quantityBefore))),$closestSubtotalValue.val(parseFloat(currentSubtotalValue)+parseFloat(currentPrice)*(parseInt(quantityAfter)-parseInt(quantityBefore))),$currentTotalItems.html(parseInt(currentTotalItemsValue)+(parseInt(quantityAfter)-parseInt(quantityBefore))),parseFloat(currentTotalPrice)+parseFloat(currentPrice)*(parseInt(quantityAfter)-parseInt(quantityBefore))),ACC.productorderform.enableBeforeUnloadEvent(quantityAfter,$currentTotalItems.text()),0!=$currentTotalItems.length&&0==$currentTotalItems.text()?(ACC.productorderform.$addToCartBtn.attr("disabled","disabled"),$(window).off("beforeunload",ACC.productorderform.beforeUnloadHandler)):ACC.productorderform.$addToCartBtn.removeAttr("disabled"),0<parseInt($closestQuantityValue.val())?$closestAvgPriceValue.val(parseFloat($closestSubtotalValue.val())/parseInt($closestQuantityValue.val())):$closestAvgPriceValue.val(0)),$gridGroup&&0<$gridGroup.length&&(gridLevelTotalPrice="",$gridTotalValue=$gridGroup.find("[data-grid-total-id=total_value_"+currentIndex+"]"),0<quantityAfter&&(gridLevelTotalPrice=ACC.productorderform.formatTotalsCurrency(parseFloat(currentPrice)*parseInt(quantityAfter))),$gridTotalValue.html(gridLevelTotalPrice),ACC.productorderform.updateSelectedVariantGridTotal(this,quantityBefore,!1,!1)),$(".js-total-price").html(ACC.productorderform.formatTotalsCurrency(totalPrice)),$(".js-total-price-value").val(totalPrice))}),$("body").on("focusin","#cboxContent .sku-quantity",function(){quantityBefore=jQuery.trim(this.value);var currentVariantId=$(this).data("variant-id"),currentBaseInput=$("#AddToCartOrderForm, #cartOrderGridForm").find("[data-variant-id='"+currentVariantId+"']");currentBaseInput.trigger("focusin"),currentBaseInput.parents("table").find(".variant-summary").remove(),currentBaseInput.parents("table").data(ACC.productorderform.selectedVariantData)?ACC.productorderform.selectedVariants=currentBaseInput.parents("table").data(ACC.productorderform.selectedVariantData):ACC.productorderform.selectedVariants=[],""==quantityBefore&&(quantityBefore=0,this.value=0)}),$("body").on("blur","#cboxContent .sku-quantity",function(){var priceSibling=$(this).siblings(".price"),totalSibling=$(this).siblings(".data-grid-total"),currentVariantId=$(this).data("variant-id"),currentBaseInput=$("#AddToCartOrderForm, #cartOrderGridForm").find("[data-variant-id='"+currentVariantId+"']");this.value=ACC.productorderform.filterSkuEntry(this.value),(isNaN(jQuery.trim(this.value))||this.value<0||""==this.value)&&(this.value=0),currentBaseInput.val(this.value),currentBaseInput.trigger("blur"),ACC.productorderform.updateVariantTotal(priceSibling,this.value,totalSibling),0<this.value&&this.value!=quantityBefore?(currentBaseInput.parents("table").addClass("selected"),currentBaseInput.trigger("change")):0===ACC.productorderform.selectedVariants.length&&currentBaseInput.parents("table").removeClass("selected")})},updateSelectedVariantGridTotal:function(_this,quantityBefore,isFillQty,resetSummary){var newVariant,priceSibling=$(_this).siblings(".price"),propSibling=$(_this).siblings(".variant-prop"),currentSkuId=$(_this).next(".td_stock").data("sku-id"),currentBaseTotal=$(_this).siblings(".data-grid-total");isFillQty&&(ACC.productorderform.selectedVariants=[]),_this.value!=quantityBefore&&(newVariant=!0,ACC.productorderform.selectedVariants.forEach(function(item,index){item.id===currentSkuId&&(newVariant=!1,"0"===_this.value||0===_this.value?ACC.productorderform.selectedVariants.splice(index,1):(ACC.productorderform.selectedVariants[index].quantity=_this.value,ACC.productorderform.selectedVariants[index].total=ACC.productorderform.updateVariantTotal(priceSibling,_this.value,currentBaseTotal)))}),newVariant&&0<_this.value&&ACC.productorderform.selectedVariants.push({id:currentSkuId,size:propSibling.data("variant-prop"),quantity:_this.value,total:ACC.productorderform.updateVariantTotal(priceSibling,_this.value,currentBaseTotal)})),resetSummary&&$(_this).parents("table").find(".variant-summary").remove(),ACC.productorderform.showSelectedVariant($(_this).parents("table")),0<_this.value&&_this.value!=quantityBefore?$(_this).parents("table").addClass("selected"):0===ACC.productorderform.selectedVariants.length&&$(_this).parents("table").removeClass("selected").find(".variant-summary").remove()},updateVariantTotal:function(priceSibling,quantity,totalElement){var variantTotal=parseFloat(priceSibling.data("variant-price"))*parseInt(quantity);return totalElement.html(ACC.productorderform.formatTotalsCurrency(variantTotal)),ACC.productorderform.formatTotalsCurrency(variantTotal)},bindUpdateFutureStockButton:function(updateFutureStockButton){$("body").on("click",updateFutureStockButton,function(event){event.preventDefault();var $gridContainer=$(this).parents(".orderForm_grid_group").find(".product-grid-container"),$skus=jQuery.map($gridContainer.find("input[type='hidden'].sku"),function(o){return o.value}),skusId=$(this).data("skusId"),futureStockUrl=$(this).data("skusFutureStockUrl"),postData={skus:$skus,productCode:skusId},hideFutureStockInfo=$(this).parent().find(".hide_future_stock_info"),showFutureStockLink=$(this);$.ajax({url:futureStockUrl,type:"POST",data:postData,traditional:!0,dataType:"json",success:function(data){ACC.productorderform.updateFuture($gridContainer,$skus,data,skusId,showFutureStockLink,hideFutureStockInfo)},error:function(xht,textStatus,ex){console.log("Failed to get delivery modes. Error details ["+xht+", "+textStatus+", "+ex+"]")}})})},bindHideFutureStockInfo:function(hideFutureStockInfoLink){$("body").on("click",hideFutureStockInfoLink,function(event){event.preventDefault();var gridContainer=$(this).parent().parent().find(".product-grid-container");$(this).parent().find(".update_future_stock_button").show(),$(this).hide(),gridContainer.find("[data-sku-id]").children(".future_stock, .out-of-stock").remove()})},updateFuture:function(gridContainer,skus,freshData,callerId,showFutureStockInfoLink,hideFutureStockInfo){var obj;ACC.productorderform.$omsErrorMessageContainer.find("div").remove(),null!==freshData&&void 0!==freshData["basket.page.viewFuture.unavailable"]?$.tmpl(ACC.productorderform.$omsErrorMessageTemplate,{errorMessage:freshData["basket.page.viewFuture.unavailable"]}).appendTo(ACC.productorderform.$omsErrorMessageContainer):(obj=freshData,Object.keys(obj).length<=0||(showFutureStockInfoLink.hide(),hideFutureStockInfo.css("display","block"),$.each(skus,function(index,skuId){var stocks=freshData[skuId],cell=gridContainer.find("[data-sku-id='"+skuId+"']"),isCurrentlyInStock=-1!=cell[0].attributes.class.nodeValue.indexOf("in-stock"),futureStockPresent=null!=stocks&&null!==stocks[0]&&void 0!==stocks[0];cell.children(".future_stock, .out-of-stock").remove(),futureStockPresent?(isCurrentlyInStock||cell.addClass("future-stock"),$.tmpl(ACC.productorderform.$futureTooltipTemplate,{formattedDate:stocks[0].formattedDate,availabilities:stocks}).appendTo(cell)):isCurrentlyInStock||(cell[0].attributes.class.nodeValue="td_stock out-of-stock")})))},toJSON:function(gridForm,skipZeroQuantity){for(var skus=gridForm.find("input.sku").map(function(index,element){return element.value}),skuQuantities=gridForm.find("input.sku-quantity").map(function(index,element){return parseInt(element.value)}),skusAsJSON=[],i=0;i<skus.length;i++)skipZeroQuantity&&0===skuQuantities[i]||skusAsJSON.push({product:{code:skus[i]},quantity:skuQuantities[i]});return JSON.stringify({cartEntries:skusAsJSON})},formatTotalsCurrency:function(amount){return Currency.formatMoney(Number(amount).toFixed(2),Currency.money_format[ACC.common.currentCurrency])},cleanValues:function(){var formattedTotal;0!==$(".orderForm_grid_group").length&&(formattedTotal=ACC.productorderform.formatTotalsCurrency("0.00"),$(".js-total-price").html(formattedTotal),$("#quantity, .js-total-items-count").html(0),$("#quantityValue, #avgPriceValue, #subtotalValue, .js-total-price-value").val(0),ACC.productorderform.$emptySkuQuantityInputs.val(0),ACC.productorderform.$totalGridValues.html(""))},calculateGrid:function(){ACC.productorderform.$nonEmptySkuQuantityInputs.trigger("focusout")},bindProductDetailToggle:function(productDetailToggle){productDetailToggle.on("click",function(event){event.preventDefault(),$(this).parents(".product-details").toggleClass("open")})},showSelectedVariant:function(currentVariant){$.tmpl(ACC.productorderform.$variantSummaryTemplate,{variants:ACC.productorderform.selectedVariants}).appendTo(currentVariant),$(".variant-summary .variant-property").text($(".variant-detail").data("variant-property")),currentVariant.data(ACC.productorderform.selectedVariantData,ACC.productorderform.selectedVariants),currentVariant.removeClass("currentVariant")},bindVariantSelect:function(variantSelectBtn,parentId){variantSelectBtn.on("click",function(event){event.preventDefault();var currentVariant=$(this).parents("table");currentVariant.data(ACC.productorderform.selectedVariantData)?ACC.productorderform.selectedVariants=currentVariant.data(ACC.productorderform.selectedVariantData):ACC.productorderform.selectedVariants=[];var titleHeader=variantSelectBtn.html(),tableWrap=$(document).find("#"+parentId).clone().empty().attr("id",ACC.common.encodeHtml(parentId)+"Variant");currentVariant.addClass("currentVariant");var popupContent=$(this).parents(".orderForm_grid_group").clone();currentVariant.removeClass("currentVariant"),$(popupContent).find(".currentVariant").siblings().remove(),tableWrap.html(popupContent),tableWrap.find(".hidden-xs").removeClass("hidden-xs"),tableWrap.find(".hide").removeClass("hide"),scrollTopPos=$("body").scrollTop(),$("body").scrollTop(0),ACC.colorbox.open(titleHeader,{html:tableWrap,width:"100%",reposition:!1,className:"variantSelectMobile",onCleanup:function(){0<ACC.productorderform.$addToCartOrderForm.find(".selected").length?ACC.productorderform.$addToCartBtn.removeAttr("disabled"):ACC.productorderform.$addToCartBtn.attr("disabled","disabled"),$("body").scrollTop(scrollTopPos)}})})},cancelVariantModal:function(closeVariantModal){$("body").on("click",closeVariantModal,function(event){event.preventDefault(),ACC.colorbox.close()})},checkLimitExceed:function(closeVariantModal1){$("body").on("keyup blur",closeVariantModal1,function(event){var input=Number($(this).val()),stock_amt=Number($(this).attr("data-instock"));stock_amt<input&&$(this).val(stock_amt)})},resetSelectedVariant:function(){ACC.productorderform.selectedVariants=[],$(".product-grid-container table").removeData(ACC.productorderform.selectedVariantData).removeClass("selected").removeClass("currentVariant")},addToCartOrderGridForm:function(){$("#AddToCartOrderForm").keypress(function(event){"13"==event.which&&event.preventDefault()}),ACC.productorderform.$addToCartBtn.click(function(){ACC.productorderform.$addToCartBtn.attr("disabled","disabled"),$.ajax({url:ACC.productorderform.$addToCartOrderForm.attr("action"),type:"POST",dataType:"json",contentType:"application/json",data:ACC.productorderform.toJSON(ACC.productorderform.$addToCartOrderForm,!0),async:!1,success:function(response){$(window).off("beforeunload",ACC.productorderform.beforeUnloadHandler),ACC.product.displayAddToCartPopup(response),ACC.productorderform.cleanValues(),ACC.productorderform.resetSelectedVariant()},error:function(jqXHR,textStatus,errorThrown){console.log("The following error occured: "+textStatus,errorThrown)}})})},beforeUnloadHandler:function(){return ACC.productorderform.$addToCartOrderForm.attr("data-grid-confirm-message")},enableBeforeUnloadEvent:function(quantityAfter,currentTotalItems){ACC.orderform||0<quantityAfter&&0<currentTotalItems&&$(window).off("beforeunload",ACC.productorderform.beforeUnloadHandler).on("beforeunload",ACC.productorderform.beforeUnloadHandler)},filterSkuEntry:function(quantityInput){return/\D/g.test(quantityInput)?quantityInput.replace(/\D/g,""):quantityInput},coreTableScrollActions:function($scrollContent){var scrollRight,scrollLeft,scrollUp,scrollDown,widthReference,heightReference,maxWidth,maxHeight,widthDiff,heightDiff;$scrollContent.hasClass("visible")&&(ACC.productorderform.orderGridScroll($scrollContent),scrollRight=$scrollContent.parent().find(".order-form-scroll.right"),scrollLeft=$scrollContent.parent().find(".order-form-scroll.left"),scrollUp=$scrollContent.parent().find(".order-form-scroll.up"),scrollDown=$scrollContent.parent().find(".order-form-scroll.down"),widthReference=$scrollContent.find(".widthReference").outerWidth(),heightReference=$scrollContent.find(".product-grid-container table").eq(0).height()/2,heightDiff=widthDiff=maxHeight=maxWidth=0,$scrollContent.find(".product-grid-container table").each(function(){$(this).outerWidth()>maxWidth&&(maxWidth=$(this).outerWidth())}),$scrollContent.find(".orderForm_grid_group").each(function(){maxHeight+=$(this).height()}),widthDiff=maxWidth-$scrollContent.outerWidth(),heightDiff=maxHeight-$scrollContent.height()+14,$scrollContent.scroll(function(){0<$(this).scrollLeft()?scrollLeft.show():scrollLeft.hide(),$(this).scrollLeft()>=widthDiff?scrollRight.hide():scrollRight.show(),0<$(this).scrollTop()?scrollUp.show():scrollUp.hide(),$(this).scrollTop()>=heightDiff?scrollDown.hide():scrollDown.show(),$scrollContent.find(".update-future-stock").css("margin-right",-$(this).scrollLeft())}),$scrollContent.parent().find(".order-form-scroll").click(function(){var pos_left=$scrollContent.scrollLeft(),pos_top=$scrollContent.scrollTop();$(this).hasClass("right")?$scrollContent.scrollLeft(pos_left+widthReference):$(this).hasClass("left")?$scrollContent.scrollLeft(pos_left-widthReference):$(this).hasClass("up")?$scrollContent.scrollTop(pos_top-heightReference):$scrollContent.scrollTop(pos_top+heightReference)}))},orderGridScroll:function(scrollContent){var showRight=!1,calcHeight=0,maxWidth=$(scrollContent).find(".orderForm_grid_group").innerWidth(),maxHeight=$(scrollContent).innerHeight()-18;$(scrollContent).find(".product-grid-container table").each(function(){$(this).width()>maxWidth&&(showRight=!0),calcHeight+=$(this).height()}),showRight&&$(scrollContent).parent().find(".order-form-scroll.right").show(),maxHeight<calcHeight&&$(scrollContent).parent().find(".order-form-scroll.down").show()},calculateVariantTotal:function(_this,quantityToAdd){var $gridGroup=_this.parents(".orderForm_grid_group"),currentIndex=parseInt(_this.attr("id").match("[0-9]+")),currentPrice=$(document).find("input[id='productPrice["+currentIndex+"]']").val(),$gridTotalValue=$gridGroup.find("[data-grid-total-id=total_value_"+currentIndex+"]");0<quantityToAdd&&$gridTotalValue.html(ACC.productorderform.formatTotalsCurrency(parseFloat(currentPrice)*parseInt(quantityToAdd)))}},ACC.savedcarts={_autoload:[["bindRestoreSavedCartClick",0!=$(".js-restore-saved-cart").length],["bindDeleteSavedCartLink",0!=$(".js-delete-saved-cart").length],["bindDeleteConfirmLink",0!=$(".js-savedcart_delete_confirm").length],["bindSaveCartForm",0!=$(".js-save-cart-link").length||0!=$(".js-update-saved-cart").length],["bindUpdateUploadingSavedCarts",0!=$(".js-uploading-saved-carts-update").length]],$savedCartRestoreBtn:{},$currentCartName:{},bindRestoreSavedCartClick:function(){$(".js-restore-saved-cart").click(function(event){event.preventDefault();var popupTitle=$(this).data("restore-popup-title"),cartId=$(this).data("savedcart-id"),url=ACC.config.encodedContextPath+"/my-account/saved-carts/"+encodeURIComponent(cartId)+"/restore",popupTitleHtml=ACC.common.encodeHtml(popupTitle);ACC.common.checkAuthenticationStatusBeforeAction(function(){$.get(url,void 0,void 0,"html").done(function(data){ACC.colorbox.open(popupTitleHtml,{html:data,width:500,onComplete:function(){ACC.common.refreshScreenReaderBuffer(),ACC.savedcarts.bindRestoreModalHandlers(),ACC.savedcarts.bindPostRestoreSavedCartLink()},onClosed:function(){ACC.common.refreshScreenReaderBuffer()}})})})})},bindRestoreModalHandlers:function(){ACC.savedcarts.$savedCartRestoreBtn=$(".js-save-cart-restore-btn"),ACC.savedcarts.$currentCartName=$(".js-current-cart-name"),$(".js-prevent-save-active-cart").on("change",function(event){var inputVal;!0===$(this).prop("checked")?(ACC.savedcarts.$currentCartName.attr("disabled","disabled"),ACC.savedcarts.$savedCartRestoreBtn.removeAttr("disabled")):(ACC.savedcarts.$currentCartName.removeAttr("disabled"),""==(inputVal=ACC.savedcarts.$currentCartName.val())&&0===inputVal.length&&ACC.savedcarts.$savedCartRestoreBtn.attr("disabled","disabled"))}),ACC.savedcarts.$currentCartName.on("focus",function(event){$(".js-restore-current-cart-form").removeClass("has-error"),$(".js-restore-error-container").html("")}),ACC.savedcarts.$currentCartName.on("blur",function(event){""==this.value&&0===this.value.length?ACC.savedcarts.$savedCartRestoreBtn.attr("disabled","disabled"):ACC.savedcarts.$savedCartRestoreBtn.removeAttr("disabled")})},bindPostRestoreSavedCartLink:function(){var keepRestoredCart=!0,preventSaveActiveCart=!1;$(document).on("click",".js-keep-restored-cart",function(event){keepRestoredCart=$(this).prop("checked")}),$(document).on("click",".js-prevent-save-active-cart",function(event){preventSaveActiveCart=$(this).prop("checked")}),$(document).on("click",".js-save-cart-restore-btn",function(event){event.preventDefault();var cartName=$("#activeCartName").val(),url=$(this).data("restore-url"),postData={preventSaveActiveCart:preventSaveActiveCart,keepRestoredCart:keepRestoredCart,cartName:cartName};ACC.common.checkAuthenticationStatusBeforeAction(function(){$.post(url,postData,void 0,"html").done(function(result,data,status){var url,errorMsg;"200 OK"==(result=ACC.sanitizer.sanitize(result))?(url=ACC.config.encodedContextPath+"/cart",window.location.replace(url)):(errorMsg=status.responseText.slice(1,-1),$(".js-restore-current-cart-form").addClass("has-error"),$(".js-restore-error-container").html(errorMsg),$(".js-savedcart_restore_confirm_modal").colorbox.resize())})})}),$(document).on("click",".js-cancel-restore-btn",function(event){ACC.colorbox.close()})},bindDeleteSavedCartLink:function(){$(document).on("click",".js-delete-saved-cart",function(event){event.preventDefault();var cartId=$(this).data("savedcart-id"),popupTitle=$(this).data("delete-popup-title"),popupTitleHtml=ACC.common.encodeHtml(popupTitle);ACC.colorbox.open(popupTitleHtml,{inline:!0,className:"js-savedcart_delete_confirm_modal",href:"#popup_confirm_savedcart_delete_"+cartId,width:"500px",onComplete:function(){$(this).colorbox.resize()}})})},bindDeleteConfirmLink:function(){$(document).on("click",".js-savedcart_delete_confirm",function(event){event.preventDefault();var cartId=$(this).data("savedcart-id"),url=ACC.config.encodedContextPath+"/my-account/saved-carts/"+encodeURIComponent(cartId)+"/delete";ACC.common.checkAuthenticationStatusBeforeAction(function(){$.ajax({url:url,type:"DELETE",success:function(response){ACC.colorbox.close();var url=ACC.config.encodedContextPath+"/my-account/saved-carts";window.location.replace(url)}})})}),$(document).on("click",".js-savedcart_delete_confirm_cancel",function(event){ACC.colorbox.close()})},bindSaveCartForm:function(){ACC.savedcarts.charactersLeftInit();function showSaveCartFormCallback(){var title=$("#saveCart").data("saveCartTitle"),titleHtml=ACC.common.encodeHtml(title);ACC.colorbox.open(titleHtml,{href:"#saveCart",inline:!0,width:"620px",onOpen:function(){$("#saveCartName").val()&&ACC.savedcarts.disableSaveCartButton(!1)},onComplete:function(){$(this).colorbox.resize(),saveCart=!1},onClosed:function(){saveCart&&form.submit(),document.getElementById("saveCartForm").reset(),ACC.savedcarts.disableSaveCartButton(!0),ACC.savedcarts.charactersLeftInit()}})}var form=$("#saveCartForm"),saveCart=!1;$(document).on("click",".js-save-cart-link, .js-update-saved-cart",function(e){e.preventDefault(),ACC.common.checkAuthenticationStatusBeforeAction(showSaveCartFormCallback)}),$(document).on("click","#saveCart #cancelSaveCartButton",function(e){e.preventDefault(),$.colorbox.close()}),$("#saveCartName").keyup(function(){$("#saveCart #saveCartButton").prop("disabled",""==this.value.trim());var value=$("#localized_val").attr("value"),tlength=$(this).val().length;remain=255-parseInt(tlength),$("#remain").text(value+" : "+remain)}),$("#saveCartDescription").keyup(function(){var value=$("#localized_val").attr("value"),tlength=$(this).val().length;remain=255-parseInt(tlength),$("#remainTextArea").text(value+" : "+remain)}),$(document).on("click","#saveCart #saveCartButton",function(e){e.preventDefault(),saveCart=!0,$.colorbox.close()})},charactersLeftInit:function(){$("#remain").text($("#localized_val").attr("value")+" : 255"),$("#remainTextArea").text($("#localized_val").attr("value")+" : 255")},disableSaveCartButton:function(value){$("#saveCart #saveCartButton").prop("disabled",value)},bindUpdateUploadingSavedCarts:function(){var cartIdRowMapping=$(".js-uploading-saved-carts-update").data("idRowMapping"),refresh=$(".js-uploading-saved-carts-update").data("refreshCart");if(cartIdRowMapping&&refresh){var interval=$(".js-uploading-saved-carts-update").data("refreshInterval"),arrCartIdAndRow=cartIdRowMapping.split(","),mapCartRow=new Object,cartCodes=[];for(i=0;i<arrCartIdAndRow.length;i++){var arrValue=arrCartIdAndRow[i].split(":");""!=arrValue&&(mapCartRow[arrValue[0]]=arrValue[1],cartCodes.push(arrValue[0]))}0<cartCodes.length&&setTimeout(function(){ACC.savedcarts.refreshWorker(cartCodes,mapCartRow,interval)},interval)}},refreshWorker:function(cartCodes,mapCartRow,interval){$.ajax({dataType:"json",url:ACC.config.encodedContextPath+"/my-account/saved-carts/uploadingCarts",data:{cartCodes:cartCodes},type:"GET",traditional:!0,success:function(data){if(null!=data){for(i=0;i<data.length;i++){var cart=data[i],index=$.inArray(cart.code,cartCodes);-1<index&&cartCodes.splice(index,1);var rowSelector,numberOfItems,rowIdIndex=mapCartRow[cart.code];null!=rowIdIndex&&(rowSelector="#row-"+rowIdIndex,$(document).find(rowSelector+" .js-saved-cart-name").removeClass("not-active"),$(document).find(rowSelector+" .js-saved-cart-date").removeClass("hidden"),$(document).find(rowSelector+" .js-file-importing").remove(),$(document).find(rowSelector+" .js-saved-cart-description").text(cart.description),numberOfItems=cart.entries.length,$(document).find(rowSelector+" .js-saved-cart-number-of-items").text(numberOfItems),$(document).find(rowSelector+" .js-saved-cart-total").text(cart.totalPrice.formattedValue),0<numberOfItems&&$(document).find(rowSelector+" .js-restore-saved-cart").removeClass("hidden"),$(document).find(rowSelector+" .js-delete-saved-cart").removeClass("hidden"))}}0<cartCodes.length&&setTimeout(function(){ACC.savedcarts.refreshWorker(cartCodes,mapCartRow,interval)},interval)}})}},ACC.multidgrid={populateAndShowGridOverlay:function(element,event){event.preventDefault();var itemIndex=$(element).data("index"),gridEntries=$(document).find("#grid"+itemIndex),strSubEntries=gridEntries.data("sub-entries"),productName=gridEntries.data("product-name"),firstVariantCode=strSubEntries.split(",")[0].split(":")[0],targetUrl=gridEntries.data("target-url")+"?productCode="+encodeURIComponent(firstVariantCode);ACC.colorbox.open(ACC.common.encodeHtml(productName),{href:targetUrl,className:"read-only-grid",close:'<span class="glyphicon glyphicon-remove"></span>',width:window.innerWidth>parseInt(cboxOptions.maxWidth)?cboxOptions.maxWidth:cboxOptions.width,height:window.innerHeight>parseInt(cboxOptions.maxHeight)?cboxOptions.maxHeight:cboxOptions.height,onComplete:function(){$("body").addClass("offcanvas");var oH=$("#cboxLoadedContent").height();$("#cboxLoadedContent").height(oH-$("#cboxTitle").height()+"px")},onClosed:function(){$("body").removeClass("offcanvas")}})},populateAndShowGrid:function(element,event,readOnly){var itemIndex=$(element).data("index");grid=$(document).find("#ajaxGrid"+itemIndex);var firstVariantCode,targetUrl,gridEntries=$(document).find("#grid"+itemIndex);$(element).toggleClass("open"),grid.is(":hidden")?""==grid.html()?(firstVariantCode=gridEntries.data("sub-entries").split(",")[0].split(":")[0],targetUrl=gridEntries.data("target-url"),$.ajax({url:targetUrl,data:{productCode:firstVariantCode},type:"GET",dataType:"html",success:function(data){grid.html(data),grid.slideDown("slow")},error:function(xht,textStatus,ex){console.log("Failed to get variant matrix. Error details ["+xht+", "+textStatus+", "+ex+"]")}})):grid.slideToggle("slow"):grid.slideUp()}};var ACC=ACC||{};0<$("#quickOrder").length&&(ACC.quickorder={_autoload:["bindClearQuickOrderRow","bindAddSkuInputRow","bindResetFormBtn","bindAddToCartClick","bindCompileTemplate"],$quickOrderContainer:$(".js-quick-order-container"),$quickOrderMinRows:Number($(".js-quick-order-container").data("quickOrderMinRows")),$quickOrderMaxRows:Number($(".js-quick-order-container").data("quickOrderMaxRows")),$productExistsInFormMsg:$(".js-quick-order-container").data("productExistsInFormMsg"),$quickOrderLeavePageMsg:$("#quickOrder").data("gridConfirmMessage"),$hiddenSkuInput:"input.js-hidden-sku-field",$addToCartBtn:$("#js-add-to-cart-quick-order-btn-top, #js-add-to-cart-quick-order-btn-bottom"),$resetFormBtn:$("#js-reset-quick-order-form-btn-top, #js-reset-quick-order-form-btn-bottom"),$productInfoContainer:".js-product-info",$skuInputField:".js-sku-input-field",$qtyInputField:".js-quick-order-qty",$jsLiContainer:"li.js-li-container",$removeQuickOrderRowBtn:".js-remove-quick-order-row",$skuValidationContainer:".js-sku-validation-container",$qtyValidationContainer:".js-qty-validation-container",$productItemTotal:".js-quick-order-item-total",$classHasError:"has-error",$templateAlias:"quickOrderRowTemplate",bindResetFormBtn:function(){ACC.quickorder.$resetFormBtn.on("click",ACC.quickorder.clearForm)},bindAddToCartClick:function(){ACC.quickorder.$addToCartBtn.on("click",ACC.quickorder.addToCart)},bindAddSkuInputRow:function(){$(ACC.quickorder.$skuInputField).on("focusin",ACC.quickorder.addInputRow).on("focusout keydown",ACC.quickorder.handleFocusOutOnSkuInput)},bindClearQuickOrderRow:function(){$(ACC.quickorder.$removeQuickOrderRowBtn).on("mousedown",ACC.quickorder.clearQuickOrderRow)},bindCompileTemplate:function(){$.template(ACC.quickorder.$templateAlias,$("#quickOrderRowTemplate"))},addToCart:function(){$.ajax({url:ACC.quickorder.$quickOrderContainer.data("quickOrderAddToCartUrl"),type:"POST",dataType:"json",contentType:"application/json",data:ACC.quickorder.getJSONDataForAddToCart(),async:!1,success:function(response){ACC.quickorder.handleAddToCartSuccess(response)},error:function(jqXHR,textStatus,errorThrown){console.log("The following error occurred: "+textStatus,errorThrown)}})},handleAddToCartSuccess:function(response){0<$(response.quickOrderErrorData).length&&ACC.quickorder.disableBeforeUnloadEvent();var lookup={};response.quickOrderErrorData.forEach(function(el){lookup[el.sku]=el.errorMsg}),$(ACC.quickorder.$qtyInputField).each(function(){var parentLi=ACC.quickorder.getCurrentParentLi(this),sku=ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuInputField).val(),errorMsg=lookup[sku];errorMsg?ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text(errorMsg):ACC.quickorder.clearGivenQuickOrderRow(parentLi)}),ACC.quickorder.handleBeforeUnloadEvent(),ACC.product.displayAddToCartPopup(response)},getJSONDataForAddToCart:function(){var skusAsJSON=[];return $(ACC.quickorder.$qtyInputField).each(function(){var sku,qty=Number($(this).val());0<qty&&(sku=jQuery.trim(ACC.quickorder.findElementInCurrentParentLi(this,ACC.quickorder.$skuInputField).val()),skusAsJSON.push({product:{code:sku},quantity:qty}))}),JSON.stringify({cartEntries:skusAsJSON})},handleFocusOutOnSkuInput:function(event){13==(event.charCode?event.charCode:event.keyCode?event.keyCode:0)&&$(event.target).focusout(),"focusout"==event.type&&(ACC.quickorder.handleGetProduct(event),ACC.quickorder.handleBeforeUnloadEvent())},handleFocusOutOnQtyInput:function(event){13==(event.charCode?event.charCode:event.keyCode?event.keyCode:0)&&(event.preventDefault(),ACC.quickorder.getCurrentParentLi(event.target).next().find(ACC.quickorder.$skuInputField).focus(),$(event.target).focusout()),"focusout"==event.type&&(ACC.quickorder.validateAndUpdateItemTotal(event),ACC.quickorder.enableDisableAddToCartBtn())},clearForm:function(){window.location.reload()},validateAndUpdateItemTotal:function(event){var stockLevelStatus,qtyValidationContainer,maxQty,itemPrice,parentLi=ACC.quickorder.getCurrentParentLi(event.target),qtyValue=jQuery.trim(ACC.productorderform.filterSkuEntry($(event.target).val()));isNaN(qtyValue)||""==qtyValue?(qtyValue=0,$(event.target).removeClass(ACC.quickorder.$classHasError),ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyValidationContainer).text(""),$(event.target).val(0)):(qtyValue=Number(qtyValue),$(event.target).val(qtyValue),maxQty=jQuery.trim(ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyInputField).data("maxProductQty")),stockLevelStatus=jQuery.trim(ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyInputField).data("stockLevelStatus")),maxQty=$.isEmptyObject(maxQty)&&"inStock"==stockLevelStatus?"FORCE_IN_STOCK":Number(maxQty),!isNaN(maxQty)&&maxQty<qtyValue?($(event.target).addClass(ACC.quickorder.$classHasError),(qtyValidationContainer=ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyValidationContainer)).text(qtyValidationContainer.data("maxProductQtyMsg")),qtyValue=maxQty,$(event.target).val(maxQty)):($(event.target).removeClass(ACC.quickorder.$classHasError),ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyValidationContainer).text(""))),0<qtyValue?(itemPrice=parseFloat(ACC.quickorder.findElement(parentLi,".js-product-price").data("productPrice")),ACC.quickorder.findElement(parentLi,ACC.quickorder.$productItemTotal).html(ACC.productorderform.formatTotalsCurrency(itemPrice*qtyValue))):ACC.quickorder.findElement(parentLi,ACC.quickorder.$productItemTotal).text("")},clearQuickOrderRow:function(){var parentLi=ACC.quickorder.getCurrentParentLi(this);ACC.quickorder.clearGivenQuickOrderRow(parentLi)},clearGivenQuickOrderRow:function(parentLi){var quickOrderMinRows=ACC.quickorder.$quickOrderMinRows;$(".js-ul-container li.js-li-container").length>quickOrderMinRows?parentLi.remove():(ACC.quickorder.findElement(parentLi,ACC.quickorder.$productInfoContainer).remove(),ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text(""),ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuInputField).val(""),ACC.quickorder.findElement(parentLi,ACC.quickorder.$hiddenSkuInput).val("")),ACC.quickorder.enableDisableAddToCartBtn(),ACC.quickorder.handleBeforeUnloadEvent()},addInputRow:function(event){var liClone,currentSkuInputField;$(".js-quick-order-container li.js-li-container:last-child").find(ACC.quickorder.$skuInputField).is($(event.target))&&$(ACC.quickorder.$jsLiContainer).length<ACC.quickorder.$quickOrderMaxRows&&(liClone=$(".js-quick-order-container li.js-li-container:first").clone(),ACC.quickorder.findElement(liClone,ACC.quickorder.$productInfoContainer).remove(),ACC.quickorder.findElement(liClone,ACC.quickorder.$skuValidationContainer).text(""),ACC.quickorder.findElement(liClone,ACC.quickorder.$hiddenSkuInput).val(""),(currentSkuInputField=ACC.quickorder.findElement(liClone,ACC.quickorder.$skuInputField)).val(""),currentSkuInputField.focusin(ACC.quickorder.addInputRow).focusout(ACC.quickorder.handleFocusOutOnSkuInput).keydown(ACC.quickorder.handleFocusOutOnSkuInput),ACC.quickorder.findElement(liClone,ACC.quickorder.$removeQuickOrderRowBtn).click(ACC.quickorder.clearQuickOrderRow),$(".js-ul-container").append(liClone))},handleGetProduct:function(event){var parentLi=ACC.quickorder.getCurrentParentLi(event.target),productCode=$.trim(event.target.value);$(event.target).val(productCode),ACC.quickorder.isCurrentSkuSameAsPrevious(parentLi,productCode)||(0<productCode.length?(ACC.quickorder.findElement(parentLi,ACC.quickorder.$productInfoContainer).remove(),ACC.quickorder.isDuplicateSku(event.target,productCode)?ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text(ACC.quickorder.$productExistsInFormMsg):ACC.quickorder.getAndDisplayProductInfo(event,parentLi,productCode),ACC.quickorder.findElement(parentLi,ACC.quickorder.$hiddenSkuInput).val(productCode)):($(event.target).removeClass(ACC.quickorder.$classHasError),ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text(""),ACC.quickorder.findElement(parentLi,ACC.quickorder.$productInfoContainer).remove()))},isCurrentSkuSameAsPrevious:function(parentLi,productCode){return ACC.quickorder.findElement(parentLi,ACC.quickorder.$hiddenSkuInput).val()==productCode},isDuplicateSku:function(currentInput,productCode){var exists=!1;return $(ACC.quickorder.$skuInputField).each(function(){if($(this).val()==productCode&&!$(this).is($(currentInput)))return!(exists=!0)}),exists},getAndDisplayProductInfo:function(event,parentLi,productCode){var url=ACC.config.encodedContextPath+"/quickOrder/productInfo?code="+encodeURIComponent(productCode);$.getJSON(url,function(result){var qtyInputField;null!=result.errorMsg&&0<result.errorMsg.length?($(event.target).addClass(ACC.quickorder.$classHasError),ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text(result.errorMsg)):($(event.target).removeClass(ACC.quickorder.$classHasError),ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text(""),$.tmpl(ACC.quickorder.$templateAlias,result.productData).insertAfter(ACC.quickorder.findElement(parentLi,".js-sku-container")),(qtyInputField=ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyInputField)).focusout(ACC.quickorder.handleFocusOutOnQtyInput).keydown(ACC.quickorder.handleFocusOutOnQtyInput),"outOfStock"==result.productData.stock.stockLevelStatus.code?(qtyInputField.val(0),qtyInputField.prop("disabled",!0)):qtyInputField.focus().select(),ACC.quickorder.enableDisableAddToCartBtn())})},handleBeforeUnloadEvent:function(){ACC.quickorder.isAnySkuPresent()?(ACC.quickorder.disableBeforeUnloadEvent(),ACC.quickorder.enableBeforeUnloadEvent()):ACC.quickorder.disableBeforeUnloadEvent()},disableBeforeUnloadEvent:function(){$(window).off("beforeunload",ACC.quickorder.beforeUnloadHandler)},enableBeforeUnloadEvent:function(){$(window).on("beforeunload",ACC.quickorder.beforeUnloadHandler)},beforeUnloadHandler:function(){return ACC.quickorder.$quickOrderLeavePageMsg},enableDisableAddToCartBtn:function(){ACC.quickorder.shouldAddToCartBeEnabled()?ACC.quickorder.$addToCartBtn.removeAttr("disabled"):ACC.quickorder.$addToCartBtn.attr("disabled","disabled")},shouldAddToCartBeEnabled:function(){var sum=0,enable=!1;return $(ACC.quickorder.$qtyInputField).each(function(){var str=this.value.trim();if(str&&(sum+=parseInt(str,10)),1<=sum)return!(enable=!0)}),enable},isAnySkuPresent:function(){var present=!1;return $(ACC.quickorder.$skuInputField).each(function(){if(jQuery.trim(this.value))return!(present=!0)}),present},getCurrentParentLi:function(currentElement){return $(currentElement).closest(ACC.quickorder.$jsLiContainer)},findElement:function(currentElement,toFind){return $(currentElement).find(toFind)},findElementInCurrentParentLi:function(currentElement,toFind){return $(currentElement).closest(ACC.quickorder.$jsLiContainer).find(toFind)}}),ACC.quote={_autoload:[["bindAddComment",0!==$("#js-quote-comments").length],["bindAddEntryComment",0!==$(".js-quote-entry-comments").length],["toggleMoreComments",0!==$("#js-quote-comments").length],["toggleLessComments",0!==$("#js-quote-comments").length],["displayLessComments",0!==$("#js-quote-comments").length],["quoteDetailsNavigation",0!==$(".js-quote-actions").length],["bindQuoteButtons",0!==$(".js-btn-quote").length],["bindEditQuoteButton",0!==$(".js-quote-edit-btn").length],["bindSubmitConfirmation",0!==$(".js-quote-submit-btn").length],["bindCancelConfirmation",0!==$(".js-quote-cancel-btn").length],["bindName",0!==$("#js-quote-name").length],["bindDescription",0!==$("#js-quote-description").length],["bindExpirationTime",0!==$("#js-quote-expiration-time").length],["bindCheckoutConfirmation",0!==$(".js-quote-checkout-btn").length],["bindEditConfirmation",0!==$(".js-quote-warning-btn").length],["bindQuoteDiscount",0!==$(".js-quote-discount-link").length],["bindNewCartClick",0!==$(".new__cart--link").length]],bindEditQuoteButton:function(){$(".js-quote-edit-btn").on("click",function(){var sUrl=$(this).data("quoteEditUrl");window.location=sUrl})},bindNewCartClick:function(){$(".new__cart--link").bind("click",function(event){$(this).unbind(event)})},bindAddComment:function(){$(document).on("keypress","#js-quote-comments #comment",function(event){return 13!==event.keyCode||(""===$("#comment").val().trim()||(event.preventDefault(),ACC.quote.quoteCommentSubmit($("#comment").val()),$("#comment").val("")),!1)})},bindAddEntryComment:function(){$(document).on("keypress",".js-quote-entry-comments",function(event){return 13!==event.keyCode||(event.preventDefault(),ACC.quote.quoteEntryCommentSubmit($(this).val(),$(this).data("entry-number")),!1)})},bindQuoteButtons:function(){$(".js-save-quote-btn").click(function(){var url=$(this).data("saveQuoteUrl");$("#quoteForm").attr("action",url).submit()}),$(".js-submit-quote-btn").click(function(){var url=$(this).data("submitQuoteUrl");$("#quoteForm").attr("action",url).submit()}),$(".js-accept-quote-btn").click(function(){var url=$(this).data("acceptQuoteUrl");$("#quoteForm").attr("action",url).submit()})},quoteCommentSubmit:function(comment){var quoteComments=$("#js-quote-comments"),addCommentUrl=quoteComments.data("quote-base-link")+"comment",showAllComments=quoteComments.data("show-all-comments");$.ajax({url:addCommentUrl,data:{comment:comment},type:"post",success:function(response){ACC.quote.onCommentSuccess(showAllComments)}})},quoteEntryCommentSubmit:function(comment,entryNumber){var addEntryCommentUrl;comment&&comment.length&&(addEntryCommentUrl=$("#js-quote-comments").data("quote-base-link")+"entry/comment",$.ajax({url:addEntryCommentUrl,data:{comment:comment,entryNumber:entryNumber},type:"post",success:function(){ACC.quote.onEntryCommentSuccess(entryNumber)}}))},onCommentSuccess:function(showAllComments){$("#commentListDiv").load(location.href+" #commentListDiv",function(){ACC.quote.displayComments(""+showAllComments)})},onEntryCommentSuccess:function(entryNumber){var entryNumberHtml=ACC.common.encodeHtml(entryNumber);$("#entryCommentListDiv_"+entryNumberHtml).load(location.href+" #entryCommentListDiv_"+entryNumberHtml,function(){ACC.quote.displayEntryComments(entryNumberHtml)}),$("#entryComment_"+entryNumberHtml).val("")},toggleMoreComments:function(){$(document).on("click","#moreCommentsAnchor",ACC.quote.displayMoreComments),$(document).on("click",".js-more-entry-comments-anchor",ACC.quote.displayMoreEntryComments)},toggleLessComments:function(){$(document).on("click","#lessCommentsAnchor",ACC.quote.displayLessComments),$(document).on("click",".js-less-entry-comments-anchor",ACC.quote.displayLessEntryComments)},displayMoreComments:function(e){e.preventDefault(),ACC.quote.displayComments("true")},displayMoreEntryComments:function(e){e.preventDefault(),ACC.quote.displayEntryComments($(this).data("entry-number"),"true")},displayLessComments:function(e){void 0!==e&&e.preventDefault(),ACC.quote.displayComments("false")},displayLessEntryComments:function(e){e.preventDefault(),ACC.quote.displayEntryComments($(this).data("entry-number"),"false")},displayComments:function(showAll){for(var quoteComments=$("#js-quote-comments"),currentCommentsShown=quoteComments.data("current-comments-shown"),comments=$('[id^="comment_"]'),i=0;i<comments.length;i++)"true"===showAll||i<currentCommentsShown?$(comments[i]).show():$(comments[i]).hide();return"false"===showAll?($("#moreCommentsAnchor").show(),$("#lessCommentsAnchor").hide(),quoteComments.data("show-all-comments",!1)):($("#moreCommentsAnchor").hide(),$("#lessCommentsAnchor").show(),quoteComments.data("show-all-comments",!0)),!1},displayEntryComments:function(entryNumber,showAll){var entryNumberHtml=ACC.common.encodeHtml(entryNumber),quoteEntryComments=$("#entryCommentListDiv_"+entryNumberHtml),comments=quoteEntryComments.find('[id^="entryComment_'+entryNumberHtml+'"]');showAll=showAll||""+quoteEntryComments.data("show-all-entry-comments");for(var i=0;i<comments.length;i++)"true"===showAll||i<4?$(comments[i]).show():$(comments[i]).hide();return"false"===showAll?(quoteEntryComments.find(".js-more-entry-comments-anchor").show(),quoteEntryComments.find(".js-less-entry-comments-anchor").hide(),quoteEntryComments.data("show-all-entry-comments",!1)):(quoteEntryComments.find(".js-more-entry-comments-anchor").hide(),quoteEntryComments.find(".js-less-entry-comments-anchor").show(),quoteEntryComments.data("show-all-entry-comments",!0)),!1},quoteDetailsNavigation:function(){$(".js-quote-actions").on("click",function(e){$(this).parent().find("nav").toggleClass("display-none")})},bindSubmitConfirmation:function(e){ACC.quote.handleConfirmationModal({actionButtonSelector:".js-quote-submit-btn",modalWindowSelector:"#js-quote-submit-modal",modalTitleDataAttributeName:"submit-confirmation-modal-title",cancelButtonSelector:"#js-quote-submit-modal #submitNoButton"}),$("#quoteSubmitForm").submit(function(event){var submitUrl,quoteForm=$("#quoteForm");quoteForm.is("form")&&(event.preventDefault(),submitUrl=$(this).prop("action"),quoteForm.prop("action",submitUrl),quoteForm.submit())})},bindCheckoutConfirmation:function(e){ACC.quote.handleConfirmationModal({actionButtonSelector:".js-quote-checkout-btn",modalWindowSelector:"#js-quote-checkout-modal",modalTitleDataAttributeName:"submit-confirmation-modal-title",cancelButtonSelector:"#js-quote-checkout-modal #submitNoButton"})},bindCancelConfirmation:function(e){ACC.quote.handleConfirmationModal({actionButtonSelector:".js-quote-cancel-btn",modalWindowSelector:"#js-quote-cancel-modal",modalTitleDataAttributeName:"cancel-confirmation-modal-title",cancelButtonSelector:"#js-quote-cancel-modal #cancelNoButton"})},bindEditConfirmation:function(e){ACC.quote.handleConfirmationModal({actionButtonSelector:".js-quote-warning-btn",modalWindowSelector:"#js-quote-edit-modal",modalTitleDataAttributeName:"edit-confirmation-modal-title",cancelButtonSelector:"#js-quote-edit-modal #cancelEditNoButton",confirmButtonSelector:"#js-quote-edit-modal #cancelEditYesButton"})},handleConfirmationModal:function(options){var $actionButtonSelector=$(document).find(options.actionButtonSelector);$actionButtonSelector.click(function(e){e.preventDefault();var modalWindow=$(document).find(options.modalWindowSelector),title=modalWindow.data(options.modalTitleDataAttributeName);options.initializeCallback&&options.initializeCallback(),ACC.colorbox.open(ACC.common.encodeHtml(title),{inline:!0,href:modalWindow,width:"480px",escKey:!1,overlayClose:!1,onComplete:function(){ACC.colorbox.resize()}})}),$(document).find(options.cancelButtonSelector).click(function(e){e.preventDefault(),ACC.colorbox.close()}),$(document).find(options.confirmButtonSelector).click(function(e){e.preventDefault(),ACC.colorbox.close();var sUrl=$actionButtonSelector.data("quoteEditUrl");window.location=sUrl})},bindQuoteDiscount:function(e){ACC.quote.handleDiscountModal({actionButtonSelector:".js-quote-discount-link",modalWindowSelector:"#js-quote-discount-modal",modalTitleDataAttributeName:"quote-modal-title",modalTotalDataAttributeName:"quote-modal-total",modalQuoteDiscountDataAttributeName:"quote-modal-quote-discount",modalCurrencyDataAttributeName:"quote-modal-currency",cancelButtonSelector:"#js-quote-discount-modal #cancelButton"})},handleDiscountModal:function(options){var modalWindow=$(document).find(options.modalWindowSelector),total=parseFloat(modalWindow.data(options.modalTotalDataAttributeName)),quoteDiscount=parseFloat(modalWindow.data(options.modalQuoteDiscountDataAttributeName)),currency=modalWindow.data(options.modalCurrencyDataAttributeName);function enableSubmit(){$("#js-quote-discount-by-percentage").css("border-color","#cccccc"),$("#js-quote-discount-by-amount").css("border-color","#cccccc"),$("#js-quote-discount-adjust-total").css("border-color","#cccccc"),$("#submitButton").prop("disabled",!1)}function resetIntial(val){return isNaN(parseFloat(val))&&(val=(val=0).toFixed(2)),val}function updateByPercentage(){var percent=parseFloat($("#js-quote-discount-by-percentage").val());100<percent||percent<0?($("#js-quote-discount-by-percentage").css("border-color","red"),$("#submitButton").prop("disabled",!0)):enableSubmit();var discountAmount=(discountAmount=total*percent/100).toFixed(2);$("#js-quote-discount-by-amount").val(resetIntial(discountAmount));var remainTotal=(remainTotal=total-discountAmount).toFixed(2);$("#js-quote-discount-adjust-total").val(resetIntial(remainTotal)),$("#js-quote-discount-rate").val(resetIntial(percent)),$("#js-quote-discount-type").val("PERCENT"),updateNewTotal(remainTotal)}function reset(){var per=$("#js-quote-discount-by-percentage").val(),amt=$("#js-quote-discount-by-amount").val(),tot=$("#js-quote-discount-adjust-total").val();""===per&&$("#js-quote-discount-by-percentage").val("0.00"),""===amt&&$("#js-quote-discount-by-amount").val("0.00"),""!==tot&&0!==tot||$("#js-quote-discount-adjust-total").val(total)}function holdPreviousValue(event){var $this=$(this);46===event.which&&-1===$this.val().indexOf(".")||(event.which<48||57<event.which)&&0!==event.which&&8!==event.which&&event.preventDefault();var text=$(this).val();46===event.which&&-1===text.indexOf(".")&&setTimeout(function(){3<$this.val().substring($this.val().indexOf(".")).length&&$this.val($this.val().substring(0,$this.val().indexOf(".")+3))},1),-1!==text.indexOf(".")&&2<text.substring(text.indexOf(".")).length&&0!==event.which&&8!==event.which&&$(this)[0].selectionStart>=text.length-2&&event.preventDefault()}function updateByAmount(){var discountAmount=parseFloat($("#js-quote-discount-by-amount").val());total<discountAmount||discountAmount<0?($("#js-quote-discount-by-amount").css("border-color","red"),$("#submitButton").prop("disabled",!0)):enableSubmit();var percent=(percent=discountAmount/total*100).toFixed(2);$("#js-quote-discount-by-percentage").val(resetIntial(percent));var remainTotal=(remainTotal=total-discountAmount).toFixed(2);$("#js-quote-discount-adjust-total").val(resetIntial(remainTotal)),$("#js-quote-discount-rate").val(resetIntial(discountAmount)),$("#js-quote-discount-type").val("ABSOLUTE"),updateNewTotal(remainTotal)}function updateByAdjustTotal(){var adujstTotal=parseFloat($("#js-quote-discount-adjust-total").val());total<adujstTotal||adujstTotal<0?($("#js-quote-discount-adjust-total").css("border-color","red"),$("#submitButton").prop("disabled",!0)):enableSubmit();var discountAmount=(discountAmount=total-adujstTotal).toFixed(2);$("#js-quote-discount-by-amount").val(resetIntial(discountAmount));var percent=(percent=discountAmount/total*100).toFixed(2);$("#js-quote-discount-by-percentage").val(resetIntial(percent)),$("#js-quote-discount-rate").val(resetIntial(adujstTotal)),$("#js-quote-discount-type").val("TARGET"),updateNewTotal(adujstTotal)}function updateNewTotal(newTotal){isNaN(parseFloat(newTotal))&&(newTotal=total);newTotal=parseFloat(newTotal).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,");$("#js-quote-discount-new-total").text(currency.concat(newTotal))}$(document).find(options.actionButtonSelector).click(function(e){e.preventDefault();var title=modalWindow.data(options.modalTitleDataAttributeName);options.initializeCallback&&options.initializeCallback(),ACC.colorbox.open(ACC.common.encodeHtml(title),{inline:!0,href:modalWindow,width:"480px",onComplete:function(){ACC.colorbox.resize();var percent=quoteDiscount/total*100,adjustTotal=(total-quoteDiscount).toFixed(2);$("#js-quote-discount-by-percentage").val(percent.toFixed(2)),$("#js-quote-discount-by-amount").val(quoteDiscount.toFixed(2)),$("#js-quote-discount-adjust-total").val(adjustTotal)}})}),$(document).find(options.cancelButtonSelector).click(function(e){e.preventDefault(),ACC.colorbox.close()}),$("#js-quote-discount-by-percentage").keyup(updateByPercentage),$("#js-quote-discount-by-percentage").change(updateByPercentage),$("#js-quote-discount-by-percentage").blur(reset),$("#js-quote-discount-by-percentage").keypress(holdPreviousValue),$("#js-quote-discount-by-amount").keyup(updateByAmount),$("#js-quote-discount-by-amount").change(updateByAmount),$("#js-quote-discount-by-amount").keypress(holdPreviousValue),$("#js-quote-discount-by-amount").blur(reset),$("#js-quote-discount-adjust-total").keyup(updateByAdjustTotal),$("#js-quote-discount-adjust-total").change(updateByAdjustTotal),$("#js-quote-discount-adjust-total").keypress(holdPreviousValue),$("#js-quote-discount-adjust-total").blur(reset)},bindName:function(){$("#js-quote-name").on("focusout",function(){ACC.quote.updateMetadata()})},bindDescription:function(){$("#js-quote-description").on("focusout",function(){ACC.quote.updateMetadata()})},updateMetadata:function(){var updateMetadataUrl=$("#quoteFormDiv").data("metadata-url"),name=$("#js-quote-name").val().trim(),description=$("#js-quote-description").val(),nameWrapperElement=$("#js-quote-name-wrapper");name&&name.length?(nameWrapperElement.removeClass("has-error"),$.ajax({url:updateMetadataUrl,data:{name:name,description:description},type:"POST",success:function(){$(".js-modal-quote-description").text(description),$(".js-modal-quote-name").text(name)}})):nameWrapperElement.hasClass("has-error")||nameWrapperElement.addClass("has-error")},bindExpirationTime:function(e){var expirationTimeWrapperElement=$("#js-quote-expiration-time"),dateFormatForDatePicker=expirationTimeWrapperElement.data("date-format-for-date-picker"),minOfferValidityPeriodDays=expirationTimeWrapperElement.data("min-offer-validity-period-days"),minDate=new Date;minDate.setDate(minDate.getDate()+minOfferValidityPeriodDays),$("#expirationTime").datepicker({dateFormat:dateFormatForDatePicker,constrainInput:!0,minDate:minDate,onSelect:function(){ACC.quote.handleExpirationTimeUpdate(expirationTimeWrapperElement,dateFormatForDatePicker,minOfferValidityPeriodDays)}}),$("#expirationTime").change(function(){ACC.quote.handleExpirationTimeUpdate(expirationTimeWrapperElement,dateFormatForDatePicker,minOfferValidityPeriodDays)}),$(document).on("click",".js-open-datepicker-quote-expiration-time",function(){$("#expirationTime").datepicker("show")})},handleExpirationTimeUpdate:function(expirationTimeWrapperElement,dateFormat,minOfferValidityPeriodDays){var expirationTime=$("#expirationTime").val();ACC.quote.validateExpirationTime(dateFormat,expirationTime,minOfferValidityPeriodDays)?(ACC.quote.updateExpirationTime(expirationTime.trim()),expirationTimeWrapperElement.removeClass("has-error")):expirationTimeWrapperElement.hasClass("has-error")||expirationTimeWrapperElement.addClass("has-error")},validateExpirationTime:function(dateFormat,value,minOfferValidityPeriodDays){try{if(value){var selectedDate=$.datepicker.parseDate(dateFormat,value),validDate=new Date;return validDate.setHours(0,0,0,0),validDate.setDate(validDate.getDate()+minOfferValidityPeriodDays),validDate<=selectedDate}return!0}catch(error){return!1}},updateExpirationTime:function(expirationTime){var url=$("#js-quote-expiration-time").data("expiration-time-url");$.ajax({url:url,type:"POST",data:{expirationTime:expirationTime},error:function(jqXHR){var expirationTimeWrapperElement=$("#js-quote-expiration-time");expirationTimeWrapperElement.hasClass("has-error")||expirationTimeWrapperElement.addClass("has-error")}})}},$(document).ready(function(){$(".js-quote-toggle-btn").click(function(){$(this).toggleClass("open"),$("#quote__form--collapse").slideToggle(400),$(this).hasClass("open")?$(this).addClass("collapsed"):$(this).removeClass("collapsed")}),$(".js-quote-comments-btn").click(function(){$(this).toggleClass("open"),$("#comments__collapse").slideToggle(400),$(this).hasClass("open")?$(this).addClass("collapsed"):$(this).removeClass("collapsed")})}),ACC.consent={_autoload:[["bindSendConsent",0!=$("#consent-management-form").length],["bindToggleConsentTemplateDescription",0!=$("#consent-management-form").length],"bindConsentClick","bindConsentManagementAlertBar"],bindSendConsent:function(){var consentCheckbox=$("#consent-management-form").find("input.toggle-button__input");consentCheckbox.removeAttr("disabled"),consentCheckbox.click(function(){var consentId=$(this).prop("id"),buttonId=($(this).is(":checked")?"#give-consent-button-":"#withdraw-consent-button-")+consentId,$consentBtn=$(document).find(buttonId);$consentBtn.trigger("click"),consentCheckbox.attr("disabled","disabled"),$consentBtn.on("keydown",function(event){13!==event.keyCode&&32!==event.keyCode||(event.preventDefault(),$consentBtn.trigger("click"),consentCheckbox.attr("disabled","disabled"))})})},bindToggleConsentTemplateDescription:function(){var accordion=$("#consent-management-form").find('[data-behavior="accordion"]');$.each(accordion,function(){var accordionItems=$(this).find('[data-binding="expand-accordion-item"]');$.each(accordionItems,function(){function toggleClasses(event){var nV,innerContent,maxHeight,content,clickedItem=event.currentTarget,currentItem=$(clickedItem).parent(),clickedContent=$(currentItem).find(".consent-management-list__content");$(currentItem).toggleClass("is-expanded"),innerContent=(nV=currentItem).find(".consent-management-list__content-inner")[0],maxHeight=$(innerContent).outerHeight(),(content=nV.find(".consent-management-list__content")[0]).style.height&&"0px"!==content.style.height?$(content).css("height","0px"):$(content).css("height",maxHeight),$(currentItem).hasClass("is-expanded")?($(clickedItem).attr("aria-selected","true"),$(clickedItem).attr("aria-expanded","true"),$(clickedContent).attr("aria-hidden","false")):($(clickedItem).attr("aria-selected","false"),$(clickedItem).attr("aria-expanded","false"),$(clickedContent).attr("aria-hidden","true"))}var triggerBtn=$(this).find('[data-binding="expand-accordion-trigger"]');triggerBtn.on("click",function(event){event.preventDefault(),toggleClasses(event)}),$(triggerBtn).on("keydown",function(event){13!==event.keyCode&&32!==event.keyCode||(event.preventDefault(),toggleClasses(event))})})})},bindConsentClick:function(){$(".consent-accept").on("click",function(){ACC.consent.changeConsentState(this,"GIVEN")}),$(".consent-reject").on("click",function(){ACC.consent.changeConsentState(this,"WITHDRAWN")})},changeConsentState:function(element,consentState){var consentCode=$(element).closest(".consentmanagement-bar").data("code");$.ajax({url:ACC.config.encodedContextPath+"/anonymous-consent/"+encodeURIComponent(consentCode)+"?consentState="+encodeURIComponent(consentState),type:"POST",success:function(){$(element).closest(".consentmanagement-bar").hide()}})},bindConsentManagementAlertBar:function(){var accordion=$("#consent-management-alert").find('[data-behavior="accordion"]');$.each(accordion,function(){var accordionItems=$(this).find('[data-binding="expand-accordion-item"]');$.each(accordionItems,function(){function toggleClasses(event){var nV,innerContent,maxHeight,content,clickedItem=event.currentTarget,currentItem=$(clickedItem).parent(),clickedContent=$(currentItem).find(".consent-management-list__content");$(currentItem).toggleClass("is-expanded"),innerContent=(nV=currentItem).find(".consent-management-list__content-inner")[0],maxHeight=$(innerContent).outerHeight(),(content=nV.find(".consent-management-list__content")[0]).style.height&&"0px"!==content.style.height?$(content).css("height","0px"):$(content).css("height",maxHeight),$(currentItem).hasClass("is-expanded")?($(clickedItem).attr("aria-selected","true"),$(clickedItem).attr("aria-expanded","true"),$(clickedContent).attr("aria-hidden","false")):($(clickedItem).attr("aria-selected","false"),$(clickedItem).attr("aria-expanded","false"),$(clickedContent).attr("aria-hidden","true"))}var triggerBtn=$(this).find('[data-binding="expand-accordion-trigger"]');triggerBtn.on("click",function(event){event.preventDefault(),toggleClasses(event)}),$(triggerBtn).on("keydown",function(event){13!==event.keyCode&&32!==event.keyCode||(event.preventDefault(),toggleClasses(event))})})})}},ACC.coookienotification={_autoload:[["bindCookieNotificationClick",0!=$(".js-cookie-notification-accept").length]],bindCookieNotificationClick:function(){$(".js-cookie-notification-accept").on("click",function(){$.cookie("cookie-notification","ACCEPTED",{path:"/"}),$("#js-cookie-notification").hide()})}},ACC.close={_autoload:[["bindCloseAccountModalButtons",0!=$(".js-close-account-popup-button").length],["bindCloseAccountButton",0!=$(".js-close-account-popup-button").length]],bindCloseAccountModalButtons:function(){$(".js-close-account-popup-button").click(function(event){event.preventDefault();var popupTitle=$(".js-close-account-popup-button").data("popupTitle"),popupTitleHtml=ACC.common.encodeHtml(popupTitle);ACC.colorbox.open(popupTitleHtml,{inline:!0,href:"#popup_confirm_account_removal",className:"js-close-account-popup",width:"500px",onComplete:function(){$(this).colorbox.resize()}})})},bindCloseAccountButton:function(){$(document).on("click",".js-close-account-action",function(event){event.preventDefault();var url=ACC.config.encodedContextPath+"/my-account/close-account";$.ajax({url:url,type:"POST",success:function(response){ACC.colorbox.close();var url=ACC.config.encodedContextPath+"/logout?closeAcc=true";window.location.replace(url)},error:function(jqXHR,textStatus,errorThrown){console.log("Failed to close account. Error: ["+errorThrown+"]"),window.location.reload()}})})}},ACC.csvimport={TEXT_CSV_CONTENT_TYPE:"text/csv",TEXT_CSV_LONG_CONTENT_TYPE:"text/comma-separated-values",APP_EXCEL_CONTENT_TYPE:"application/vnd.ms-excel",_autoload:[["changeFileUploadAppearance",0!=$(".js-file-upload").length],["bindImportCSVActions",0!=$(".js-import-csv").length]],changeFileUploadAppearance:function(){$(".js-file-upload__input").on("change",function(){var files=this.files,spanFileNames=document.createElement("span");spanFileNames.insertAdjacentText("beforeend",files[0].name.toLowerCase()),spanFileNames.insertAdjacentElement("beforeend",document.createElement("br")),$(".js-file-upload__file-name").unbind("mouseenter mouseleave"),$(".js-file-upload__file-name").html(spanFileNames),0<$(".js-file-upload").parents("#cboxLoadedContent").length&&ACC.colorbox.resize()})},bindImportCSVActions:function(){$("#chooseFileButton").on("click",function(event){ACC.csvimport.clearGlobalAlerts()}),$("#importButton").on("click",function(event){var selectedFile,form,formData;event.preventDefault(),ACC.csvimport.clearGlobalAlerts(),0<$(".js-file-upload__input").val().trim().length?(selectedFile=document.getElementById("csvFile").files[0],ACC.csvimport.isSelectedFileValid(selectedFile)&&(form=document.getElementById("importCSVSavedCartForm"),(formData=new window.FormData(form)).append("csvFile",selectedFile),ACC.csvimport.displayGlobalAlert({type:"warning",messageId:"import-csv-upload-message"}),ACC.csvimport.enableDisableActionButtons(!1),$.ajax({url:form.action,type:"POST",data:formData,contentType:!1,processData:!1,success:function(){ACC.csvimport.displayGlobalAlert({type:"info",message:""}),$("#import-csv-alerts .alert-info").append($("#import-csv-success-message").html()),ACC.csvimport.clearChosenFile()},error:function(jqXHR){400==jqXHR.status&&jqXHR.responseJSON?ACC.csvimport.displayGlobalAlert({type:"error",message:jqXHR.responseJSON}):ACC.csvimport.displayGlobalAlert({type:"error",messageId:"import-csv-generic-error-message"})},complete:function(){ACC.csvimport.enableDisableActionButtons(!0)}}))):ACC.csvimport.displayGlobalAlert({type:"error",messageId:"import-csv-no-file-chosen-error-message"})})},isSelectedFileValid:function(selectedFile){if(window.File&&window.Blob){if(selectedFile){if(selectedFile.type!=ACC.csvimport.TEXT_CSV_CONTENT_TYPE&&selectedFile.type!=ACC.csvimport.APP_EXCEL_CONTENT_TYPE&&selectedFile.type!=ACC.csvimport.TEXT_CSV_LONG_CONTENT_TYPE)return ACC.csvimport.displayGlobalAlert({type:"error",messageId:"import-csv-file-csv-required"}),!1;var fileName=selectedFile.name;if(!fileName||!/\.csv$/i.test(fileName))return ACC.csvimport.displayGlobalAlert({type:"error",messageId:"import-csv-file-csv-required"}),!1}var fileMaxSize=$(".js-file-upload__input").data("file-max-size");if($.isNumeric(fileMaxSize)&&selectedFile&&selectedFile.size>parseFloat(fileMaxSize))return ACC.csvimport.displayGlobalAlert({type:"error",messageId:"import-csv-file-max-size-exceeded-error-message"}),!1}return!0},displayGlobalAlert:function(options){var alertTemplateSelector;switch(ACC.csvimport.clearGlobalAlerts(),options.type){case"error":alertTemplateSelector="#global-alert-danger-template";break;case"warning":alertTemplateSelector="#global-alert-warning-template";break;default:alertTemplateSelector="#global-alert-info-template"}void 0!==options.message&&$("#import-csv-alerts").append($(alertTemplateSelector).tmpl({message:options.message})),void 0!==options.messageId&&$("#import-csv-alerts").append($(alertTemplateSelector).tmpl({message:$(document).find("#"+options.messageId).text()})),$(".closeAccAlert").on("click",function(){$(this).parent(".getAccAlert").remove()})},clearGlobalAlerts:function(){$("#import-csv-alerts").empty()},clearChosenFile:function(){document.getElementById("csvFile").value="",$(".js-file-upload__file-name").text("")},enableDisableActionButtons:function(enable){$("#chooseFileButton").attr("disabled",!enable),$("#importButton").prop("disabled",!enable)}},window.astra||(window.astra={});var deletearray=[],astra=window.astra;window.ACC||(window.ACC={config:{encodedContextPath:{}}});var notFountUrl=ACC.config.encodedContextPath+"/content/astraNotFound_en.htm",windowWidth,maintenance_object={speed:300,slidesToShow:4,prevArrow:'<i class="fa fa-arrow-left slick-prev-btn" aria-hidden="true"></i>',nextArrow:'<i class="fa fa-arrow-right slick-next-btn" aria-hidden="true"></i>',responsive:[{breakpoint:1025,settings:{slidesToShow:4,slidesToScroll:1,dots:!1}},{breakpoint:900,settings:{centerMode:!0,slidesToShow:2,slidesToScroll:1,dots:!0,arrows:!1}},{breakpoint:480,settings:{centerMode:!0,slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,variableWidth:!0}}]},swipeSlickObject={dots:!1,infinite:!1,speed:300,slidesToShow:4,slidesToScroll:4,prevArrow:'<i class="fa fa-arrow-left" aria-hidden="true"></i>',nextArrow:'<i class="fa fa-arrow-right" aria-hidden="true"></i>',responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]},expertSlickObject={dots:0<$(".expert_choice_component").length,infinite:!1,speed:300,slidesToShow:4,slidesToScroll:4,responsive:[{breakpoint:900,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]},supportBannerObject={infinite:!0,slidesToShow:6,slidesToScroll:3,arrow:!0,centerMode:!0,centerPadding:"0",responsive:[{breakpoint:900,settings:{slidesToShow:4,slidesToScroll:1,dots:!1}},{breakpoint:480,settings:{centerMode:!0,slidesToShow:2,slidesToScroll:1,dots:!1}}]},stepsBannerObject={dots:!1,arrows:!1,draggable:!1,swipeToSlide:!1,touchMove:!1,infinite:!1,responsive:[{breakpoint:990,settings:{slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,draggable:!0,swipeToSlide:!0,touchMove:!0}}]};function stickyFooter(){var window__ht=$(window).height();$("main").height()+$("footer").height()<window__ht?$("footer").addClass("footer--sticky"):$("footer").removeClass("footer--sticky")}function startDate($input){return $input.is($(".astra-datepicker input"))||$input.is($("#dob-datepicker input"))||$input.is($("#test-drive-date input"))?"today"==$input.attr("minDate")?new Date:"+1d":$input.is($("input[id = 'payment.scheduled.date.time']"))?"+1d":void 0}function endDate($input){return $input.is($(".astra-datepicker input"))||$input.is($("#dob-datepicker input"))||$input.is($("#test-drive-date input"))||$input.is($("input[id = 'payment.scheduled.date.time']"))?"today"==$input.attr("maxDate")?new Date:"":void 0}function datePicker($input){var workingDays=[],today=new Date;today.setDate(today.getDate()+1);today.getDay();var ComparingDate=new Date;ComparingDate.setDate(ComparingDate.getDate()+15);!function(startDate,endDate){var count=0,curDate=new Date(startDate);for(;curDate<=endDate;){var dayOfWeek=curDate.getDay();if(6!=dayOfWeek&&0!=dayOfWeek){if(!(++count<3))break;workingDays.push(function(date){var d=new Date(date),month=""+(d.getMonth()+1),day=""+d.getDate(),year=d.getFullYear();month.length<2&&(month="0"+month);day.length<2&&(day="0"+day);return[day,month,year].join("-")}(curDate))}else 0;curDate.setDate(curDate.getDate()+1)}}(today,ComparingDate);$input.datepicker("destroy"),$input.is($("#dob-datepicker input"))&&$input.datepicker({format:"dd-mm-yyyy",autoclose:!0,startDate:startDate($input),endDate:endDate($input),daysOfWeekDisabled:[0,6],datesDisabled:workingDays}).on("changeDate",function(e){$(this).removeClass("error"),$(this).parents(".form-group").find("label.error").remove()}),$input.datepicker({format:"dd-mm-yyyy",autoclose:!0,startDate:startDate($input),endDate:endDate($input)}).on("changeDate",function(){$(this).removeClass("error"),$(this).parents(".form-group").find("label.error").remove()})}function sendOTP(mobilenumber,isdCode){$.isNumeric(mobilenumber)&&$.ajax({url:ACC.config.contextPath+"/otp/send-otp",type:"GET",data:{mobileNumber:mobilenumber,isdCode:isdCode.substring(1,3)},success:function(data){"Invalid"===data?$("#errorMessage").addClass("show-error"):$("#otp-popup-Modal").modal("show")},error:function(result){$("#serverMessage").addClass("show-error")}})}function checkSecond(sec){return sec<10&&0<=sec&&(sec="0"+sec),sec<0&&(sec="59"),sec}function startTimer(event){var timeArray=document.getElementById("timer").innerHTML.split(/[:]+/),m=timeArray[0],s=checkSecond(timeArray[1]-1);if(59==s&&--m,m<0)return $("#otp_text").hide(),$(".resend-otp").prop("disabled",!1),$(".resend-otp").removeClass("disabled"),!1;$(".resend-otp").addClass("disabled"),$(".resend-otp").prop("disabled",!0),document.getElementById("timer").innerHTML=(m<10&&m.toString().length<2?"0"+m:m)+":"+(s<10&&s.length<2?"0"+s:s),setTimeout(startTimer,1e3)}function requestForOTP(mobilenumber,isdCode,sucessCallback,errorCallBack){$.isNumeric(mobilenumber)&&($("#otp-mobileNumber").val(mobilenumber),$("#otp-isdCode").val(isdCode.replace("+","")),$("#otpForm").ajaxForm({success:function(data){sucessCallback.apply(this,[data])},error:function(result){errorCallBack.apply(this,[result])}}).submit())}function verifyOTP(mobilenumber,isdCode,otp,sucessCallback,errorCallBack){$("#otpForm").attr("action",$("#verify-otp-url").val()),$.isNumeric(mobilenumber)&&($("#otp-mobileNumber").val(mobilenumber),$("#otp-isdCode").val(isdCode.replace("+","")),$("#otpCode").val(otp),$("#otpForm").ajaxForm({success:function(data){sucessCallback.apply(this,[data])},error:function(result){errorCallBack.apply(this,[result])}}).submit())}function htmldecode(s){return window.HTML_ESC_MAP={nbsp:" ",'"':"quot",amp:"&",lt:"<",gt:">",circ:"ˆ",tilde:"˜",ndash:"–",mdash:"—"},window.HTML_ESC_MAP_EXP||(window.HTML_ESC_MAP_EXP=new RegExp("&("+Object.keys(HTML_ESC_MAP).join("|")+");","g")),s?s.replace(window.HTML_ESC_MAP_EXP,function(x){return HTML_ESC_MAP[x.substring(1,x.length-1)]||x}):s}function dateFormatFunction(responsedate){var d=new Date(responsedate),n=d.toLocaleString([],{hour:"2-digit",minute:"2-digit"});return d.getDate()+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][d.getMonth()]+" "+d.getFullYear()+", "+n}function dateFormatExpected(elem){var token,timezone,timezoneClip,dateFormat=(token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,function(date,mask,utc){var dF=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(date)||/\d/.test(date)||(mask=date,date=void 0),date=date?new Date(date):new Date,isNaN(date))throw SyntaxError("invalid date");"UTC:"==(mask=String(dF.masks[mask]||mask||dF.masks.default)).slice(0,4)&&(mask=mask.slice(4),utc=!0);var _=utc?"getUTC":"get",d=date[_+"Date"](),D=date[_+"Day"](),m=date[_+"Month"](),y=date[_+"FullYear"](),H=date[_+"Hours"](),M=date[_+"Minutes"](),s=date[_+"Seconds"](),L=date[_+"Milliseconds"](),o=utc?0:date.getTimezoneOffset(),flags={d:d,dd:pad(d),ddd:dF.i18n.dayNames[D],dddd:dF.i18n.dayNames[D+7],m:m+1,mm:pad(m+1),mmm:dF.i18n.monthNames[m],mmmm:dF.i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),l:pad(L,3),L:pad(99<L?Math.round(L/10):L),t:H<12?"a":"p",tt:H<12?"am":"pm",T:H<12?"A":"P",TT:H<12?"AM":"PM",Z:utc?"UTC":(String(date).match(timezone)||[""]).pop().replace(timezoneClip,""),o:(0<o?"-":"+")+pad(100*Math.floor(Math.abs(o)/60)+Math.abs(o)%60,4),S:["th","st","nd","rd"][3<d%10?0:(d%100-d%10!=10)*d%10]};return mask.replace(token,function($0){return $0 in flags?flags[$0]:$0.slice(1,$0.length-1)})});function pad(val,len){for(val=String(val),len=len||2;val.length<len;)val="0"+val;return val}dateFormat.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(mask,utc){return dateFormat(this,mask,utc)};var dateString,$this=$(this);($this=elem).text()&&(expectedDate=new Date($this.text()),dateString=expectedDate.format("dd mmm yyyy, HH:MM:ss tt"),$this.text(dateString))}function urlEncode(str){return escape(str).replace(/\+/g,"%2B").replace(/"/g,"%22").replace(/'/g,"%27").replace(/\//g,"%2F").replace(/=/g,"%3D")}$(".astra-datepicker-sellmycar input").datepicker({format:"dd-mm-yyyy",autoclose:!0}),240<$("#totalDescBlock1").height()?($("#totalDescBlock1").css({height:"240px",overflow:"hidden"}),$("#readMoreLink").css("display","inline-block")):($("#totalDescBlock1").css({height:"auto"}),$("#readMoreLink").css("display","none")),$("#readMoreLink").on("click",function(){$("#totalDescBlock1").text();$("body").removeClass("sell-terms"),$("#totalDescBlock1").css({height:"auto",overflow:"visible"}),$("#readMoreLink").css("display","none"),$("#readLessLink").css({display:"inline-block"})}),$("#readLessLink").on("click",function(){$("#totalDescBlock1").css({height:"240px",overflow:"hidden"}),$("#readMoreLink").css("display","inline-block"),$("#readLessLink").css({display:"none"})}),$(window).resize(function(){var timer,sliderExpert=$(".expert_choice_component"),delay=(timer=0,function(callback,ms){clearTimeout(timer),timer=setTimeout(callback,ms)});$(window).width()<768&&($("#totalDescBlock1").css({height:"140px",overflow:"hidden"}),$("#readMoreLink").css("display","inline-block"),$("#readLessLink").css({display:"none"})),$("#totalDescBlock1").removeAttr("style"),140<$("#totalDescBlock1").height()?"inline-block"==$(".product-desc-section #readLessLink").css("display")?($("#totalDescBlock1").css({height:"auto",overflow:"visible"}),$("#readMoreLink").css("display","none"),$("#readLessLink").css({display:"inline-block"})):($("#totalDescBlock1").css({height:"140px",overflow:"hidden"}),$("#readMoreLink").css("display","inline-block")):($("#totalDescBlock1").css({height:"auto"}),$("#readMoreLink").css("display","none")),$(window).width()<992?delay(function(){sliderExpert.hasClass("slick-initialized")||(sliderExpert.slick(expertSlickObject),$(".expert_choice_component .wishlist-items").removeClass("col-sm-6 col-md-4 col-lg-4"))},200):sliderExpert.hasClass("slick-initialized")&&sliderExpert.slick("unslick")}),function($){var winWidth,patterns={lettersOnly:{message:"Letters only",code:/^[a-zA-Z\s]+$/},phoneNumber:{message:"Phone number only",code:/^(?=\d{8,13}$)(8)\d+/},positiveInteger:{message:"Enter only numbers without special characters",code:/^\d+$/},alphaNumeric:{message:"Enter only letters and numbers",code:/^[0-9a-zA-Z]+$/},alphaNumericSpace:{message:"Aplha numeric with Space only",code:/^[0-9a-zA-Z\s]+$/},licensePlateNumber:{message:"Enter only letters and numbers",code:/^[a-zA-Z]+\d+[a-zA-Z]+$/},nameCharacters:{message:"Enter only alphabet, ('), and (-)",code:/^[A-Za-z\s'-]+$/}};astra.global={formValidationInt:function(){0<$(".validation-from").length&&($(".validation-from").each(function(){$(this).validate({errorPlacement:function(error,element){element.is(":input, textarea")?(error.appendTo(element.parents(".form-group").eq(0)),error.appendTo(element.parents(".form-group").eq(0).addClass("error-element"))):error.insertAfter(element)},onfocusout:function(element){$(".datepicker").is(":visible")||this.element(element)},unhighlight:function(element){$(element).parents(".form-group").removeClass("error-element"),$(element).removeClass("error"),$(element).on("change input textInput",function(){$(".errorDuplicate").hasClass("error")&&($(".errorDuplicate").removeClass("error"),$(".errorDuplicate").addClass("hide"))})},messages:{email:{email:"Mohon masukkan alamat email yang benar"}}})}),$(".btn-validation").on("click",function(){$(".validation-from").valid()})),$.validator.addMethod("alphaOnlyCheck",function(value,element){return patterns[$(element).data("rule-pattern")].code.test(element.value)},function(params,element){return null!=$(element).data("msg-letter")?$(element).data("msg-letter"):"Masukkan abjad saja"}),$.validator.addMethod("allowPhonenumber",function(value,element){var isValid,regex=patterns[$(element).data("rule-pattern")].code;return $(element).data("rule-required")&&null==element.value||""!=element.value?isValid=regex.test(element.value):$(element).data("rule-required")||(isValid=!0),isValid},function(params,element){return null!=$(element).data("msg-phone")?$(element).data("msg-phone"):"Masukkan nomor telepon yang valid"}),$.validator.addMethod("positiveInteger",function(value,element){var regex=patterns[$(element).data("rule-pattern")].code;return ACC.config.encodedContextPath,regex.test(element.value)},function(params,element){return null!=$(element).data("msg-positiveInteger")?patterns[$(element).data("rule-pattern")].message:"Enter only numbers without special characters"}),$.validator.addMethod("alphaNumeric",function(value,element){var regex=patterns[$(element).data("rule-pattern")].code;return ACC.config.encodedContextPath,regex.test(element.value)},function(params,element){return null!=$(element).data("msg-alphaNumeric")?patterns[$(element).data("rule-pattern")].message:"Masukkan hanya huruf dan angka"}),$.validator.addMethod("alphaNumericSpace",function(value,element){var isValid,regex=patterns[$(element).data("rule-pattern")].code;return $(element).data("rule-required")&&null==element.value||""!=element.value?isValid=regex.test(element.value):$(element).data("rule-required")||(isValid=!0),isValid},function(params,element){return null!=$(element).data("msg-alphaNumericSpace")?patterns[$(element).data("msg-alphaNumericSpace")].message:"Masukkan tidak ada karakter khusus"}),$.validator.addMethod("licensePlateNumber",function(value,element){var regex=patterns[$(element).data("rule-pattern")].code;return ACC.config.encodedContextPath,regex.test(element.value)},function(params,element){return null!=$(element).data("msg-licensePlateNumber")?patterns[$(element).data("rule-pattern")].message:"Masukkan hanya huruf dan angka"}),$.validator.addMethod("nameCharacters",function(value,element){return patterns[$(element).data("rule-pattern")].code.test(element.value)},function(params,element){return null!=$(element).data("msg-nameCharacters")?$(element).data("msg-nameCharacters"):"Hanya boleh diisi alfabet, ('), dan (-)"}),$(".termsAndConditionsLink,.privacyPolicyLink").on("click",function(e){e.preventDefault(),$.colorbox({maxWidth:"100%",maxHeight:"80%",width:"870px",scrolling:!0,closeButton:!0,className:"terms--overlay",href:$(this).attr("href"),title:$(this).hasClass("termsAndConditionsLink")?"Terms & Conditions of Use":"Privacy Policy",onComplete:function(){var scrollSpace=window.innerWidth<650?"-20px":"-40px";$(".terms--overlay #cboxLoadedContent").css("margin-left",scrollSpace)}})})},home:function(){var ua=navigator.userAgent.toLowerCase();-1!=ua.indexOf("safari")&&(-1<ua.indexOf("chrome")?$("body").addClass("astra-chrome"):$("body").addClass("astra-safari")),$(".login-content .googleNavigation").colorbox({className:"astra-popup",closeButton:!0,inline:!0,width:"90%",maxWidth:"750px"}),$(".__logo a").attr("target","_blank"),$("body").append("<div class='hideScreen'></div>"),$(".lang_dropdown").on("click",function(){$(this).toggleClass("active-dropdown"),$("body").toggleClass("lang_overlay"),$(this).parents(".astra-auto-header").find(".search_container").toggleClass("astra-navbar"),$(".hideScreen").toggleClass("apply"),$(".__dealer-locator .__dropdown").slideToggle()}),$(".__dealer-locator .__dropdown li").on("click",function(){var lang=$(this).data("lang");$("#lang-selector-form").val(lang),$("#lang-form").submit()}),$(".top-nav-links .top-seva-links").wrapAll("<li class='top-links'><ul class='top-seva'></ul></li>"),$(".top-links").prepend("<span class='top-link-text dropdown_arrow'></span>"),$(".top-link-text").html($(".top-seva li:first-child").text()),$(".top-seva-links").css({opacity:"1",display:"block"}),$(".top-link-text").on("click",function(){$(this).toggleClass("active-dropdown"),$(".top-seva").slideToggle(),$("body").toggleClass("lang_overlay"),$(".hideScreen").toggleClass("apply")}),$("#nav-icon3").click(function(){$(this).toggleClass("open"),$(".astra-auto-header").toggleClass("change-pos"),$("html, body").animate({scrollTop:0}),$(this).hasClass("open")?$(".hideScreen").addClass("apply"):$(".hideScreen").removeClass("apply"),$(this).parents(".__nav-container").find(".__desktop-nav").slideToggle(),$(this).parents(".__nav-container").find(".__action .account_items").slideToggle(),$(".__desktop-nav li:nth-child(2) .dropdown_arrow a").addClass("active"),"block"!=$(".search_container").css("display")&&"block"!=$(".user_account_menu.notifications_menu").css("display")||($(".search_container, .user_account_menu.notifications_menu").hide(),$(".icon-search").removeClass("close"))}),$(".__desktop-nav li.nav__links--primary").find(".__desktopview").length&&$(".__desktopview").parent("li.nav__links--primary").addClass("sub_menu_secondary"),$(".sub_menu_secondary > a").on("click",function(){(winWidth=$(window).width())<990&&($(this).toggleClass("active"),$(this).parent().find(".__desktopview").slideToggle())});var $sub_menu=$(".sub_menu_secondary, .user_account_item");768<$(window).width()&&($sub_menu.on("mouseover",function(event){$(".hideScreen").addClass("apply")}),$sub_menu.on("mouseout",function(){$(".hideScreen").removeClass("apply")})),$(".sub_menu_secondary li > span.dropdown_arrow").on("click",function(e){(winWidth=$(window).width())<990&&(e.preventDefault(),$(this),$(this).toggleClass("active-dropdown"),$(".sub_menu_secondary li > span").not(this).removeClass("active-dropdown"),$(this).parent().find(".submenu_second").is(":visible")?$(this).parent().find(".submenu_second").slideToggle():($(".submenu_second").slideUp("slow"),$(this).parent().find(".submenu_second").slideDown("slow")))}),$(".__desktop-nav .glyphicon-chevron-right").on("click",function(){$(this).next(".__desktopview").slideToggle(),$(this).prev(".dropdown_arrow").find("a").toggleClass("active")}),$(".__action .icon-search").on("click",function(){$("body").toggleClass("fixed-search"),$(this).toggleClass("close"),$(".search_container").slideToggle(),$(".search_container .icon-search").toggleClass("close"),astra.global.astraLazyLoad.update(),setTimeout(function(){$(".search_input #js-site-search-input").focus()},300),$(window).width()<994&&($(".__desktop-nav").is(":visible")||$(".__nav-container .notifications_menu").is(":visible"))&&($("#nav-icon3").removeClass("open"),$(".hideScreen").removeClass("apply"),$(".__desktop-nav, .__action .account_items, .__nav-container .notifications_menu").hide())}),$(".search_container .icon-search").on("click",function(){$(".search_container .icon-search").removeClass("close"),$(".search_input #js-site-search-input").val("")});var notifications_menu=$(".notifications_item"),notifications_menu_items=$(".notifications_item .notifications_menu li.unread");0<$(notifications_menu_items).length&&$(notifications_menu).addClass("notified"),$(window).width()<994&&$(".notifications_item").on("click",function(){$(".__nav-container .notifications_menu").slideToggle(),$(".hideScreen").toggleClass("apply"),($(".__desktop-nav").is(":visible")||$(".search_container").is(":visible"))&&($("#nav-icon3").removeClass("open"),$(".icon-search").removeClass("close"),$(".hideScreen").addClass("apply"),$(".__desktop-nav, .__action .account_items, .search_container").hide())}),$(".main-banner").slick({dots:!0,arrows:!1}),$(".steps-banner").slick(stepsBannerObject),$(".component .items").each(function(){var items_count=$(this).find(" > div").length,items_width=$(this).find(" > div").width()==$(".new-to-content-inner").width()?$(this).find(" > div").width()+$(".space").width():$(this).find(" > div").width();$(this).width(items_count*items_width)}),$(".component .items_list, .component .items_list ~ .label-message").on("click",function(){var id_attr=$(this).parent().find(".items_list").attr("id");$(".new-to-content-outer").removeClass("active"),$(this).parents(".new-to-content-outer").addClass("active"),$(".steps-banner").slick("slickGoTo",id_attr)}),$(".new-to-astra-steps .tab-lg__content .slick-dots li").on("click",function(){$(this).each(function(){var positionleft,li_id=$(this).find("button").attr("id"),currDivelem=$(this).parents(".tab-lg__content").find('div[for="'+li_id+'"]'),sliderindex=$(this).find("button").attr("aria-label"),leftValue=0,prevDivelem=$(this).parents(".tab-lg__content").find('div[for="'+li_id+'"]'),$prevDivFirst=$(prevDivelem[0]),curId=$(currDivelem[0]).attr("id"),prevId=$prevDivFirst.attr("id");void 0===prevId?leftValue=-50:prevId<curId&&2==curId?leftValue=20:prevId<curId&&3==curId?leftValue=90:prevId<curId?leftValue=120:curId<prevId&&(leftValue=-120),positionleft=parseInt(sliderindex.charAt(0),10)*$(currDivelem[0]).width()+leftValue,$prevDivFirst.closest(".component").scrollLeft(positionleft),$prevDivFirst.trigger("click")})}),$(".maintenance-banner").slick(maintenance_object),$(".explore-cars-banner").slick({infinite:!0,slidesToShow:3,slidesToScroll:3,arrow:!0,centerMode:!0,centerPadding:"0",responsive:[{breakpoint:1200,settings:{slidesToShow:3,slidesToScroll:1,dots:!1}},{breakpoint:992,settings:{slidesToShow:1,slidesToScroll:1,dots:!1}},{breakpoint:480,settings:{centerMode:!0,slidesToShow:1,slidesToScroll:1,dots:!1}}]}).on("beforeChange",function(event,slick,currentSlide,nextSlide){$(".slick-active .content").css("opacity",0),$(".slick-current .content").css("opacity",1)}).on("afterChange",function(event,slick,currentSlide,nextSlide){$(".slick-active .content").css("opacity",0),$(".slick-current .content").css("opacity",1)}),$(".news__slider-main").slick({infinite:!0,slidesToShow:1,slidesToScroll:1,arrow:!0,centerMode:!0,centerPadding:"0",responsive:[{breakpoint:900,settings:{slidesToShow:1,slidesToScroll:1,dots:!0}},{breakpoint:480,settings:{centerMode:!0,slidesToShow:1,slidesToScroll:1,dots:!0}}]}),$(".news__slider-thmb li").on("mouseover",function(){var id_attr=$(this).attr("id");$(".news__slider-main").slick("slickGoTo",id_attr)}),$(".news__slider-thmb .slick-slide").removeClass("slick-active"),$(".news__slider-thmb .slick-slide").eq(0).addClass("slick-active"),$(".news__slider-main").on("beforeChange",function(event,slick,currentSlide,nextSlide){var mySlideNumber=nextSlide;$(".news__slider-thmb .slick-slide").removeClass("slick-active"),$(".news__slider-thmb .slick-slide").eq(mySlideNumber).addClass("slick-active")}),$(".supported-banner").slick(supportBannerObject),$("#SEO_text_container")&&$("#SEO_text_container").tinyscrollbar({thumbSize:1});var $swipeTabHeadScroll=$(".swipeTabs");$swipeTabHeadScroll.tinyscrollbar({thumbSize:1,axis:"x"});var $swipeTabsContainer=$(".swipe-tabs"),$swipeTabs=$(".swipe-tab"),$swipeTabsContentContainer=$(".swipe-tabs-container"),$swipetabcontent=$(".swipe-tab-content"),currentIndex=0;$swipeTabsContainer.on("init",function(event,slick){currentIndex=slick.getCurrent(),$(this).parents(".recommendations_section").find($swipeTabs).removeClass("active-tab"),$(this).parents(".recommendations_section").find($(".swipe-tab[data-swipe-index="+currentIndex+"]")).addClass("active-tab")}),$swipeTabsContainer.find(".swipe-tab").length<=4?($swipeTabsContainer.siblings().css("display","none"),$swipeTabsContainer.find(".scrollbar").hide()):($swipeTabsContainer.siblings().css("display","inline-block"),$swipeTabsContainer.find(".scrollbar").show()),$swipeTabsContentContainer.slick({slidesToShow:1,slidesToScroll:4,arrows:!1,infinite:!1,swipeToSlide:!0,touchThreshold:10,swipe:!1}),$swipetabcontent.slick(swipeSlickObject),$swipeTabs.on("click",function(event){currentIndex=$(this).data("swipe-index"),$(this).parents(".recommendations_section").find($swipeTabs).removeClass("active-tab"),$(this).parents(".recommendations_section").find($(".swipe-tab[data-swipe-index="+currentIndex+"]")).addClass("active-tab"),$(this).parents(".recommendations_section").find($swipeTabsContentContainer).slick("slickGoTo",currentIndex,!0),currentIndex=parseInt(currentIndex,10)}),$swipeTabsContentContainer.find(".slick-track > .swipe-tab-content").each(function(){""==$(this).find(".slick-track").html()?$(".recommendations_section").find(".swipeTabs .swipe-tab[data-swipe-index ='"+$(this).data("slick-index")+"']").remove():(console.log($(this).find(".slick-track").html()),$(".recommendations_section").find(".swipeTabs .swipe-tab[data-swipe-index ='"+$(this).data("slick-index")+"']").removeClass("hide"))}),$(".recommendations_section .swipeTabs .swipe-tab").removeClass("active-tab"),$(".recommendations_section .swipeTabs .swipe-tab:first-child").addClass("active-tab"),$(".recommendations_section .swipeTabs .swipe-tab").each(function(){$(this).hasClass("active-tab")&&(currentIndex=$(this).data("swipe-index"),$(this).parents(".recommendations_section").find($swipeTabs).removeClass("active-tab"),$(this).parents(".recommendations_section").find($(".swipe-tab[data-swipe-index="+currentIndex+"]")).addClass("active-tab"),$(this).parents(".recommendations_section").find($swipeTabsContentContainer).slick("slickGoTo",currentIndex,!0),currentIndex=parseInt(currentIndex,10))}),$("#swipe-tab-recentlyviewed").hasClass("active-tab")&&$.ajax({url:ACC.config.encodedContextPath+"/get-recentlyviewed-items",async:!0,type:"GET",success:function(response){var recentlyViewedHTML,recentlyViewedAppendedHTML="";0<response.length?(response.forEach(function(product){console.log(product),console.log(ACC.astra.defaultProductUrl);var productImageUrl=ACC.astra.defaultProductUrl,productPrice="";null!=product.price&&null!=product.price.formattedValue&&(productPrice=product.price.formattedValue),null!=product.images&&0<product.images.length&&null!=product.images[0]&&(productImageUrl=product.images[0].url),recentlyViewedHTML="<a href='"+ACC.config.encodedContextPath+product.url+"' class='images_section'> <div class='img-wrapper-recoment'><img src='"+productImageUrl+"'></div><div class='content'> <p class='car-title'>"+product.name+"</p> <p class='car-price'>"+productPrice+"</p> </div> </a>",recentlyViewedAppendedHTML=recentlyViewedHTML+recentlyViewedAppendedHTML}),$("#recently_viewed").slick("unslick"),$("#recently_viewed").html(recentlyViewedAppendedHTML),$("#recently_viewed").slick({dots:!1,infinite:!1,speed:300,slidesToShow:4,slidesToScroll:4,prevArrow:'<i class="fa fa-arrow-left" aria-hidden="true"></i>',nextArrow:'<i class="fa fa-arrow-right" aria-hidden="true"></i>',responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}),currentIndex=$("#swipe-tab-recentlyviewed").data("swipe-index"),$(this).parents(".recommendations_section").find($swipeTabs).removeClass("active-tab"),$(this).parents(".recommendations_section").find($(".swipe-tab[data-swipe-index="+currentIndex+"]")).addClass("active-tab"),$(this).parents(".recommendations_section").find($swipeTabsContentContainer).slick("slickGoTo",currentIndex,!0),currentIndex=parseInt(currentIndex,10)):(console.log("Error in recently viewed product"),$("#serverMessage").addClass("show-error"))},error:function(result){console.log("Error in recently viewed product"),$("#serverMessage").addClass("show-error")}});var initiateScroll=$swipeTabHeadScroll.data("plugin_tinyscrollbar");(windowWidth=$(window).width())<500&&($(".swipeTabs .swipe-tab.active-tab").next().addClass("nextItem"),$(".swipeTabs .swipe-tab.active-tab").prev().addClass("prevItem")),$(".swipeTabs .swipe-tab").on("click",function(){var getIndex=$(this).index();if(totalWidth=0,$(".swipeTabs .swipe-tab").removeClass("current"),windowWidth<500)return 0===getIndex?initiateScroll.update(0):function(ele){var totalWidth=0;$(ele).prevAll().addClass("current"),$(".swipeTabs .swipe-tab.current").each(function(index){totalWidth+=parseInt($(this).width())}),$(ele).parents(".swipeTabs").data("plugin_tinyscrollbar").update(totalWidth)}(this),$(this).parents(".recommendations_section").find($(".swipeTabs .swipe-tab")).removeClass().addClass("swipe-tab"),$(this).removeClass().addClass("swipe-tab active-tab"),$(this).next().addClass("nextItem"),$(this).prev().addClass("prevItem"),!1}),$(window).resize(function(){500<(windowWidth=$(window).width())?$(".swipeTabs .swipe-tab").removeClass("prevItem nextItem"):($(".swipeTabs .swipe-tab.active-tab").next().addClass("nextItem"),$(".swipeTabs .swipe-tab.active-tab").prev().addClass("prevItem"))})},chat:function(){var cssObject={".meshim_widget_components_chatWindow_chatPanel_ChatPanelHeader .card .avatar_cell .profile_avatar":{width:"35px",height:"35px","border-radius":"50%"},".meshim_widget_components_chatWindow_chatPanel_ChatPanelHeader .card .avatar_cell":{width:"auto"},".meshim_widget_components_chatWindow_ChatPanel .chat_panel_container .served_by_container":{"padding-top":"24px",height:"70px"},".meshim_widget_widgets_TitleBar.title_bar.desktop":{height:"40px","padding-top":"10px"},".meshim_widget_widgets_TitleBar.ltr .title":{"padding-left":"40px","text-align":"left","padding-right":"60px","font-family":"'Rubik',sans-serif","font-size":"14px",color:"white","font-weight":"normal","letter-spacing":"0.5px"},".meshim_widget_widgets_TitleBar.ltr .icons":{"padding-top":"7px"},".meshim_widget_components_ChatWindow":{"font-family":"'Rubik', sans-serif"},".meshim_widget_components_chatWindow_chatPanel_ChatLogContainer.chat_log":{top:"20px"},".meshim_widget_widgets_chatLogRenderer_ChatBubble":{padding:"12px 12px"},".meshim_widget_widgets_chatLogRenderer_ChatBubble.ltr.right .arrow":{display:"none"},".meshim_widget_widgets_chatLogRenderer_ChatBubble.ltr.left .arrow":{display:"none"},".meshim_widget_components_chatWindow_chatPanel_ChatPanelHeader .rating_cell":{display:"none"},".meshim_widget_widgets_AgentProfileCard .profile_name":{"font-weight":"600",color:"black","padding-bottom":"5px"},".meshim_widget_components_chatWindow_chatPanel_ChatPanelHeader .card .content_cell":{width:"230px"},".meshim_widget_widgets_AgentProfileCard .profile_title":{color:"#cecece"},".meshim_widget_widgets_chatLogRenderer_BubbleAvatarRenderer .log_avatar":{"border-radius":"50%",width:"35px",height:"35px"},".meshim_widget_components_chatWindow_chatPanel_ChatLog .agent .chat_bubble":{"background-color":"#f2f2f2",border:"none"},".meshim_widget_components_chatWindow_chatPanel_ChatLog .visitor .chat_bubble":{"background-color":"#f2f2f2",border:"none"},".meshim_widget_widgets_chatLogRenderer_BubbleAvatarRenderer .chat_bubble":{margin:"0 15px"},".meshim_widget_widgets_chatLogRenderer_BubbleAvatarRenderer td":{"vertical-align":"top"},".meshim_widget_widgets_chatLogRenderer_BasicRenderer .chat_name":{"padding-bottom":"4px"},".meshim_widget_components_chatWindow_chatPanel_ChatTextArea .textarea::-webkit-input-placeholder":{opacity:"0"},".meshim_widget_components_chatWindow_chatPanel_ChatLogContainer .group_head":{"margin-top":"15px"},".meshim_widget_components_chatWindow_chatPanel_ChatTextArea .fake_input.focus":{"box-shadow":"none"},".meshim_widget_widgets_FakeInput.focus":{"border-color":"#DDD"},".meshim_widget_components_chatWindow_chatPanel_ChatTextArea":{"background-color":"#fff"},".meshim_widget_components_chatWindow_chatPanel_ChatLogContainer .chat_log_wrapper":{"padding-bottom":"30px"}},cssChObj={".meshim_widget_components_chatButton_ButtonBar.button_bar":{"background-color":"#ec2156"},".meshim_widget_components_chatButton_ButtonBar .favicon":{"background-color":"#ec2156"}};setTimeout(function(){var chatWindow=$(".zopim[data-test-id='ChatWidgetWindow'] iframe").contents().find("html"),chatUsWindow=$(".zopim[data-test-id='ChatWidgetButton'] iframe").contents().find("html");chatWindow.find("head").append('<link href="https://fonts.googleapis.com/css?family=Rubik:400,500,700" rel="stylesheet">'),chatUsWindow.find("head").append('<link href="https://fonts.googleapis.com/css?family=Rubik:400,500,700" rel="stylesheet">');var chatWinStyle=(chatWinStyle=JSON.stringify(cssObject).replace(/\"/g,"").replace(/\,/g,";").replace(/\:{/g,"{").replace(/\};/g,";}")).substr(0,chatWinStyle.length-1).substr(1),chatUsWinStyle=(chatUsWinStyle=JSON.stringify(cssChObj).replace(/\"/g,"").replace(/\,/g,";").replace(/\:{/g,"{").replace(/\};/g,";}")).substr(0,chatUsWinStyle.length-1).substr(1);chatWindow.find("head").append("<style>"+chatWinStyle+"</style>"),chatUsWindow.find("head").append("<style>"+chatUsWinStyle+"</style>"),$(".zopim:first").addClass("blockiFrame"),$(".zopim:first").next().addClass("blockiFrameChat")},5e3)},pdpPage:function(){var productCode,productCodeElement=document.getElementById("productCodeForRecentItem");if(null!=productCodeElement&&(productCode=productCodeElement.value,$.ajax({url:ACC.config.encodedContextPath+"/add-recentlyviewed-item?productCode="+productCode,async:!1,type:"GET",success:function(response){},error:function(result){$("#serverMessage").addClass("show-error")}})),$(".share-product").on("click",function(e){e.preventDefault(),$(this).toggleClass("active"),$(".product-color").toggleClass("index-back")}),$(window).width()<350&&$("h2").height()<=32&&($(".prdt-btn").css("align-self","start"),$(".prdt-name-btn").css("height","72px"),$("h2").css("height","30px")),$(".used_car_customer_contact .logged").on("click",function(e){990<$(window).width()?(e.preventDefault(),$(this).toggleClass("active")):$(".used_car_customer_contact a").attr("href","tel:"+$(".mobile-hide .used_car_customer_contact .share-list").text().trim())}),$(".used_car_customer_contact").on("click",function(e){window.mediator.publish("trackButtonForPDP",{eventName:"generalEvent",eventCategory:"Product Title Per Detail Product",eventAction:"Click on Button",eventLabel:"Phone Icon"})}),$("#addToCartButtonBuyNow").on("click",function(e){var buttonName=$("#addToCartButtonBuyNow").text().trim(" ");window.mediator.publish("trackButtonForPDP",{eventName:"generalEvent",eventCategory:"Product Title Per Detail Product",eventAction:"Click on Button",eventLabel:buttonName})}),$(document).on("click",function(event){$(event.target).is(".hide-document")||($(".share-product").removeClass("active"),$(".used_car_customer_contact .logged").removeClass("active"),$(".product-color").removeClass("index-back"))}),$(".page-productDetails"))for(var sections=$(".pdp-empty"),$dots=$(".list-group-scroll"),i=0;i<sections.length;i++){var sec_id,$section=$(sections[i]);0===$section.children().length&&($section.hide(),sec_id=$section.hasClass("scroll-section")?$section.attr("id"):$section.closest(".scroll-section").attr("id"),$dots.find("a[href='#"+sec_id+"']").parent().remove())}0<$(".take-journey-items").length&&$(".take-journey-items").slick({dots:!1,arrows:!1,slidesToShow:5,responsive:[{breakpoint:991,settings:{slidesToShow:1,slidesToScroll:1,dots:!0,arrows:!1}}]}),$(".js-size-variant-product-navigation").on("click",function(){window.location.href=$(this).data("size-variant-product-url")});var $newLookSlider=$(".pdp_image_gallery_items-popup");$newLookSlider.on("init reInit afterChange",function(event,slick,currentSlide,nextSlide){$("body .img_loader").remove(),$("body").removeClass("pdp_img_gallery");var i=(currentSlide||0)+1;0<slick.slideCount&&$(".pagingInfo-slider").html(i+"&nbsp; of &nbsp;"+slick.slideCount)});0<$(".product-color").length&&$(".product-color li").each(function(){var hexcode=$(this).data("hexcode");$(this).addClass(function(colorCode){for(var red,green,hexCode=colorCode.replace(/\s+/g,"").replace("#",""),blue=3<hexCode.length?(red=parseInt(hexCode.substring(0,2),16),green=parseInt(hexCode.substring(2,4),16),parseInt(hexCode.substring(4,6),16)):(red=parseInt(Array(3).join(hexCode.substring(0,1)),16),green=parseInt(Array(3).join(hexCode.substring(1,2)),16),parseInt(Array(3).join(hexCode.substring(2,3)),16)),color=[red/255,green/255,blue/255],i=0;i<color.length;++i)color[i]<=.03928?color[i]=color[i]/12.92:color[i]=Math.pow((color[i]+.055)/1.055,2.4);return.49<.2126*color[0]+.7152*color[1]+.0722*color[2]?"dark-pallet":"light-pallet"}(hexcode))});var getLen1=$(".like-slider");0<getLen1.length&&getLen1.slick({speed:300,slidesToShow:4,slidesToScroll:1,infinite:!0,responsive:[{breakpoint:1025,settings:{slidesToShow:4,slidesToScroll:1,dots:!1}},{breakpoint:900,settings:{centerMode:!0,slidesToShow:2,slidesToScroll:1,dots:!0,arrows:!1}},{breakpoint:480,settings:{centerMode:!0,slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,variableWidth:!0}}]}),$('.con-tooltip input[type="checkbox"]').on("change",function(){var checked=$(this).is(":checked");$(".hot-spot__wrapper").removeClass("tooltip-selected"),$(".hot-spot__input").removeClass("tooltip-selected-inner"),checked?($(this).parents(".hot-spot__wrapper").addClass("tooltip-selected"),$(this).closest(".hot-spot__input").addClass("tooltip-selected-inner")):($(".hot-spot__wrapper").removeClass("tooltip-selected"),$(".hot-spot__input").removeClass("tooltip-selected-inner"))}),$(".hot-spot__wrapper--content .hot-spot__input").each(function(){var getLeftPos=$(this).find(".con-tooltip");500<parseInt(getLeftPos.css("left"),10)&&$(this).addClass("over-right-pos")});$(".pdp_bundle_types")&&$(window).on("resize load",function(){setTimeout(function(){(winWidth=$(window).width())<767?($("body").addClass("overflowXhidden"),$(".pdp_tabs").css("width",winWidth-15),$(".reloadtab").height(""),$(".reloadtab").each(function(){var liItems=$(this),Sum=0;1<=liItems.children("li").length&&($(this).children("li").each(function(i,e){Sum+=$(e).outerWidth(!0)}),$(this).width(Sum+10))})):$(".pdp_tabs, .reloadtab").css("width","100%")},500)}),$(".scroll-text-container").tinyscrollbar({thumbSize:1}),$("#clearCreditCalculator").on("click",function(){$("#precentageval1").val("DP"),$("#tenorval1").val("Tenor"),$("#downPayment1").val(""),$("#Installments1").val(""),$("#precentageval1").change(),$("#tenorval1").change()}),$("#precentageval1,#tenorval1").on("change",function(){var valPercentage1,valTenor,valPercentage=$("#precentageval1").val();null!=valPercentage?(valPercentage1=valPercentage.toString(),$("input[name*='percent']").val(valPercentage1),valTenor=$("#tenorval1").val(),$("input[name*='tenor']").val(valTenor),null!=valPercentage&&null!=valTenor&&creditCalculatorPDPUsed()):($("input[name*='percent']").val(null),$("input[name*='tenor']").val(null))});var creditCalculatorPDPUsed=function(){var options={percentage:$("#precentageval1").val(),tenor:$("#tenorval1").val(),price:$("#price").val(),productCode:$("#base-productCode").val(),productCondition:$("#base-productType").val()};$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/calculatorval",async:!0,data:options,type:"POST",beforeSend:function(){$(".ajax-loader").css("visibility","visible")},success:function(response){var price;null!=response.systemErrorMessage?window.location.href=notFountUrl:($.each(response.out_DATA,function(key,value){$("#downPayment1").val(value.tot_pay_first).change(),$("#Installments1").val(value.amt_installment).change()}),price="USEDCARREGULAR"==$("#base-productCode").val()?$("#product-price").val():$("#price").val(),window.mediator.publish("trackCreditForPDPAndCheckoutPage",{eventName:"generalEvent",eventCategory:"Astra Credit Calculator",eventAction:"PDP",carBrand:$("#product-brandname").val(),carModel:$("#product-modelname").val(),carPrice:getFormatValue(price),carVariant:$("#product-variantname").val(),downPayment:$("#precentageval1").val(),tenureLength:$("#tenorval1").val(),downPaymentRupiah:getFormatValue($("#downPayment1").val()),tenureRupiah:getFormatValue($("#Installments1").val())}))},complete:function(){$(".ajax-loader").css("visibility","hidden")}})},getFormatValue=function(price){var formatValue=price.split(".");return formatValue.shift(),formatValue.join("").trim()},$swipePDPContainer=$(".swipe-tabs"),$swipeTabsPDP=$(".swipe-tab"),$swipeTabsPDPContentContainer=$(".pdp_image_container"),$swipetabcontentPDP=$(".pdp_image_gallery_items"),currentIndex=0;$swipePDPContainer.on("init",function(event,slick){currentIndex=slick.getCurrent(),$(this).parents(".pdp_image_gallery").find($swipeTabs).removeClass("active-tab"),$(this).parents(".pdp_image_gallery").find($(".swipe-tab[data-swipe-index="+currentIndex+"]")).addClass("active-tab")});var getFullHtml=$swipeTabsPDPContentContainer.html(),getData=$("<div>"+getFullHtml+"</div>").find("#exteriors").html();$(".pdp_image_gallery_items-popup").empty(),$(".pdp_image_gallery_items-popup").append(getData),$(".pdp_img_gallery_spec").slick({infinite:!1,speed:300,draggable:!1,swipe:!1,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,arrows:!0}),$swipeTabsPDP.on("click",function(event){currentIndex=$(this).data("swipe-index");$(this).data("pdpgallery-index");$(this).parents(".pdp_image_gallery").find($swipeTabsPDP).removeClass("active-tab"),$(this).parents(".pdp_image_gallery").find($(".swipe-tab[data-swipe-index="+currentIndex+"]")).addClass("active-tab"),$(this).parents(".pdp_image_gallery").find($swipeTabsPDPContentContainer).slick("slickGoTo",currentIndex,!0),currentIndex=parseInt(currentIndex,10),$(".pdp_image_gallery_items-popup").empty();var popupId="#"+$(this).data("show"),getData=$("<div>"+getFullHtml+"</div>").find(popupId).html();$(".pdp_image_gallery_items-popup").append(getData),$newLookSlider.removeClass("slick-initialized slick-slider")}),$(".pdp_image_gallery_new_items .img_block-customs").on("click",function(e){$("body").append("<div class='img_loader'></div>"),$("body").addClass("pdp_img_gallery");var index=$(this).data("slick-index");$("#gallery-popup").modal("show"),$newLookSlider.hasClass("slick-initialized")&&$newLookSlider.slick("unslick"),$newLookSlider.css("visibility","hidden"),$("#gallery-popup").one("shown.bs.modal",function(){astra.global.astraLazyLoad.update(),$newLookSlider.not(".slick-initialized").slick({dots:!1,arrows:!0,slidesToShow:1,infinite:!1}),$newLookSlider.slick("setPosition"),$newLookSlider.slick("slickGoTo",index,!0),$newLookSlider.css("visibility","visible")})}),$(".prdt-specs .more_spec").on("click",function(e){$(".more_spec_content").toggle()});var $newLookSlider1=$(".prdt-main-img__slider1");$(".prdt-main-img__used .prdt-main-img__slide").on("click",function(e){$("body").append("<div class='img_loader'></div>"),$("body").addClass("pdp_img_gallery");var index=$(this).data("slick-index");$("#gallery-popup1").modal("show"),$newLookSlider1.hasClass("slick-initialized")&&$newLookSlider1.slick("unslick"),$newLookSlider1.css("visibility","hidden"),$("#gallery-popup1").one("shown.bs.modal",function(){astra.global.astraLazyLoad.update(),$newLookSlider1.not(".slick-initialized").slick({dots:!1,arrows:!0,slidesToShow:1,infinite:!1}),$newLookSlider1.slick("setPosition"),$newLookSlider1.slick("slickGoTo",index,!0),$newLookSlider1.css("visibility","visible"),$("body .img_loader").remove(),$("body").removeClass("pdp_img_gallery")})}),$(".pdp-usedcar-for").slick({slidesToShow:1,variableWidth:!0,slidesToScroll:1,arrows:!0,fade:!1,centerMode:!0,centerPadding:"0px",asNavFor:".pdp-usedcar-nav"}),$(".pdp-usedcar-nav").slick({slidesToShow:4,slidesToScroll:1,focusOnSelect:!0,arrows:!1,asNavFor:".pdp-usedcar-for"}),$(".bundle_types-one .pdp_bundle_types").slick({slidesToShow:3,slidesToScroll:1,arrows:!0,infinite:!0,responsive:[{breakpoint:992,settings:{slidesToShow:2,slidesToScroll:1,variableWidth:!0}}]}),$(".bundle_types-three .pdp_bundle_types").slick({slidesToShow:3,slidesToScroll:1,arrows:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:794,settings:{slidesToShow:1,slidesToScroll:1,arrows:!1}}]}),$(".pdp-related-container .row").slick({slidesToShow:4,slidesToScroll:1,arrows:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:794,settings:{slidesToShow:2,slidesToScroll:1,arrows:!1}}]}),$(".used-pdp-like .center-mode").slick({slidesToShow:4,slidesToScroll:1,arrows:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:794,settings:{slidesToShow:2,slidesToScroll:1,centerMode:!0,centerPadding:"30px",arrows:!1}}]}),$(".used-pdp-like .variable-mode").slick({slidesToShow:4,slidesToScroll:1,arrows:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:794,settings:{slidesToShow:2,slidesToScroll:1,variableWidth:!0,arrows:!1}}]}),$(".four-colum").slick({slidesToShow:4,slidesToScroll:1,arrows:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:794,settings:{slidesToShow:2,slidesToScroll:1,arrows:!1}}]}),$(".pdp__new-car .center-mode").slick({slidesToShow:4,slidesToScroll:1,arrows:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:794,settings:{slidesToShow:2,slidesToScroll:1,centerMode:!0,centerPadding:"30px",arrows:!1}}]}),$(".pdp__new-car .variable-mode").slick({slidesToShow:4,slidesToScroll:1,arrows:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:794,settings:{slidesToShow:2,slidesToScroll:1,variableWidth:!0,arrows:!1}}]}),$(".static_content_slider1").slick({slidesToScroll:1,variableWidth:!0,slidesToShow:3,arrows:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:794,settings:{slidesToShow:2,slidesToScroll:1,arrows:!1}}]}),$(".video-section-usedcar, .video-section-usedcar-multi").slick({slidesToScroll:1,slidesToShow:1,variableWidth:!0,arrows:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:794,settings:{slidesToShow:1,slidesToScroll:1,arrows:!1}}]}),$swipeTabsPDPContentContainer.slick({slidesToShow:1,slidesToScroll:4,arrows:!1,infinite:!1,swipeToSlide:!0,touchThreshold:10,dots:!1}),$swipetabcontentPDP.slick({dots:!0,infinite:!1,speed:300,slidesToShow:4,slidesToScroll:4,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]});function onScroll(event,userScroll){var footer__screen__pos,scrollPos=$(document).scrollTop(),$listScroll=$(".list-group-scroll"),el__pos__bottom=$listScroll.outerHeight(!0),scrolled__up=$(window).scrollTop();$(".maintenance-steps").length&&(footer__screen__pos=$(".maintenance-steps").offset().top-scrolled__up+90),footer__screen__pos<=el__pos__bottom?$listScroll.addClass("stick-scroll"):$listScroll.removeClass("stick-scroll"),$(".list-group-scroll li").each(function(){var currLink=$(this).find("a"),refElement=$(currLink.attr("href"));0<$(refElement).length&&(refElement.position().top<=scrollPos+100&&refElement.position().top+refElement.height()>scrollPos?($(".list-group-scroll li a").removeClass("active"),currLink.addClass("active")):currLink.removeClass("active"))})}$(document).on("scroll",function(e){$(document).on("scroll",onScroll)}),$('.list-group-scroll a[href^="#"]').on("click",function(e){e.preventDefault(),$(document).off("scroll"),$(".list-group-scroll a").each(function(){$(this).removeClass("active")}),$(this).addClass("active").trigger("mouseenter");var target=this.hash;$target=$(target),$("html, body").stop().animate({scrollTop:$target.offset().top+4},500,function(){window.location.hash=$target,$(document).on("scroll",onScroll)})}),$(".pdp--copy_link").on("click",function(e){var currentUrl=window.location.href;$("#currentURL").attr("value",currentUrl),document.getElementById("currentURL").select(),document.execCommand("copy"),$(".copy_clip_text").addClass("show"),setTimeout(function(){$(".copy_clip_text").removeClass("show")},1e3)}),$(".prdt-main-img__slider").slick({infinite:!1});var w=$(".pdp-usedcar-nav .slick-slide").width();$(".pdp-usedcar-nav .slick-slide").css("height",3*w/4),$(".pdp-usedcar-nav .slick-slide .__product-img-used-car").css("height",3*w/4),$(".testimony_list_card").slick({slidesToShow:3,slidesToScroll:1,centerMode:!1,responsive:[{breakpoint:475,settings:{slidesToShow:1,slidesToScroll:1,variableWidth:!0}}]})},comparePane:function(){var comparePane=$("#compare-pane .modal-custom-dialog");$(document).on("click",".compare-close-hide",function(){$('<div class="modal-backdrop show"></div>');$(".compare-mobile-toggle").addClass("open"),comparePane.slideToggle("slow",function(){$(".modal-custom-dialog").is(":hidden")?($(".modal-backdrop").remove(),$(".compare-mobile-toggle").removeClass("open")):$(".compare-mobile-toggle").addClass("open")})}),$(document).on("click",".compare-close-hide",function(){0<$("#productCompareCount").val()&&$(".compare-strip-fixed").show()}),$(".add-to-compare").on("click",function(){$(".compare").css("display","block")}),$(".add-to-compare, .strip-content-wrapper").on("click",function(){comparePane.show()}),$(document).on("click",".select-car-mobile",function(){$("#attribute-select-model").modal("show"),$(".modal-backdrop").removeClass("show").addClass("hide")}),$("#attribute-select-model").on("hidden.bs.modal",function(){$(".modal-custom").removeClass("below-backdrop")})},myNeeds:function(){var _self=astra.global;_self.myNeedsObj={indexVal:0},$(".myNeedsPopup").on("click",function(e){var carType;$(this).hasClass("USEDCAR")?(carType="USEDCAR",console.log("-----tttt----\x3e"+carType)):carType=$(this).hasClass("NEWCAR")?"NEWCAR":$("#car-type  .tab-lg__button--active").attr("data-ajax"),e.preventDefault(),$.ajax({url:ACC.config.encodedContextPath+"/MyNeeds/fetch",method:"get",dataType:"html",data:{carType:carType},success:function(data){$.colorbox({html:data,width:"70%",height:"95%",overlayClose:!0,escKey:!0,closeButton:!0,className:"myNeedsWrapper",onComplete:function(){$(".myneedsImageWrapper").addClass("activeQues").attr("data-index",_self.myNeedsObj.indexVal),$(".Order__List--progress li").eq(0).addClass("active");var myNeedsAnsCode=function(){var _self=astra.global,selectedAns=$(".myneedsImageWrapper.activeQues").find(".selectImages.selected").find(".answerCode").val();_self.myNeedsSlctdImgs[selectedAns.substr(0,2)]=selectedAns},myNeedsProgress=function(){var $orderList=$(".Order__List--progress li"),indexVal=$(".myneedsImageContainer .myneedsImageWrapper.activeQues").attr("data-index");$orderList.removeClass("active");for(var i=0;i<=indexVal;i++)$orderList.eq(i).addClass("active")};$(".myNeedsWrapper").on("click",".selectImages",function(){var _self=astra.global,selectedans=$(this).find(".answerCode").val();_self.myNeedsSlctdImgs[selectedans.substr(0,2)]=selectedans,$(this).closest(".myneedsImageWrapper").find(".selectImages").removeClass("selected"),$(this).addClass("selected"),"car__new-car"==$(".tab-lg__button--active").attr("data-id")?$("#new_to_astra_type").val("NEWCAR"):$("#new_to_astra_type").val("USEDCAR")}),$(".myNeedsWrapper").on("click",".next-need-button",function(e){e.preventDefault();var thisurlVal,_self=astra.global,$selectedImg=$(".myneedsImageWrapper.activeQues").find(".selectImages.selected");myNeedsAnsCode(),$(this).closest(".myneedsImageWrapper").next().length<=0?0<$selectedImg.length&&(thisurlVal=$(this).data("href"),$.ajax({url:thisurlVal,data:{carType:carType},method:"POST",success:function(data){$(".myneedsImageWrapper").removeClass("activeQues");var resData=$(data).find(".myneedsImageWrapper").addClass("activeQues").attr("data-index",++_self.myNeedsObj.indexVal);$("#cboxLoadedContent").find(".myneedsImageContainer").append(resData),$(".myneedsImageWrapper").hasClass("activeQues")&&$(".activeQues").prev().hide(),$(".Order__List--progress li").eq(_self.myNeedsObj.indexVal).addClass("active"),astra.global.astraLazyLoad.update()}})):($(this).closest(".myneedsImageWrapper").removeClass("activeQues").next().addClass("activeQues"),$(".myneedsImageWrapper").hide(),$(".activeQues").show(),myNeedsProgress()),"car__new-car"==$(".tab-lg__button--active").attr("data-id")?$("#new_to_astra_type").val("NEWCAR"):$("#new_to_astra_type").val("USEDCAR")}),$(".myNeedsWrapper").on("click",".finishBtn",function(e){e.preventDefault();var key,tempObj=astra.global.myNeedsSlctdImgs,answerCode="",thisurlVal=$(this).data("href");for(key in myNeedsAnsCode(),tempObj)answerCode+=tempObj[key]+",";answerCode=answerCode.substr(0,answerCode.length-1),$.ajax({url:thisurlVal,method:"POST",data:{answerCode:answerCode,carType:carType},success:function(data){$("#cboxLoadedContent").html(data),astra.global.astraLazyLoad.update(),$(".recommended--popup").slick({dots:!1,infinite:!1,speed:300,slidesToShow:3,slidesToScroll:3,prevArrow:'<i class="fa fa-arrow-left" aria-hidden="true"></i>',nextArrow:'<i class="fa fa-arrow-right" aria-hidden="true"></i>',responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]})}})}),$(".myNeedsWrapper").on("click",".prev-need-button",function(e){e.preventDefault(),$(this).closest(".myneedsImageWrapper").removeClass("activeQues").prev().addClass("activeQues"),$(".myneedsImageWrapper").hide(),$(".activeQues").show(),myNeedsProgress()}),"car__new-car"==$(".tab-lg__button--active").attr("data-id")?$("#new_to_astra_type").val("NEWCAR"):$("#new_to_astra_type").val("USEDCAR")},onClosed:function(){window.location.reload()}})}})})},cart:function(){$(".bundleProductsListLink").on("click",function(e){e.preventDefault();var obj={title:"<div class='heading heading-1'> AFFCO Services</div>",thisObj:this};astra.global.cartPopup(obj)}),$(".bundleADPProductsListLink").on("click",function(e){e.preventDefault();var obj={title:"<div class='heading heading-1'> ADP Services </div>",thisObj:this};astra.global.cartPopup(obj)});var $el=$(".float__this"),$el_wrap=$(".float__this-wrap");$el[0]&&$(window).on("load resize scroll",function(){$el.width($el_wrap.width()),$el_wrap.height($el.height());var fixed__header__height,el__sticky_pos__top,el__pos__bottom,el__wrap__pos=$el_wrap.offset().top,scrolled__up=$(window).scrollTop(),footer__screen__pos=$("footer").offset().top-scrolled__up;el__pos__bottom=$(".astra-auto-header")[0]?(el__sticky_pos__top=el__wrap__pos-(fixed__header__height=$(".fixed .astra-auto-header").outerHeight(!0))-20,fixed__header__height+$el.outerHeight(!0)+20):(el__sticky_pos__top=el__wrap__pos-20,$el.outerHeight(!0)+20),el__sticky_pos__top<=scrolled__up?$el.addClass("sticky"):$el.removeClass("sticky"),footer__screen__pos<=el__pos__bottom?$el.addClass("sticky--bottom"):$el.removeClass("sticky--bottom")}),$("#addToCartButtonBuyNow").removeAttr("data-target"),$("#addToCartButtonBuyNow").removeAttr("data-toggle"),$("#addToCartButtonBuyNow").attr("type","submit"),$("#trade-in-link").on("click",function(e){$("input[name*='tradeInPDP']").val("tradeInPDP"),$("#addToCartButtonBuyNow").trigger("click"),e.preventDefault()}),$(".confirm_popup_pdp").on("hidden.bs.modal",function(){$("input[name*='tradeInPDP']").val("false")})},cartPopup:function(obj){$.colorbox({width:window.innerWidth<650?"90%":"70%",height:window.innerWidth<650?"500":"630",overlayClose:!0,escKey:!0,closeButton:!0,href:$(obj.thisObj).attr("href"),className:"affco__colorbox",title:obj.title,onComplete:function(){$(".affco__services--slider").slick({slidesToShow:3,slidesToScroll:3,infinite:!1,draggable:!0,touchThreshold:10,dots:!0,customPaging:function(slick,i){return"<a>"+(i+1)+"</a>"},responsive:[{breakpoint:994,settings:{slidesToShow:2,slidesToScroll:2,prevArrow:'<i class="fa fa-arrow-left slick-prev-btn" aria-hidden="true"></i>',nextArrow:'<i class="fa fa-arrow-right slick-next-btn" aria-hidden="true"></i>',dots:!1,centerMode:!0,centerPadding:"15px"}},{breakpoint:650,settings:{slidesToShow:1,slidesToScroll:1,prevArrow:'<i class="fa fa-arrow-left slick-prev-btn" aria-hidden="true"></i>',nextArrow:'<i class="fa fa-arrow-right slick-next-btn" aria-hidden="true"></i>',dots:!1,centerMode:!0,centerPadding:"15px"}}]}),$.colorbox.resize();var services_count=$(".affco__services--slider .configure_form").length;$("#cboxTitle .heading-1").append("<span> ("+services_count+")</span>");var $cartServices=$(".cart__service__wrap .cart__services--title"),maxHeight=[],maxDetailHeight=[];$cartServices.each(function(){maxHeight.push($(this).outerHeight())});var maxValue=Math.max.apply(Math,maxHeight);$cartServices.css("min-height",maxValue);var $cartserviceDetail=$(".cart__service__wrap .cart__services--detail");$cartserviceDetail.each(function(){maxDetailHeight.push($(this).outerHeight())});var maxDetailValue=Math.max.apply(Math,maxDetailHeight);$cartserviceDetail.css("min-height",maxDetailValue),$(window).on("resize load",function(){var $cartServices=$(".cart__service__wrap .cart__services--title"),maxHeight=[],maxDetailHeight=[];$cartServices.each(function(){maxHeight.push($(this).outerHeight())});var maxValue=Math.max.apply(Math,maxHeight);$cartServices.css("min-height",maxValue);var $cartserviceDetail=$(".cart__service__wrap .cart__services--detail");$cartserviceDetail.each(function(){maxDetailHeight.push($(this).outerHeight())});var maxDetailValue=Math.max.apply(Math,maxDetailHeight);$cartserviceDetail.css("min-height",maxDetailValue)}),$(".slick-dots li").length<=1&&$(".slick-dots").css("display","none")}})},emptyCartPage:function(){(4<$("#recommended-products").children().length||$(window).width()<900)&&$("#recommended-products").slick({dots:!0,arrows:!1,slidesToShow:4,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]})},staticPages:function(){function initSlider(){var slider=$(".static_content_slider");$(window).width()<992?slider.hasClass("slick-initialized")||slider.slick({lazyLoad:"ondemand",speed:1200,slidesToShow:4,centerMode:!0,centerPadding:"15px",pauseOnHover:!1,autoplay:!1,dots:!0,responsive:[{breakpoint:992,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:500,settings:{slidesToShow:1,slidesToScroll:1}}]}):slider.hasClass("slick-initialized")&&slider.slick("unslick")}initSlider();var timer,ttlHt,staticVideoImgHt,delay=(timer=0,function(callback,ms){clearTimeout(timer),timer=setTimeout(callback,ms)});$(window).resize(function(){delay(function(){initSlider()},200),$(".used_car_customer_contact .logged").removeClass("active")}),900<window.innerWidth?(ttlHt=$(".static--videos .subordinate_articles").height()*$(".static--videos .subordinate_articles").length+40,$(".static--videos .main_article figure").css("min-height",ttlHt)):(staticVideoImgHt=$(".static--videos .subordinate_articles img").height(),$(".static--videos .main_article figure img").css("min-height",staticVideoImgHt));var $static_slider=$(".articles_list.articles_list_container");$static_slider&&$(window).on("resize load",function(){$static_slider.each(function(){var maxHeight=[],$sub=$(this).find(".subordinate_articles .article_info");$sub.each(function(){maxHeight.push($(this).outerHeight())});var maxValue=Math.max.apply(Math,maxHeight);$sub.css("height",maxValue)})})},common:function(){var navitem;$("body").addClass("fixed"),0<$("#static_iframe").length&&(document.domain=isNaN(location.hostname.replace(/\./g,""))?location.hostname.split(".").slice(-2).join("."):location.hostname,$(window).on("load resize",function(){setTimeout(function(){var el__iframe=$("#static_iframe"),iframeHt=el__iframe.contents().height();el__iframe.height(iframeHt),$(".static-page__iframe-wrapper").removeClass("iframe-loading")},2e3)})),astra.global.astraLazyLoad=new LazyLoad,$(document).on("cbox_complete",function(){astra.global.astraLazyLoad.update(),$("#cboxClose").addClass("icon-search-close"),$("body").addClass("overflowYHidden")}),$(document).on("cbox_load",function(){$("#cboxClose").text("")}),$(document).on("cbox_closed",function(){$("body").removeClass("overflowYHidden")}),$("select").each(function(){$(this).select2({dropdownParent:$(this).closest("div"),minimumResultsForSearch:6})}),$(".no-search-input-box").each(function(){$(this).select2({dropdownParent:$(this).closest("div"),minimumResultsForSearch:-1})}),$(".vehicles-list__header #status").each(function(){$(this).select2({minimumResultsForSearch:-1})}),$("select").on("select2:select",function(){$(this).parents(".form-group").removeClass("error-element"),$(this).parents(".form-group").find("label.error").remove()}),$("select").each(function(){1==$(this).prop("disabled")&&$(this).parents(".__dropdown").addClass("disabled-dropdown")}),$("#general-appoinmtent-queryType").on("select2:select",function(){$(".general-appointment-form").find(".disabled-select").prop("disabled",!1)}),0<$(".astra-datepicker").length&&datePicker($(".astra-datepicker input")),0<$("input[id = 'payment.scheduled.date.time']").length&&datePicker($("input[id = 'payment.scheduled.date.time']")),$(".accordion").on("click",function(e){$(this).hasClass("activePanel")||($(".accordionContent").slideUp(),$(".accordion").removeClass("activePanel")),$(this).addClass("activePanel"),$(this).next().slideDown()}),$(".footer-heading").on("click",function(){var _this;$(window).width()<992&&($(this).next(".sub-heading").slideToggle("slow"),$(this).slideDown().toggleClass("active"),(_this=$(this).not(this)).next(".sub-heading").slideUp("slow"),_this.removeClass("active"),_this.next(".sub-heading").slideUp("slow"))}),$(".accordion--details:first-child .accordion--heading").addClass("active"),$(".accordion--details:first-child .accordion--content").show(),$(".accordion--heading").on("click",function(){$(this).siblings(".accordion--content").slideToggle("slow"),$(this).slideDown().toggleClass("active");var _this=$(this).not(this);_this.siblings(".accordion--content").slideUp("slow"),_this.removeClass("active"),_this.siblings(".accordion--content").slideUp("slow")}),$(".close-modal").on("click",function(){$("#otp-popup-Modal").modal("hide")}),$(window).scroll(function(){var body=$("body");$(".__top-header"),$(".astra-auto-header");10<$(window).scrollTop()?(body.addClass("fixed"),body.addClass("header-fixed")):(body.removeClass("fixed"),body.removeClass("header-fixed"))}),$(".addressBookPopup").colorbox({className:"addressBookPopupClass",closeButton:!0,height:"70%",inline:!0,maxWidth:"900px",width:"100%"}),$(".newBillingAddressPopup").colorbox({className:"newBillidngaddressBookClass",closeButton:!0,height:"70%",inline:!0,maxWidth:"880px",width:"100%"}),$("#social-login")[0]&&setTimeout(function(){$.colorbox({className:"astra-popup",closeButton:!0,inline:!0,width:"90%",maxWidth:"750px",href:"#social-login",onComplete:function(){$(".astra-popup__close").click(function(){$("#colorbox").colorbox.close()})}})},1e3),$('div[data-toggle="collapse"]').on("click",function(event){event.stopPropagation()}),$(".BornHS__Input").change(function(){$(this).is(":checked")?$(".BornHS__Wrapper").addClass("BornHS__Blur"):$(".BornHS__Wrapper").removeClass("BornHS__Blur")}),0<$(".myaccount .__section-title").length&&($(".myaccount .__section-title").addClass("opened"),$(".myaccount .__section-title").on("click",function(event){event.preventDefault(),event.stopPropagation(),$(this).toggleClass("opened"),$($(this).attr("data-target")).slideToggle()})),0<$("#myAccountNav").length&&($("#myAccountNav a.link-item").each(function(){var el=$(this);el.hasClass("active")&&$("#selected-nav-item").text(el.text())}),navitem=$("#myAccountNav").find("ul").clone(),$("#account-nav-item").append(navitem),$(".js-edit-profile-address-fields").on("input change propertychange paste",function(){$("#updateAddress").val("true")}));var width,$layoutGridImage=$(".vehicle-box__top").find("a"),maxHeight=[];$(window).on("load resize",function(){$layoutGridImage.each(function(){maxHeight.push($(this).outerHeight())});var maxValue=Math.max.apply(Math,maxHeight);$layoutGridImage.css("height",maxValue)}),$(".each_menu .tab_menu").each(function(){location.pathname.includes($(this).find("a").attr("href"))&&$(this).addClass("active")}),$(".btn-show-form").on("click",function(){$(".list-vehicle").hide(),$(".form-add-vehicle").show()}),windowWidth<758&&$(".each_menu .tab_menu:nth-child(n+3)").hasClass("active")&&(width=$(".each_menu .tab_menu:nth-child(n+3)").closest("div").outerWidth(),$(".each_menu").scrollLeft(width+10)),$(".add-to-bookmark").each(function(){$(this).is(":checked")&&$(this).next("label").addClass("checked")}),$(".bookmark label").click(function(){var thatfor=$(this).attr("for");$("label[for="+thatfor+"]").each(function(){$(this).toggleClass("checked")})}),$("#change_phone_number").on("change keyup",function(){var changeNumber=$(this).val();10<=changeNumber.length&&changeNumber.match(/^(?=\d{8,13}$)(8)\d+/)?$("._change-mobile-button").prop("disabled",!1):$("._change-mobile-button").prop("disabled",!0)});var maxValue,selector,$static_address_book=$(".automation-address-item"),$address_book=$(".automation-address-item .address-details .address");$static_address_book&&(maxHeight=[],$static_address_book.each(function(){var $sub=$(this).find(".address-details .address");maxHeight.push($sub.outerHeight())}),maxValue=Math.max.apply(Math,maxHeight),$address_book.css("height",maxValue)),$(".registerWrapper")&&($(selector="#register_title").hasClass("select2-hidden-accessible")&&$(selector).select2("destroy"),$(selector+" option:selected").removeAttr("selected"),$(selector+" option[value='mr']").attr("selected","selected"),$(selector).select2()),$(".textareaOther").hide(),$(".od-history-cancel").on("select2:select",function(){"Other"==$(this).val()?$(".textareaOther").show():$(".textareaOther").hide()}),$(window).on("load resize",function(){var prdtTop=$(".pdp-page-main .prdt-name-btn").height();$(".pdp-page-main .pdp-info").css("padding-top",prdtTop)}),$(window).on("load",function(){setTimeout(function(){stickyFooter()},1500)}),$(window).resize(function(){stickyFooter()}),0<$(".divTrue").length&&$("html, body").animate({scrollTop:$(".divTrue").offset().top},1e3),$("#promo-used-car").hide(),$("#promo-new-car").hide(),$(".promo__go-to-top .link--gray").click(function(){return $("html, body").animate({scrollTop:0},600),$("#promo-category-select").find("option:first-child").prop("selected",!0),$("#promo-category-select").select2("destroy").select2(),!1}),$("#promo-category-select").change(function(){var idVar=$(this).find(":selected").attr("data-target"),idVar1=$("#"+idVar);$("html, body").animate({scrollTop:idVar1.offset().top-120},1e3)}),$(window).on("load",function(){var set="Promo("+$(".promo-tile-wrapper").length+")";$("#promo-title").text(set);$("#promo-new-car").show(),$("#promo-used-car").show()}),$(".tab-lg__button").click(function(){var dataID=$(this).attr("data-id");$(".tab-lg__button").removeClass("tab-lg__button--active"),$(this).addClass("tab-lg__button--active"),$(".tab-lg__content").hide(),$("#"+dataID).show();var items_width=0,space_width=0;setTimeout(function(){$("#"+dataID).find(".new-to-content-outer").each(function(){space_width=$(this).find(".space")[0]?$(this).find(".space").width():0,items_width+=$(this).find(".new-to-content-inner").width()+space_width}),items_width+=125,$("#"+dataID).find(".items").width(items_width)},200),$(".steps-banner").slick("setPosition"),sessionStorage.setItem("carType",$(".tab-lg__button--active").attr("data-ajax"))}),$(".referral_code__create__click").click(function(){$(this).hide(),$(".referral_code__create__enter").show()}),$(window).on("resize load",function(){$(".trade_in_container .row").each(function(){$(window).width()<=990?$(this).find("h2").prependTo($(this).find(".trade_in_image")):$(this).find("h2").prependTo($(this).find(".trade_in_points"))})}),$(window).width()<=769&&$(".new_viewport").slick({dots:!0,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0})},imageUploadFunc:function(formName,imageUploadEle,imgUploadError){!$("#paymentDetailsForm .TRADEIN_CASH-heading-wrapper").hasClass("activePanel")&&!$("#paymentDetailsForm .TRADEIN_CREDIT-heading-wrapper").hasClass("activePanel")||formName.valid()&&0<imageUploadEle.length?formName.submit():0==imageUploadEle.length&&(0<imgUploadError.find("li").length&&imgUploadError.find("li").remove(),imgUploadError.append("<li>"+$(".minimum-error").html()+"</li>"))},validatePhone:function(phoneText){return!!/^(?=\d{8,13}$)(8)\d+/.test(phoneText)},creditCalc:function(){$("#getGiveBestOffer").hide(),$("#getGiveBestOfferToCart").hide(),$("#credit_simulation_table").hide(),$("#testDrive\\.productVariant").on("change",function(){var productCode=$("#testDrive\\.productVariant").val();$("input[name*='productCode']").val(productCode)}),$("#precentageval").on("change",function(){var valPercentage1=$("#precentageval").val().toString();$("input[name*='percent']").val(valPercentage1)}),$("#tenorval").on("change",function(){var valTenor1=$("#tenorval").val().toString();$("input[name*='tenor']").val(valTenor1)}),$("#getCreditValue").on("click",function(){var options,valPercentage1=$("#precentageval").val().toString(),valTenor=($("input[name*='percent']").val(valPercentage1),$("#tenorval").val());$("input[name*='tenor']").val(valTenor);1==$("#creditCalculatorForm").valid()&&(options={percentage:$("#precentageval").val(),tenor:$("#tenorval").val(),price:$("#price").val(),productCode:$("#testDrive\\.productVariant").val(),productCondition:$("#testDrive\\.condition").val(),year:$("#testDrive\\.year").val()},$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/calculatorval",async:!1,data:options,type:"POST",success:function(response){var contentDiv;null!=response.systemErrorMessage?window.location.href=notFountUrl:($("#contentTableDiv").remove(),contentDiv='<div id="contentTableDiv">',$.each(response.out_DATA,function(key,value){contentDiv+='<div class="row table-row-item"> <div class="col-sm-12 col-md-12 col-lg-2"><span class="col-sm-6 for-mobile-view">'+ACC.credidCalculatorTenor+'</span><span class="col-sm-6 col-md-12 col-lg-12">'+value.tenor+" "+ACC.credidCalculatorYear+'</span></div> <div class="col-sm-12 col-md-12 col-lg-5"><span class="col-sm-6 for-mobile-view">'+ACC.credidCalculatorDownPayment+'</span><span class="col-sm-6 col-md-12 col-lg-12">'+value.tot_pay_first+'</span></div><div class="col-sm-12 col-md-12 col-lg-5"><span class="col-sm-6 for-mobile-view">'+ACC.credidCalculatorInstallment+'</span><span class="col-sm-6 col-md-12 col-lg-12">'+value.amt_installment+"</span></div></div>"}),$("#credit_simulation_table").show(),$("#credit_simulation_table").append(contentDiv),$("#getGiveBestOffer").show(),$("#getGiveBestOfferToCart").show())}})),loadGoogleTagForCreditCal("Click Hitung Button")});var options,loadGoogleTagForCreditCal=function(name){window.mediator.publish("trackCreditCalculatorPage",{eventName:"generalEvent",eventCategory:"Astra Credit Calculator",eventAction:name,carBrand:$("option:selected","#testDrive\\.productBrand").text().trim(),carModel:$("option:selected","#testDrive\\.productModel").text().trim(),carPrice:getPriceFormatValue($("#price").val()),carVariant:$("option:selected","#testDrive\\.productVariant").text().trim(),downPayment:$("#precentageval").val(),tenureLength:$("#tenorval").val()})},getPriceFormatValue=function(price){var formatValue=price.split(".");return formatValue.shift(),formatValue.join("").trim()};$("#getGiveBestOffer").on("click",function(){loadGoogleTagForCreditCal("Click Hitung Button - Lihat Produk");var pCode=$("#testDrive\\.productVariant").val(),productCodeUrl=$(this).attr("data-url")+"/p/"+pCode;location.href=productCodeUrl}),$("#getGiveBestOfferToCart").on("click",function(){loadGoogleTagForCreditCal("Click Hitung Button - Minta Penawaran Terbaik"),$("#getGiveBestOfferToCart").removeAttr("data-target"),$("#getGiveBestOfferToCart").removeAttr("data-toggle"),$("#getGiveBestOfferToCart").attr("type","submit")}),""!=$.trim($("#price").val())&&(options={percentage:$("#precentageval").val(),tenor:$("#tenorval").val(),price:$("#price").val()},$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/paymentcalculatorval",async:!1,data:options,type:"GET",success:function(response){var contentDiv;null!=response.systemErrorMessage?window.location.href=notFountUrl:($("#contentTableDiv").remove(),contentDiv='<div id="contentTableDiv">',$.each(response.out_DATA,function(key,value){contentDiv+='<div class="row table-row-item"> <div class="col-sm-12 col-md-12 col-lg-2"><span class="col-sm-6 for-mobile-view">'+ACC.credidCalculatorTenor+'</span><span class="col-sm-6 col-md-12 col-lg-12">'+value.tenor+" "+ACC.credidCalculatorYear+' </span></div> <div class="col-sm-12 col-md-12 col-lg-5"><span class="col-sm-6 for-mobile-view">'+ACC.credidCalculatorDownPayment+'</span><span class="col-sm-6 col-md-12 col-lg-12">Rp. '+astra.global.priceFormat(value.tot_pay_first)+'</span></div><div class="col-sm-12 col-md-12 col-lg-5"><span class="col-sm-6 for-mobile-view">'+ACC.credidCalculatorInstallment+'</span><span class="col-sm-6 col-md-12 col-lg-12">Rp. '+astra.global.priceFormat(value.amt_installment)+"</span></div></div>"}),$("#credit_simulation_table").show(),$("#credit_simulation_table").append(contentDiv))}}))},checkout:function(){$("input[type=radio][name=paymentOption]").change(function(){switch($("input[id*='paymentDetail_is'").val(!1),$("input:radio[name=paymentOption]:checked").val()){case"collapse-CASH":$("#paymentDetail_isCashPayment").val(!0);break;case"collapse-CREDIT":$("#paymentDetail_isCreditPayment").val(!0),loadCreditPaymentInit();break;case"collapse-TRADEIN_CASH":$("#paymentDetail_isTradeInByCashPayment").val(!0);break;case"collapse-TRADEIN_CREDIT":$("#paymentDetail_isTradeInByCreditPayment").val(!0),loadTradeCreditPaymentInit()}}),$("#creditprecentageval1,#credittenorval").on("change",function(){loadCreditPaymentInit()});var loadCreditPaymentInit=function(){var options={percentage:$("#creditprecentageval1").val(),tenor:$("#credittenorval").val(),price:$("#creditprice").val(),productCode:$("#base-productCode").val(),productCondition:$("#base-productType").val()};$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/paymentcalculatorval",async:!1,data:options,type:"POST",success:function(response){null!=response.systemErrorMessage?window.location.href=notFountUrl:($.each(response.out_DATA,function(key,value){$("#creditdownPayment1").val(value.tot_pay_first),$("#creditInstallments1").val(value.amt_installment),$("#creditdownPayment").val(reFormatValue(value.tot_pay_first)),$("#creditInstallments").val(reFormatValue(value.amt_installment))}),window.mediator.publish("trackCreditForPDPAndCheckoutPage",{eventName:"generalEvent",eventCategory:"Astra Credit Calculator",eventAction:"Checkout",carBrand:$("#selected-brand-name").val(),carPrice:reFormatValue($("#selected-product-price").val()),carVariant:$("#selected-variant-name").val(),downPayment:$("#creditprecentageval1").val(),tenureLength:$("#credittenorval").val(),downPaymentRupiah:$("#creditdownPayment").val(),tenureRupiah:$("#creditInstallments").val()}))}})};$("#tradeprecentageval1,#tradetenorval").on("change",function(){loadTradeCreditPaymentInit()});var loadTradeCreditPaymentInit=function(){var options={percentage:$("#tradeprecentageval1").val(),tenor:$("#tradetenorval").val(),price:$("#tradeprice").val(),productCode:$("#base-productCode").val(),productCondition:$("#base-productType").val()};$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/paymentcalculatorval",async:!1,data:options,type:"POST",success:function(response){null!=response.systemErrorMessage?window.location.href=notFountUrl:($.each(response.out_DATA,function(key,value){$("#tradedownPayment1").val(value.tot_pay_first),$("#tradeInstallments1").val(value.amt_installment),$("#tradedownPayment").val(reFormatValue(value.tot_pay_first)),$("#tradeInstallments").val(reFormatValue(value.amt_installment))}),window.mediator.publish("trackCreditForPDPAndCheckoutPage",{eventName:"generalEvent",eventCategory:"Astra Credit Calculator",eventAction:"Checkout",carBrand:$("#selected-brand-name").val(),carPrice:reFormatValue($("#selected-product-price").val()),carVariant:$("#selected-variant-name").val(),downPayment:$("#tradeprecentageval1").val(),tenureLength:$("#tradetenorval").val(),downPaymentRupiah:$("#tradedownPayment").val(),tenureRupiah:$("#tradeInstallments").val()}))}})},reFormatValue=function(price){var formatValue=price.split(".");return formatValue.shift(),formatValue.join("").trim()};$("#paymentSubmit").on("click",function(){var paymentForm,imageUpload,imageUploadError;"true"==$("#paymentDetail_isCashPayment").val()||"true"==$("#paymentDetail_isCreditPayment").val()?$("#paymentDetailsForm").submit():(paymentForm=$("#paymentDetailsForm"),imageUpload=$(".activePanel").next().find(".dropBlockWrapper .image-uploaded .success-img"),imageUploadError=$(".activePanel").next().find(".help-block ol"),astra.global.imageUploadFunc(paymentForm,imageUpload,imageUploadError))}),$(".personalinfo").on("click",function(){$(".checkout-personalinfo").fadeIn("300"),$(".checkout-paymentmethod").hide(),$(".personal-info").addClass("active"),$(".payment-method").removeClass("active"),$(".separator").removeClass("separator-left"),$(".separator").addClass("separator-right")}),$(".close-orderotp-modal").click(function(){$("#order-otppopup").modal("hide")}),$("#return-user")[0]&&setTimeout(function(){$.colorbox({className:"astra-popup",closeButton:!0,height:"340px",inline:!0,maxWidth:"555px",width:"100%",href:"#return-user",onComplete:function(){$(".astra-popup__close").click(function(){$("#guestForm").submit()})}})},1e3)},priceFormat:function(str){for(var newString="",formattedPrice="",i=str.length-1;0<=i;i--)newString+=str[i];for(var a=[],start=0;start<newString.length;)a.push(newString.slice(start,start+3)),start+=3;for(var changeval=a.join("."),j=changeval.length-1;0<=j;j--)formattedPrice+=changeval[j];return formattedPrice},imageUpload:function(){var dropZone,maxUpload,startUpload,fileValidation,_self=astra.global;_self.countImg=0,$(".image-uploaded").on("listImgAdded",function(){$(".dropBlock-plus-left").hide(),$(".dropBlock-plus-right").hide()}),$("body").on("click","i.remove-upload-image",function(e){e.preventDefault(),1!=$(".success-img").length||($(".dropBlock-plus-left").show(),$(".dropBlock-plus-right").show())}),0<$("#image-drop-zone").length&&(dropZone=document.getElementById("image-drop-zone"),$(".vehicle-upload-files"),maxUpload=0,($("body").find("#vehicleForm").length||0<$("#assetSellingForm").length||0<$("#placeOrderForm").length)&&(maxUpload=ACC.astra.c2cimgUploadlimit),startUpload=function(files,target){var files_upload=target;$(".dropBlockWrapper .help-block ol").empty();var previewChild=$(files_upload).parents(".dropBlockWrapper").find(".image-uploaded").find(".success-img"),availSpace=maxUpload-previewChild.length;if(fileValidation(files,availSpace)&&0<availSpace)if($("#car-loader").css("display","flex"),"false"===$("#isMultipleImage").val()){var imageSelect=$(files_upload).parents(".dropBlockWrapper").find(".dropBlock .vehicle-upload-files").hide(),filesUpload=files[0],reader=new FileReader;reader.onload=function(e){var listitem=$(files_upload).parents(".dropBlockWrapper").find(".cloned-li-element").clone();listitem.addClass("success-img"),$(listitem).find("img").attr("src",e.target.result),$(files_upload).parents(".dropBlockWrapper").find(".image-uploaded").append(listitem),listitem.removeClass("hide cloned-li-element"),listitem.append(imageSelect).trigger("listImgAdded"),$(".image-uploaded .add-more-img").remove(),$(".image-uploaded .success-img").length<maxUpload&&($(".image-uploaded").append($(".add-more-img").last().clone()),$(".image-uploaded .add-more-img").show()),0<previewChild.length&&(_self.countImg=previewChild.length),$(listitem).find("input[type='file']").attr("id","vehicle-upload"+_self.countImg++),$(".dropBlockWrapper .help-block ol").empty()},reader.readAsDataURL(filesUpload),$(files_upload).parents(".accordionContent").hasClass("collapse-TRADEIN_CASH")?$(files_upload).parents(".dropBlockWrapper").find(".dropBlock .fileContainer").append("<input type='file' name='tradeInCashVehicle.files' class='vehicle-upload-files'/>"):$(files_upload).parents(".accordionContent").hasClass("collapse-TRADEIN_CREDIT")?$(files_upload).parents(".dropBlockWrapper").find(".dropBlock .fileContainer").append("<input type='file' name='tradeInCreditVehicle.files' class='vehicle-upload-files'/>"):$(files_upload).parents(".dropBlockWrapper").find(".dropBlock .fileContainer").append("<input type='file' name='files' class='vehicle-upload-files'/>")}else{for(var i=0;i<files.length;i++)!function(file){var imageSelect=$(files_upload).parents(".dropBlockWrapper").find(".dropBlock .vehicle-upload-files").hide(),filesUpload=file,reader=new FileReader;reader.readAsDataURL(filesUpload),reader.onload=function(){EXIF.getData(filesUpload,function(){var srcBase64,srcOrientation,callback,img,orientation=EXIF.getTag(this,"Orientation");srcBase64=reader.result,srcOrientation=orientation,callback=function(image){var listitem=$(files_upload).parents(".dropBlockWrapper").find(".cloned-li-element").clone();listitem.addClass("success-img"),$(listitem).find(".deleted-name").val(file.name),$(listitem).find("img").attr("src",image),$(files_upload).parents(".dropBlockWrapper").find(".image-uploaded").append(listitem),listitem.removeClass("hide cloned-li-element"),$(files_upload).parents(".accordionContent").hasClass("collapse-TRADEIN_CASH")||$(files_upload).parents(".accordionContent").hasClass("collapse-TRADEIN_CREDIT")?listitem.append(imageSelect):$(".list-storage").append(imageSelect),$(".image-uploaded .add-more-img").remove(),$(".image-uploaded .success-img").length<maxUpload&&($(".image-uploaded").append($(".add-more-img").last().clone()),$(".image-uploaded .add-more-img").show()),0<previewChild.length&&(_self.countImg=previewChild.length),$(listitem).find("input[type='file']").attr("id","vehicle-upload"+_self.countImg++)},(img=new Image).onload=function(){var width=img.width,height=img.height,canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");switch(-1<[5,6,7,8].indexOf(srcOrientation)?(canvas.width=height,canvas.height=width):(canvas.width=width,canvas.height=height),srcOrientation){case 2:ctx.transform(-1,0,0,1,width,0);break;case 3:ctx.transform(-1,0,0,-1,width,height);break;case 4:ctx.transform(1,0,0,-1,0,height);break;case 5:ctx.transform(0,1,1,0,0,0);break;case 6:ctx.transform(0,1,-1,0,height,0);break;case 7:ctx.transform(0,-1,-1,0,height,width);break;case 8:ctx.transform(0,-1,1,0,0,width);break;default:ctx.transform(1,0,0,1,0,0)}ctx.drawImage(img,0,0),callback(canvas.toDataURL())},img.src=srcBase64})},$(files_upload).parents(".accordionContent").hasClass("collapse-TRADEIN_CASH")?$(files_upload).parents(".dropBlockWrapper").find(".dropBlock .fileContainer").append("<input type='file' name='tradeInCashVehicle.files' class='vehicle-upload-files'/>"):$(files_upload).parents(".accordionContent").hasClass("collapse-TRADEIN_CREDIT")?$(files_upload).parents(".dropBlockWrapper").find(".dropBlock .fileContainer").append("<input type='file' name='tradeInCreditVehicle.files' class='vehicle-upload-files'/>"):$(files_upload).parents(".dropBlockWrapper").find(".dropBlock .fileContainer").append("<input type='file' name='files' multiple='multiple' class='vehicle-upload-files'/>")}(files[i])}},fileValidation=function(files,availSpace){var isValid=!0,errorMsg="",allowedExtensions=/(\jpg|\jpeg|\png)$/i;for(i=0;i<files.length;i++){filesUpload=files[i];var filename=filesUpload.name.split(".").slice(0,-1).join(".").length;if(files&&files[i]){var type=files[i].type,size=files[i].size;if(!allowedExtensions.exec(type)){errorMsg+="<li>Upload image of type png, jpg or jpeg</li>",isValid=!1;break}if(20971520<size&&(errorMsg+="<li>Maksimum ukuran file 20MB</li>",isValid=!1),files.length>maxUpload||0==availSpace||files.length>availSpace){$("html").is(":lang(en)")?errorMsg+="<li>maximum "+maxUpload+" images can be upload.</li>":errorMsg+="<li>Maksimum "+maxUpload+" gambar dapat diunggah.</li>",isValid=!1;break}if(filename>ACC.astra.c2cimgfilename){errorMsg+="<li>"+$(".filename-length-error").html()+"</li>",isValid=!1;break}}}return""!=errorMsg&&($(".dropBlockWrapper .help-block .hints").html(errorMsg),$(".dropBlockWrapper .dropBlock input").val("")),isValid},$(document).on("change",".vehicle-upload-files",function(e){var uploadFiles=e.target.files;e.preventDefault(),startUpload(uploadFiles,e.target)}),$(document).on("click",".add-more-img",function(e){$(".vehicle-upload-files").first().click()}),dropZone.ondrop=function(e){this.className="dropBlock";var data=e.dataTransfer.files;startUpload(data,$(e.target).find(".vehicle-upload-files")[0])},dropZone.ondragover=function(){return!(this.className="dropBlock drop")},dropZone.ondragleave=function(){return!(this.className="dropBlock")},$("body").on("click","i.remove-upload-image",function(e){e.preventDefault();var name,$img=$(this).closest("li");$img.find("img").remove(),$img.removeAttr("class"),"1"===$img.find(".operation-value").val()?(name=$img.find(".deleted-name").val(),deletearray.push(name),$img.remove()):($img.find(".operation-value").val("0"),$img.hide(),$(this).remove(),$("#image-drop-zone").show()),0==$(".image-uploaded .add-more-img").length&&0<$(".image-uploaded .success-img").length?($(".image-uploaded").append($(".add-more-img").last().clone()),$(".image-uploaded .add-more-img").show()):0==$(".image-uploaded .success-img").length&&$(".image-uploaded .add-more-img").hide()}))},fetchHolidayDatesForBranch:function(){function fetchHolidayDates(branchCode){branchCode&&$.ajax({url:ACC.config.contextPath+"/sevaservice/fetch-holidays",type:"GET",data:{branchCode:branchCode},success:function(data){var $input,date,monthCount;console.log(data),(0<$("#test-drive-date").length||0<$("#dob-datepicker input").length)&&($input=$("#test-drive-date input, #dob-datepicker input"),(date=new Date).getMonth(),date.getDate(),date.getFullYear(),monthCount=$("#holidateCalendarMonthCount").val(),$input.datepicker("destroy"),$input.datepicker({format:"dd-mm-yyyy",autoclose:!0,startDate:"today"==$input.attr("minDate")?new Date:"+1d",endDate:"+"+monthCount+"m",datesDisabled:0<data.length?function(dates){for(var a=dates,b=[],d=new Date,i=0;i<dates.length;i++){var month=(d=new Date(a[i])).getMonth()+1,day=""+d.getDate(),year=d.getFullYear();month.length<2&&(month="0"+month),day.length<2&&(day="0"+day);var result=[day,month,year].join("-");b.push(result)}return console.log(b),b}(data):""}).on("changeDate",function(){$(this).removeClass("error"),$(this).parents(".form-group").find("label.error").remove()})),$("#bookServiceForm #dob-datepicker input, #bookServiceForm .timeWrapper select").prop("disabled",!1),$("#testDriveForm #test-drive-date input, #testDriveForm .timeWrapper select").prop("disabled",!1)},error:function(result){}})}$(".service-branchlocation #branch, .testdrive-branchlocation [name=branch]").on("select2:select",function(){fetchHolidayDates($(this).val())}),$("#bookingType").on("select2:select",function(){var $inputDate;-1!=$(this).val().indexOf("Branch")?$("#bookServiceForm #dob-datepicker input, #bookServiceForm .timeWrapper select").prop("disabled",!0):$("#bookServiceForm #dob-datepicker input, #bookServiceForm .timeWrapper select").prop("disabled",!1),-1!=$(this).val().toLowerCase().indexOf("home")&&(($inputDate=$("#dob-datepicker input")).datepicker("destroy"),datePicker($inputDate))}),0<$("#dob-datepicker").length&&datePicker($("#dob-datepicker input")),$('#testDriveForm [name="testDriveAt"]').on("select2:select",function(){var $inputDate;-1!=$(this).val().indexOf("BRANCH")?$("#testDriveForm #test-drive-date input, #testDriveForm .timeWrapper select").prop("disabled",!0):$("#testDriveForm #test-drive-date input, #testDriveForm .timeWrapper select").prop("disabled",!1),-1!=$(this).val().toLowerCase().indexOf("home")&&(($inputDate=$("#test-drive-date input")).datepicker("destroy"),datePicker($inputDate))}),0<$("#test-drive-date").length&&datePicker($("#test-drive-date input")),$("a.order_status_link").on("click",function(){return $("html, body").animate({scrollTop:$($(this).attr("href")).offset().top},500),!1})},myVehicle:function(e){function searchQuery(){var brandValue=$("#brandSearch").val(),vehicleValue=$("#vehicleSearch").val(),vehicleType=$("#vehicleType").val(),searchQuery=":relevance";return"used"!=vehicleType.toLowerCase()&&"bekas"!=vehicleType.toLowerCase()||(searchQuery+=":isUsedCar:true"),"All Types"!=vehicleValue.trim()&&"Semua Tipe"!=vehicleValue.trim()&&(searchQuery=searchQuery+":category:"+vehicleValue),"Brand"!=brandValue.trim()&&"Merek"!=brandValue.trim()&&(searchQuery=searchQuery+":brand:"+brandValue),searchQuery}$("#myVehicleModal .modal-body").find(".vehicle-section").length&&(""==$("#myVehicleModal .modal-body").find(".vehicle-section").html().trim()?($("#myVehicleModal .modal-body").find("#emptyVehicleList").removeClass("hide"),$("#myVehicleModal .modal-footer").find(".__button-holder button[type='submit']").addClass("hide"),$("#myVehicleModal .modal-footer").find(".__button-holder button[type='button']").removeClass("hide")):($("#myVehicleModal .modal-footer").find(".__button-holder button[type='submit']").removeClass("hide"),$("#myVehicleModal .modal-footer").find(".__button-holder button[type='button']").addClass("hide"))),$("#myVehicleModal").on("shown.bs.modal",function(){!function(thisID){var slider=$(".vehicle-section");slider.hasClass("slick-initialized")&&slider.slick("unslick");for(var divs=thisID.find(".vehicle-section > .automation-myvehicle-item"),__length=thisID.find(".automation-myvehicle-item").length,i=0;i<__length;i+=4)divs.slice(i,i+4).wrapAll("<div class='vehicle-section__list__group'><div class='d-flex'></div></div>");slider.slick({dots:!0,infinite:!1,loop:!1,slidesToShow:1,draggable:!0,slidesToScroll:1})}($(this)),$(".slick-dots li").length<=1&&$(".slick-dots").css("display","none")});$("#vehicleType").on("change",function(){$("#brandSearch").find("option").not(":first").remove(),$("#vehicleSearch").find("option").not(":first").remove(),$("#modelSearch").find("option").not(":first").remove(),$("#priceSearch").find("option").not(":first").remove(),searchQuery(),$("#vehicleSearch").find("option").not(":first").remove(),$.ajax({url:ACC.config.contextPath+"/view/AstraAutoFacetVehicleSearchComponentController/getDependentFacet",type:"GET",data:{q:searchQuery,lang:ACC.config.lang},success:function(data){$(".price .container").addClass("loader");for(var i=0;i<data.price.length;i++)$("<option />",{value:data.price[i].code,text:data.price[i].name}).appendTo("#priceSearch");for(i=0;i<data.category.length;i++)"USEDCARTYPE"!=data.category[i].name&&$("<option />",{value:data.category[i].code,text:data.category[i].name}).appendTo("#vehicleSearch");for(i=0;i<data.brand.length;i++)"USEDCARBRAND"!=data.brand[i].name&&"BRAND"!=data.brand[i].name&&$("<option />",{value:data.brand[i].code,text:data.brand[i].name}).appendTo("#brandSearch");for(i=0;i<data.model.length;i++)$("<option />",{value:data.model[i].code,text:data.model[i].name}).appendTo("#modelSearch");$(".price .container").removeClass("loader")},error:function(result){$("#server_error").show()}})}),0<$("#vehicleSearch").length&&$("#vehicleSearch").on("change",function(){$("#brandSearch").find("option").not(":first").remove(),$("#modelSearch").find("option").not(":first").remove(),$(this).val(),searchQuery(),$("#brandSearch").find("option").not(":first").remove(),$.ajax({url:ACC.config.contextPath+"/view/AstraAutoFacetVehicleSearchComponentController/getDependentFacet",type:"GET",data:{q:searchQuery,lang:ACC.config.lang},success:function(data){for(var i=0;i<data.brand.length;i++)"USEDCARBRAND"!=data.brand[i].name&&"BRAND"!=data.brand[i].name&&$("<option />",{value:data.brand[i].code,text:data.brand[i].name}).appendTo("#brandSearch");for(i=0;i<data.model.length;i++)"MODEL"!=data.model[i].name&&$("<option />",{value:data.model[i].code,text:data.model[i].name}).appendTo("#modelSearch")},error:function(result){$("#server_error").show()}})}),0<$("#brandSearch").length&&$("#brandSearch").on("change",function(){$("#modelSearch").find("option").not(":first").remove(),searchQuery(),$("#modelSearch").find("option").not(":first").remove(),$.ajax({url:ACC.config.contextPath+"/view/AstraAutoFacetVehicleSearchComponentController/getDependentFacet",type:"GET",data:{q:searchQuery,lang:ACC.config.lang},success:function(data){for(var i=0;i<data.model.length;i++)$("<option />",{value:data.model[i].code,text:data.model[i].name}).appendTo("#modelSearch")},error:function(result){$("#server_error").show()}})}),0<$("#searchVehicleComponent").length&&$("#searchVehicleComponent").on("click",function(){var vehicleType=$("#vehicleType").val(),priceValue=$("#priceSearch").val(),brandValue=$("#brandSearch").val(),vehicleValue=$("#vehicleSearch").val(),modelValue=$("#modelSearch").val(),queryString="q=%3Arelevance";""!=priceValue&&"price"!=priceValue.toLowerCase()&&"harga"!=priceValue.toLowerCase()&&(queryString+="%3Aprice%3A"+priceValue),""!=brandValue&&"brand"!=brandValue.toLowerCase()&&"merek"!=brandValue.toLowerCase()&&(queryString+="%3Abrand%3A"+brandValue),""!=modelValue&&"model"!=modelValue.toLowerCase()&&(queryString+="%3Amodel%3A"+modelValue),""!=vehicleValue&&"all types"!=vehicleValue.toLowerCase()&&"Semua Tipe"!=vehicleValue.trim()&&(queryString+="%3Acategory%3A"+vehicleValue),urlpath=""!=vehicleType&&"used"!=vehicleType.toLowerCase()&&"bekas"!=vehicleType.toLowerCase()?ACC.config.encodedContextPath+"/c/TYPE?"+queryString:ACC.config.encodedContextPath+"/c/USEDCARTYPE?"+queryString,window.location.href=urlpath}),$("#change_phone_number").on("blur",function(){var phoneText=$(this).val();return 0!=$.trim(phoneText).length&&astra.global.validatePhone(phoneText)?($("#submit_mobile").removeAttr("disabled"),$(this).removeClass("show-error"),$("#errorMessage").removeClass("show-error"),!0):($("#submit_mobile").attr("disabled","disabled"),$(this).addClass("show-error"),$("#errorMessage").addClass("show-error"),!1)}),$("#submit_mobile").click(function(){$("#server_error").hide(),$("#invalid_otp").hide(),$(".otp-popup-input-value").val(""),sendOTP($("#change_phone_number").val(),$("#isdCode").attr("placeholder"))}),$("#verify_otp").click(function(){verifyOTP($("#change_phone_number").val(),$("#isdCode").attr("placeholder"),$("#otp").val(),function(data){-1!==data.toLowerCase().indexOf("invalid")||-1!==data.toLowerCase().indexOf("not valid")||-1!==data.toLowerCase().indexOf("expired")?($("#server_error").hide(),$("#invalid_otp").show()):($("#server_error").hide(),$("#invalid_otp").hide(),$("#otp-popup-Modal").modal("hide"),$("#success-message").addClass("show-error"))},function(error){$("#server_error").show()})}),$(".vehicle-info").on("click",function(){$(".vehicle-info").removeClass("selected"),$(this).addClass("selected")}),$(".js-address-select-province").on("change",function(){var options={regionIsoCode:$(this).val()};$.ajax({url:ACC.config.encodedContextPath+"/ajax/address/json/get-cities",async:!1,data:options,type:"GET",success:function(response){$(".js-address-select-village").empty(),$(".js-address-select-district").empty();var cityList=$(".js-address-select-city");cityList.empty(),cityList.append($("<option value=''></option>").text("")),$.each(response,function(key,value){cityList.append($("<option></option>").attr("value",value.isocode).attr("id",value.isocode).text(value.name))}),$(".js-address-select-city").select2({dropdownParent:$(".js-address-select-city").parent()})}})}),$(".js-address-select-city").on("change",function(){var options={cityCode:$(this).val()};$.ajax({url:ACC.config.encodedContextPath+"/ajax/address/json/get-districts",async:!1,data:options,type:"GET",success:function(response){$(".js-address-select-village").empty();var districtList=$(".js-address-select-district");districtList.empty(),districtList.append($("<option value=''></option>").text("")),$.each(response,function(key,value){districtList.append($("<option></option>").attr("value",value.isocode).attr("id",value.isocode).text(value.name))}),$(".js-address-select-district").select2({dropdownParent:$(".js-address-select-district").parent()})}})}),$(".js-address-select-district").on("change",function(){var options={districtCode:$(this).val()};$.ajax({url:ACC.config.encodedContextPath+"/ajax/address/json/get-villages",async:!1,data:options,type:"GET",success:function(response){var villageList=$(".js-address-select-village");villageList.empty(),villageList.append($("<option value=''></option>").text("")),$.each(response,function(key,value){villageList.append($("<option></option>").attr("value",value.isocode).attr("id",value.isocode).text(value.name))}),$(".js-select2-title-village").select2({dropdownParent:$(".js-select2-title-village").parent()})}})}),$(".vehicle-selectbox").click(function(){$(this).toggleClass("open")}),$(".vehicle-dropdown__list").click(function(){var selText=$(this).find(".vehicle-dropdown__name").text();$(".vehicle-selectbox").html(selText).removeClass("open")}),$(".vehicle__remove").colorbox({className:"vehicle__remove-popup",closeButton:!0,height:"340px",inline:!0,width:$(window).width()<480?$(window).width()-30:"420px",onComplete:function(){$("#colorbox .btn-outline-dark").click(function(){$("#colorbox").colorbox.close()}),$(window).resize(function(){var Cwidth="420px";$(window).width()<480&&(Cwidth=$(window).width()-40),$(".vehicle__remove").colorbox.resize({width:Cwidth,height:"340px"})})}});var options;$(".vehicle__full-details").length&&($(".pagination-next").addClass("disabled"),options={equipmentNo:$("#vChasisNumber").val(),brand:$("#vBrandName").val(),currentPageNo:"1",recordsPerPage:8},$.ajax({url:ACC.config.encodedContextPath+"/my-account/getdmsResponse",async:!0,data:options,type:"GET",success:function(response){var contentDiv;null!=response.serviceHistory?(contentDiv='<div id="contentTableDiv">',$.each(response.serviceHistory,function(key,value){contentDiv+='<div class="vehicle-table--row"> <div data-label="Type" class="vehicle-table--col vehicle-table--type">'+value.branchDescription+'</div><div data-label="Scheduled Date" class="vehicle-table--col vehicle-table--date">'+dateFormatFunction(value.pkbDate)+'</div><div data-label="Maintenance Type" class="vehicle-table--col vehicle-table--maintenance">'+value.operationDetail+'</div><div data-label="Status" class="vehicle-table--col vehicle-table--status">Complete</div><div data-label="Parts" class="vehicle-table--col vehicle-table--feedback">'+value.materialDetail+"</div></div>"}),$("#vehicle-table--rows").html(contentDiv).removeClass("content-loader"),$("#pageValue").val(1),response.serviceHistory.length<8?$(".pagination-next").addClass("disabled"):$(".pagination-next").removeClass("disabled"),0===response.serviceHistory.length&&$("#vehicle-table--rows").html("No Record Found")):($("#vehicle-table--rows").html("No Record Found").removeClass("content-loader"),$(".pagination-next").addClass("disabled")),!1===response.isSuccess&&$("#vehicle-table--rows").html("Service Down")}})),$(".pagination-next").on("click",function(e){var nextPageVal=+$("#pageValue").val()+1,options={equipmentNo:$("#vChasisNumber").val(),brand:$("#vBrandName").val(),currentPageNo:nextPageVal,recordsPerPage:8};$.ajax({url:ACC.config.encodedContextPath+"/my-account/getdmsResponse",async:!0,data:options,type:"GET",success:function(response){var contentDiv;null!=response.serviceHistory?(contentDiv='<div id="contentTableDiv">',$.each(response.serviceHistory,function(key,value){contentDiv+='<div class="vehicle-table--row"> <div data-label="Type" class="vehicle-table--col vehicle-table--type">'+value.branchDescription+'</div><div data-label="Scheduled Date" class="vehicle-table--col vehicle-table--date">'+dateFormatFunction(value.pkbDate)+'</div><div data-label="Maintenance Type" class="vehicle-table--col vehicle-table--maintenance">'+value.operationDetail+'</div><div data-label="Status" class="vehicle-table--col vehicle-table--status">Complete</div><div data-label="Parts" class="vehicle-table--col vehicle-table--feedback">'+value.materialDetail+"</div></div>"}),$("#vehicle-table--rows").html(contentDiv),$("#pageValue").val(nextPageVal),$(".pagination-prev").removeClass("disabled"),response.serviceHistory.length<8&&$(".pagination-next").addClass("disabled"),0===response.serviceHistory.length&&$("#vehicle-table--rows").html("No Record Found")):($("#vehicle-table--rows").html("Service Down"),$(".pagination-next").addClass("disabled"))}})}),$(".pagination-prev").on("click",function(e){var nextPageVal=$("#pageValue").val()-1,options={equipmentNo:$("#vChasisNumber").val(),brand:$("#vBrandName").val(),currentPageNo:nextPageVal,recordsPerPage:8};$.ajax({url:ACC.config.encodedContextPath+"/my-account/getdmsResponse",async:!0,data:options,type:"GET",success:function(response){var contentDiv;null!=response.serviceHistory?(contentDiv='<div id="contentTableDiv">',$.each(response.serviceHistory,function(key,value){contentDiv+='<div class="vehicle-table--row"> <div data-label="Type" class="vehicle-table--col vehicle-table--type">'+value.branchDescription+'</div><div data-label="Scheduled Date" class="vehicle-table--col vehicle-table--date">'+dateFormatFunction(value.pkbDate)+'</div><div data-label="Maintenance Type" class="vehicle-table--col vehicle-table--maintenance">'+value.operationDetail+'</div><div data-label="Status" class="vehicle-table--col vehicle-table--status">Complete</div><div data-label="Parts" class="vehicle-table--col vehicle-table--feedback">'+value.materialDetail+"</div></div>"}),$("#vehicle-table--rows").html(contentDiv),$("#pageValue").val(nextPageVal),$(".pagination-next").removeClass("disabled"),1==nextPageVal&&$(".pagination-prev").addClass("disabled"),0===response.serviceHistory.length&&$("#vehicle-table--rows").html("No Record Found")):$("#vehicle-table--rows").html("Service Down")}})}),$("body").on("click",function(e){$(".vehicle-table--parts_more").length&&"link--gray"!=e.target.className&&$(".vehicle-table--parts_more").addClass("hide")}),$(".vehicle-table--parts .link--gray").on("click",function(){$(this).next().toggleClass("hide")});var $selectedVehicle=$("#astra-selected-vehicle").val();$(".automation-myvehicle-item").each(function(){var $tobeSelect=$(this).find(".select-my-vehicle").val();$selectedVehicle==$tobeSelect&&$(this).find(".vehicle-info").addClass("selected")})},plp:function(){var minYear,maxYear,width,$sliderPrice,$sliderDistance,priceMin,priceMax,distanceMin,distanceMax,priceMaxExtend,distanceMaxExtend,stepPrice,stepKilometer,numberPrice,numberDistance,stringPrice,stringDistance,priceMaxFinal,distanceMaxFinal,pathname,listElement,contentDiv,facetValArray=[],queryArray=[],sortKey="",redirectURL=document.URL,qPrice="",qDistance="",selectArray=[];function qPriceCheck(){qPrice=$("#sliderPrice").prev().prev().prev().prev().val(),-1<facetValArray.indexOf(qPrice)||facetValArray.push(qPrice)}function qDistanceCheck(){qDistance=$("#sliderDistance").prev().prev().prev().prev().val(),-1<facetValArray.indexOf(qDistance)||facetValArray.push(qDistance)}function textLength(value,status){var maxLength;return"price"===status?maxLength=$(window).width()<1024?14:11:"distance"===status&&(maxLength=$(window).width()<1024?11:8),!(value.length>maxLength)}function formatNumber(value){return value.toString().split("").reverse().join("").match(/\d{1,3}/g).join(".").split("").reverse().join("")}function formatNumberExt(n){return n.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,".")}function parsePrice(price){if(0==price)return"0";var i=parseInt(Math.floor(Math.log(price)/Math.log(1e3)));return Math.round(price/Math.pow(1e3,i),2)+[""," Ribu"," Juta"," Milyar"," Trilyun"][i]}function formatCurrency(input){var input_val=input.val().trim();if("0"===input_val||""===input_val)return"";input.mask("000.000.000.000.000.000",{reverse:!0})}function getFacetValueFromCheckbox(e){return e.hasClass("js-facet-expand")?e.closest("label").prev().prev().val():e.closest("label").prev().prev().prev().val()}1023<windowWidth&&($sliderPrice=$("#sliderPrice"),$sliderDistance=$("#sliderDistance"),priceMin=$("#minPrice").val(),priceMax=$("#maxPrice").val(),distanceMin=$("#minDistance").val(),distanceMax=$("#maxDistance").val(),priceMaxExtend=parseInt($(".maxPriceData").val())+1e7,distanceMaxExtend=parseInt($(".maxDistanceData").val())+1e3,stepPrice=parseInt($("#stepPrice").val()),stepKilometer=parseInt($("#stepKilometer").val()),priceMaxFinal=""==priceMax?priceMaxExtend:priceMax,distanceMaxFinal=""==distanceMax?distanceMaxExtend:distanceMax,$sliderPrice.slider({range:!0,min:0,max:priceMaxExtend,step:stepPrice,values:[priceMin,priceMaxFinal],slide:function(event,ui){$("#minPrice").val(ui.values[0]),$("#maxPrice").val(ui.values[1]),$("#minPriceFormat").val(formatNumber(ui.values[0])),$("#maxPriceFormat").val(formatNumber(ui.values[1])),$("#statusPriceExt").val(!1)},change:function(event,ui){var max_price,min_price,status;""!=$("#minPrice").val()&&""!=$("#maxPrice").val()&&(max_price=parseInt($("#maxPrice").val()),min_price=parseInt($("#minPrice").val()),status=$("#statusPriceExt").val(),0==max_price&&$("#maxPrice").val(1),null==$("#year-filter-max").val()&&($("#form-price").find("input[name=minYear]").remove(),$("#form-price").find("input[name=maxYear]").remove()),""===$("#maxDistance").val()&&($("#form-price").find("input[name=minDistance]").remove(),$("#form-price").find("input[name=maxDistance]").remove()),$('input[name="qMobile"]').remove(),!0!==status&&min_price<max_price&&($("#validation-price").text(""),$("#statusValidation").val("false"),$("#form-price").submit()))}}),$("#minPriceFormat").on({keyup:function(){var maxP;""===formatCurrency($(this))?($(this).val(""),(numberPrice="")===$("#maxPriceFormat").val()&&($("#minPrice").val(""),$sliderPrice.slider("values",0,0))):(numberPrice=parseInt($(this).val().replace(/[^0-9]/g,"")),maxP=parseInt($("#maxPrice").val()),stringPrice=$(this).val().replace(/[^0-9]/g,""),""!==$("#maxPriceFormat").val()?isNaN(parseInt($("#minPrice").val()))&&(numberPrice<maxP?$sliderPrice.slider("values",0,numberPrice):$sliderPrice.slider("values",0,maxP),$sliderPrice.slider("values",1,maxP)):($sliderPrice.slider("values",0,numberPrice),$sliderPrice.slider("values",1,priceMaxFinal)),textLength(stringPrice,"price")?$(".currencyMin").css("display",""):$(".currencyMin").css("display","none"))}}),$("#minPriceFormat").change(function(){var max_price,min_price;priceMaxExtend<numberPrice&&(numberPrice=priceMaxExtend-1e7),$(this).val(formatNumber(numberPrice)),textLength(stringPrice,"price")||$(".currencyMin").css("display",""),$("#minPrice").val(numberPrice),$("#statusPriceExt").val(!1),""!=$("#maxPrice").val()&&((max_price=parseInt($("#maxPrice").val()))<(min_price=parseInt($("#minPrice").val()))?"false"===$("#statusValidation").val()&&($sliderPrice.slider("values",0,min_price),$sliderPrice.slider("values",1,min_price),$("#validation-price").append("Harga maksimal tidak boleh lebih kecil dari harga minimal."),$("#statusValidation").val("true")):($sliderPrice.slider("values",0,min_price),$sliderPrice.slider("values",1,max_price),$("#validation-price").text(""),$("#statusValidation").val("false"),$("#form-price").submit()))}),$("#maxPriceFormat").on({keyup:function(){var minP;""===formatCurrency($(this))?($(this).val(""),(numberPrice="")===$("#minPriceFormat").val()&&($("#maxPrice").val(""),$sliderPrice.slider("values",1,priceMaxFinal))):(numberPrice=parseInt($(this).val().replace(/[^0-9]/g,"")),minP=parseInt($("#minPrice").val()),stringPrice=$(this).val().replace(/[^0-9]/g,""),""!==$("#minPriceFormat").val()?isNaN(parseInt($("#maxPrice").val()))&&(minP<numberPrice?($sliderPrice.slider("values",0,minP),$sliderPrice.slider("values",1,numberPrice)):($sliderPrice.slider("values",0,minP),$sliderPrice.slider("values",1,minP))):($sliderPrice.slider("values",0,priceMin),$sliderPrice.slider("values",1,numberPrice)),textLength(stringPrice,"price")?$(".currencyMax").css("display",""):$(".currencyMax").css("display","none"))}}),$("#maxPriceFormat").change(function(){var max_price,min_price;priceMaxExtend<numberPrice&&(numberPrice=priceMaxExtend-1e7),$(this).val(formatNumber(numberPrice)),textLength(stringPrice,"price")||$(".currencyMax").css("display",""),$("#maxPrice").val(numberPrice),$("#statusPriceExt").val(!1),""!=$("#minPrice").val()&&((max_price=parseInt($("#maxPrice").val()))<(min_price=parseInt($("#minPrice").val()))?"false"===$("#statusValidation").val()&&($sliderPrice.slider("values",0,min_price),$sliderPrice.slider("values",1,min_price),$("#validation-price").append("Harga maksimal tidak boleh lebih kecil dari harga minimal."),$("#statusValidation").val("true")):($sliderPrice.slider("values",0,min_price),$sliderPrice.slider("values",1,max_price),$("#validation-price").text(""),$("#statusValidation").val("false"),$("#form-price").submit()))}),$sliderDistance.slider({range:!0,min:0,max:distanceMaxExtend,step:stepKilometer,values:[distanceMin,distanceMaxFinal],slide:function(event,ui){$("#minDistance").val(ui.values[0]),$("#maxDistance").val(ui.values[1]),$("#minDistanceFormat").val(formatNumber(ui.values[0])),$("#maxDistanceFormat").val(formatNumber(ui.values[1])),$("#statusDistanceExt").val(!1)},change:function(event,ui){var max_distance,min_distance,status;""!=$("#minDistance").val()&&""!=$("#maxDistance").val()&&(max_distance=$("#maxDistance").val(),min_distance=parseInt($("#minDistance").val()),status=$("#statusDistanceExt").val(),0==max_distance&&$("#maxDistance").val(1),null==$("#year-filter-max").val()&&($("#form-distance").find("input[name=minYear]").remove(),$("#form-distance").find("input[name=maxYear]").remove()),""===$("#maxPrice").val()&&($("#form-distance").find("input[name=minPrices]").remove(),$("#form-distance").find("input[name=maxPrices]").remove()),$('input[name="qMobile"]').remove(),!0!==status&&min_distance<max_distance&&($("#validation-distance").text(""),$("#statusValidation").val("false"),$("#form-distance").submit()))}}),$("#minDistanceFormat").on({keyup:function(){var maxD;""===formatCurrency($(this))?($(this).val(""),(numberDistance="")===$("#maxDistanceFormat").val()&&($("#minDistance").val(""),$sliderDistance.slider("values",0,0))):(numberDistance=parseInt($(this).val().replace(/[^0-9]/g,"")),maxD=parseInt($("#maxDistance").val()),stringDistance=$(this).val().replace(/[^0-9]/g,""),""!==$("#maxDistanceFormat").val()?isNaN(parseInt($("#minDistance").val()))&&(numberDistance<maxD?$sliderDistance.slider("values",0,numberDistance):$sliderDistance.slider("values",0,maxD),$sliderDistance.slider("values",1,maxD)):($sliderDistance.slider("values",0,numberDistance),$sliderDistance.slider("values",1,distanceMaxFinal)),textLength(stringDistance,"distance")?$(".minDistanceInput").css("display",""):$(".minDistanceInput").css("display","none"))}}),$("#minDistanceFormat").change(function(){var max_distance,min_distance;distanceMaxExtend<numberDistance&&(numberDistance=distanceMaxExtend-1e3),$(this).val(formatNumber(numberDistance)),textLength(stringDistance,"distance")||$(".minDistanceInput").css("display",""),$("#minDistance").val(numberDistance),$("#statusDistanceExt").val(!1),""!=$("#maxDistance").val()&&((max_distance=parseInt($("#maxDistance").val()))<(min_distance=parseInt($("#minDistance").val()))?"false"===$("#statusValidation").val()&&($sliderDistance.slider("values",0,min_distance),$sliderDistance.slider("values",1,min_distance),$("#validation-distance").append("Kilometer maksimal tidak boleh lebih kecil dari Kilometer minimal."),$("#statusValidation").val("true")):($sliderDistance.slider("values",0,min_distance),$sliderDistance.slider("values",1,max_distance),$("#validation-distance").text(""),$("#statusValidation").val("false"),$("#form-distance").submit()))}),$("#maxDistanceFormat").on({keyup:function(){var minD;""===formatCurrency($(this))?($(this).val(""),(numberDistance="")===$("#minDistanceFormat").val()&&($("#maxDistance").val(""),$sliderDistance.slider("values",1,distanceMaxFinal))):(numberDistance=parseInt($(this).val().replace(/[^0-9]/g,"")),minD=parseInt($("#minDistance").val()),stringDistance=$(this).val().replace(/[^0-9]/g,""),""!==$("#minDistanceFormat").val()?isNaN(parseInt($("#maxDistance").val()))&&(minD<numberDistance?($sliderDistance.slider("values",0,minD),$sliderDistance.slider("values",1,numberDistance)):($sliderDistance.slider("values",0,minD),$sliderDistance.slider("values",1,minD))):($sliderDistance.slider("values",0,distanceMin),$sliderDistance.slider("values",1,numberDistance)),textLength(stringDistance,"distance")?$(".maxDistanceInput").css("display",""):$(".maxDistanceInput").css("display","none"))}}),$("#maxDistanceFormat").change(function(){var max_distance,min_distance;distanceMaxExtend<numberDistance&&(numberDistance=distanceMaxExtend-1e3),$(this).val(formatNumber(numberDistance)),textLength(stringDistance,"distance")||$(".maxDistanceInput").css("display",""),$("#maxDistance").val(numberDistance),$("#statusDistanceExt").val(!1),""!=$("#minDistance").val()&&((max_distance=parseInt($("#maxDistance").val()))<(min_distance=parseInt($("#minDistance").val()))?"false"===$("#statusValidation").val()&&($sliderDistance.slider("values",0,min_distance),$sliderDistance.slider("values",1,min_distance),$("#validation-distance").append("Kilometer maksimal tidak boleh lebih kecil dari Kilometer minimal."),$("#statusValidation").val("true")):($sliderDistance.slider("values",0,min_distance),$sliderDistance.slider("values",1,max_distance),$("#validation-distance").text(""),$("#statusValidation").val("false"),$("#form-distance").submit()))})),$(document).ready(function(){var min,max,productFilter;min=$("#minPrice").val(),max=$("#maxPrice").val(),productFilter="Rp "+parsePrice(min)+" - "+("Rp "+parsePrice(max)),$("#fillerPrice").append(productFilter),""!=$("#minDistance").val()&&""!=$("#maxDistance").val()?($("#minDistanceFormat").val(formatNumber($("#minDistance").val())),$("#maxDistanceFormat").val(formatNumber($("#maxDistance").val())),0<parseInt($("#statusDistance").val())&&($(".distance_filter").prev("._title").addClass("opened"),$(".distance_filter").css("display","block")),$("#fillerKilometer").append(formatNumber($("#minDistance").val())+" km - "+formatNumber($("#maxDistance").val())+" km"),textLength($("#minDistance").val(),"distance")?$(".minDistanceInput").css("display",""):$(".minDistanceInput").css("display","none"),textLength($("#maxDistance").val(),"distance")?$(".maxDistanceInput").css("display",""):$(".maxDistanceInput").css("display","none"),$("#checked-text-Harga").show(),$("#checked-text-Kilometer").text(formatNumberExt($("#minDistance").val())+" km - "+formatNumberExt($("#maxDistance").val())+" km")):$("#checked-text-Kilometer").hide(),""!=$("#minPrice").val()&&""!=$("#maxPrice").val()?($("#minPriceFormat").val(formatNumberExt($("#minPrice").val())),$("#maxPriceFormat").val(formatNumberExt($("#maxPrice").val())),$("#statusPriceExt").val(!0),textLength($("#minPrice").val(),"price")?$(".currencyMin").css("display",""):$(".currencyMin").css("display","none"),textLength($("#maxPrice").val(),"price")?$(".currencyMax").css("display",""):$(".currencyMax").css("display","none"),$("#checked-text-Harga").show(),$("#checked-text-Harga").text("Rp."+formatNumberExt($("#minPrice").val())+" - Rp."+formatNumberExt($("#maxPrice").val()))):$("#checked-text-Harga").hide(),$("#year-filter-min,#year-filter-max").select2({minimumResultsForSearch:-1}),0<parseInt($(".max-year").val())?($(".year_filter").prev("._title").addClass("opened"),$(".year_filter").css("display","block"),$("#checked-text-Tahun").show(),$("#checked-text-Tahun").text($(".min-year").val()+" - "+$(".max-year").val())):$("#checked-text-Tahun").hide()}),$(".facet-filter-common:checkbox:checked").each(function(){var facetValue=this.checked?getFacetValueFromCheckbox($(this)):"";$.inArray(facetValue,facetValArray)<0&&facetValArray.push(facetValue)}),$(document).on("change",".facet-filter-common",function(){var search_term=getFacetValueFromCheckbox($(this));if($(this).prop("checked"))facetValArray.push(search_term),$(".tag-a").css("color","#ff0064"),$("#clear-facet").css("pointer-events","visible");else for(var i=facetValArray.length-1;0<=i;i--)facetValArray[i]===search_term&&facetValArray.splice(i,1);0===facetValArray.length&&($(".tag-a").css("color","#d0d2d3"),$("#clear-facet").css("pointer-events","none"))}),$("#year-filter-min, #year-filter-max").on("select2:open",function(){isNaN(width)&&(width=parseInt($(".select2-selection--single").width())+2),$("body").find(".select2-dropdown").css("max-width",width+"px")}),$(document).on("change","#year-filter-min",function(){var newArr;minYear=$("option:selected",this).text(),$(".min-year").val(minYear),1024<=$(window).width()?""!=$(".max-year").val()&&(parseInt(minYear)>parseInt($(".max-year").val())?"false"===$("#year-validation-status").val()&&($("#year-validation").append("Tahun maksimal tidak boleh lebih kecil dari tahun minimal."),$("#year-validation-status").val("true")):(""===$("#maxDistance").val()&&($(".form-year").find("input[name=minDistance]").remove(),$(".form-year").find("input[name=maxDistance]").remove()),""===$("#maxPrice").val()&&($(".form-year").find("input[name=minPrices]").remove(),$(".form-year").find("input[name=maxPrices]").remove()),$('input[name="qMobile"]').remove(),$("#year-validation").text(""),$("#year-validation-status").val("false"),$(".form-year").submit())):(selectArray=[],""!=$(".max-year").val()?selectArray.push(minYear,$(".max-year").val()):selectArray.push(minYear),newArr=selectArray.join(",").replace(/,/g," - ").split(),$("#checked-text-Tahun").show(),$("#checked-text-Tahun").text(newArr),parseInt(minYear)>parseInt($(".max-year").val())?"false"===$("#year-validation-status").val()&&($("#year-validation").append("Tahun maksimal tidak boleh lebih kecil dari tahun minimal."),$("#year-validation-status").val("true"),$(".apply-filter").prop("disabled",!0)):($("#year-validation").text(""),$("#year-validation-status").val("false"),$(".apply-filter").prop("disabled",!1),""!=$(".max-year").val()&&(qYear=$(".filterTahun").prev().prev().prev().val(),-1<facetValArray.indexOf(qYear)||facetValArray.push(qYear))))}),$(document).on("change","#year-filter-max",function(){var newArr,qYear;maxYear=$("option:selected",this).text(),$(".max-year").val(maxYear),1024<=$(window).width()?""!=$(".min-year").val()&&(parseInt(maxYear)<parseInt($(".min-year").val())?"false"===$("#year-validation-status").val()&&($("#year-validation").append("Tahun maksimal tidak boleh lebih kecil dari tahun minimal."),$("#year-validation-status").val("true")):(""===$("#maxDistance").val()&&($(".form-year").find("input[name=minDistance]").remove(),$(".form-year").find("input[name=maxDistance]").remove()),""===$("#maxPrice").val()&&($(".form-year").find("input[name=minPrices]").remove(),$(".form-year").find("input[name=maxPrices]").remove()),$('input[name="qMobile"]').remove(),$("#year-validation").text(""),$("#year-validation-status").val("false"),$(".form-year").submit())):(selectArray=[],""!=$(".min-year").val()?selectArray.push($(".min-year").val(),maxYear):selectArray.push(maxYear),newArr=selectArray.join(",").replace(/,/g," - ").split(),$("#checked-text-Tahun").show(),$("#checked-text-Tahun").text(newArr),parseInt(maxYear)<parseInt($(".min-year").val())?"false"===$("#year-validation-status").val()&&($("#year-validation").append("Tahun maksimal tidak boleh lebih kecil dari tahun minimal."),$("#year-validation-status").val("true"),$(".apply-filter").prop("disabled",!0)):($("#year-validation").text(""),$("#year-validation-status").val("false"),$(".apply-filter").prop("disabled",!1),""!=$(".min-year").val()&&(qYear=$(".filterTahun").prev().prev().prev().val(),-1<facetValArray.indexOf(qYear)||facetValArray.push(qYear))))}),$(".apply-filter").on("click",function(){var currentYear;""===$("#minPrice").val()&&""!==$("#maxPrice").val()?($("#minPrice").val(0),$("#minPriceFormat").val(0),$("#checked-text-Harga").text("Rp.0 - Rp."+formatNumberExt($("#maxPrice").val()))):""===$("#maxPrice").val()&&""!==$("#minPrice").val()&&($("#maxPrice").val($(".maxPriceData").val()),$("#maxPriceFormat").val(formatNumberExt($(".maxPriceData").val())),$("#checked-text-Harga").text("Rp."+formatNumberExt($("#minPrice").val())+" - Rp."+formatNumberExt($(".maxPriceData").val()))),""===$("#minDistance").val()&&""!==$("#maxDistance").val()?($("#minDistance").val(0),$("#minDistanceFormat").val(0),$("#checked-text-Kilometer").text("0 km - "+formatNumberExt($("#maxDistance").val())+" km")):""===$("#maxDistance").val()&&""!==$("#minDistance").val()&&($("#maxDistance").val($(".maxDistanceData").val()),$("#maxDistanceFormat").val(formatNumberExt($(".maxDistanceData").val())),$("#checked-text-Kilometer").text(formatNumberExt($("#minDistance").val())+" km - "+formatNumberExt($(".maxDistanceData").val())+" km")),""===$(".min-year").val()&&""!==$(".max-year").val()?($(".min-year").val($(".minYearData").val()),$("#year-filter-min").val($(".minYearData").val()),$("#checked-text-Tahun").text($(".minYearData").val()+" - "+$(".max-year").val())):""===$(".max-year").val()&&""!==$(".min-year").val()&&(currentYear=(new Date).getFullYear(),$(".max-year").val(currentYear),$("#year-filter-max").val(currentYear),$("#checked-text-Tahun").text($(".min-year").val()+" - "+currentYear)),function(){for(var searchText="",i=0;i<facetValArray.length;i++){var tempArray=facetValArray[i].split(":");sortKey=tempArray[1],searchText=tempArray[0];for(var obj,j=2;j<tempArray.length;j+=2){""!=tempArray[j]&&((obj={})[tempArray[j]]=tempArray[j+1],queryArray.push(obj))}}var appendUrlRange="";""!=$("input[name='q']").next().val()&&(window.location.href.includes("isUsedCar%3Atrue")?appendUrlRange+="%3AisUsedCar%3Atrue&text="+$("input[name='q']").next().val():appendUrlRange+="&text="+$("input[name='q']").next().val());null!=qDistance&&(appendUrlRange+="&minYear="+$(".min-year").val()+"&maxYear="+$(".max-year").val()+"&minYearData="+$(".minYearData").val());null!=qPrice&&(appendUrlRange+="&minPrices="+$("#minPrice").val()+"&maxPrices="+$("#maxPrice").val()+"&maxPriceData="+$(".maxPriceData").val());null!=qDistance&&(appendUrlRange+="&minDistance="+$("#minDistance").val()+"&maxDistance="+$("#maxDistance").val()+"&maxDistanceData="+$(".maxDistanceData").val());var sortObj={};sortObj.sort=sortKey,queryArray.unshift(sortObj);var values=Object.keys(queryArray).map(function(e){return queryArray[e]}),arr=[];$.each(values,function(key,value){$.each(value,function(key,value){return arr.push(value.replace(/\+/g,"%2B"))})});var appendURL="";appendURL=""!=searchText?"?q="+searchText+"%3A"+arr[0]:"?q=%3A"+arr[0];for(var k=1;k<queryArray.length;k++)for(var property in queryArray[k])-1===arr[k].indexOf("%")&&(arr[k]=encodeURIComponent(arr[k])),appendURL+="%3A"+property+"%3A"+arr[k];redirectURL=(redirectURL=redirectURL.split("?"))[0]+appendURL+appendUrlRange,window.location.href=redirectURL}()}),$(window).width()<1024&&(0<$(".product--filter").children("span").length?$("#clear-facet").css("pointer-events","visible"):$("#clear-facet").css("pointer-events","none"),$("#clear-facet").on("click",function(e){e.preventDefault(),sessionStorage.clear(),redirectURL=""!=$("input[name='q']").next().val()?window.location.href.includes("isUsedCar%3Atrue")?(redirectURL=redirectURL.split("?"))[0]+"?text="+$("input[name='q']").next().val()+"%3Arelevance%3AisUsedCar%3Atrue":(redirectURL=redirectURL.split("?"))[0]+"?text="+$("input[name='q']").next().val():(redirectURL=redirectURL.split("?"))[0],window.location.href=redirectURL}),$("#close-facet").on("click",function(e){e.preventDefault(),redirectURL=(redirectURL=redirectURL.split("?"))[0],window.location.href=redirectURL}),$(".lihat-semua-span li").unwrap(),$(".lihat-semua-button").remove(),$(".lihat-semua-button-pop-up").remove()),1024<=$(window).width()&&$(".filter-reset").on("click",function(e){e.preventDefault(),sessionStorage.clear(),redirectURL=(redirectURL=redirectURL.split("?"))[0],$(".js-facet-expand").prop("checked",!1),facetValArray=[]}),$(window).width()<=992&&(pathname=window.location.pathname,$(document).ready(function(){sessionStorage.getItem("moveURL")!==pathname&&null!==sessionStorage.getItem("moveURL")&&sessionStorage.clear()}),0<$("#mobile-filter").length&&(listElement="<ul>",contentDiv="<div class='tab-content'>",$("._filter-options").each(function(index){var keyword=$(this).find("span:first-child").text().toLowerCase(),titleFilter=$(this).children("span").text();listElement+="<li class='tab' data-tab='"+$(this).children("span").text()+"'><a href='#tab-"+index+"'>"+$(this).children("span").text()+"</a><a id='checked-text-"+$(this).children("span").text().split(" ").join("_")+"' class='text-checkbox-checked-mobile visible-none' data-subtab='"+$(this).children("span").text()+"'></a></li>",keyword.includes("lokasi")||keyword.includes("penjual")||keyword.includes("model")?contentDiv+="<div id='tab-"+index+"'><input type='text' class='search-filter-mobile' id='search-popup-mobile-"+titleFilter+"' placeholder='Cari "+titleFilter+"'/><ul class='ul-mobile'>"+$(this).children("ul").html()+"</ul></div>":contentDiv+="<div id='tab-"+index+"'><ul>"+$(this).children("ul").html()+"</ul></div>"}),listElement+="</ul>",contentDiv+="</div>",$("#mobile-filter").append(listElement),$("#mobile-filter").append(contentDiv),$(".tab-content div:first-child").addClass("active"),$(".tab:first-child").addClass("active"),$(document).ready(function(){$(".tab").each(function(){$(this).trigger("click")}),$(".tab-content div:first-child").addClass("active"),$(".tab:first-child").addClass("active"),$(".tab:last-child").removeClass("active"),$("#tab:last-child").removeClass("active"),null!=sessionStorage.getItem("text"+void 0)||0<$("#mobile-filter").length?($(".tab").each(function(){var joinDataTab=$(this).attr("data-tab").split(" ").join("_"),joinSubDataTab=$(this).find(".text-checkbox-checked-mobile").attr("data-subtab").split(" ").join("_");"Harga"!==joinDataTab&&"Kilometer"!==joinDataTab&&"Tahun"!==joinDataTab&&function(dataTab,dataSubtab,indeks){{var arrayTextCheckbox;dataTab==dataSubtab&&(null!=sessionStorage.getItem("text"+dataTab)?($("#checked-text-"+dataTab).text(sessionStorage.getItem("text"+dataTab)),""===sessionStorage.getItem("text"+dataTab)&&$("#checked-text-"+dataTab).hide()):""==$("#checked-text-"+dataTab).text()&&$("#checked-text-"+dataTab).hide(),arrayTextCheckbox=[],$(document).ready(function(){$(".tab").each(function(){arrayTextCheckbox[dataTab]=[],$.each($("#tab-"+indeks+" input[name='input-checked']:checked"),function(){arrayTextCheckbox[dataTab].push($(this).next("span").text())}),$("#checked-text-"+dataTab).text(arrayTextCheckbox[dataTab].join(", ")),sessionStorage.setItem("moveURL",window.location.pathname),0!=$("#checked-text-"+dataTab).text().trim().length?$("#checked-text-"+dataTab).show():$("#checked-text-"+dataTab).hide()})}))}}(joinDataTab,joinSubDataTab,$(this).index())}),$("#checked-text-"+void 0).text(sessionStorage.getItem("text"+void 0))):$("#checked-text-"+void 0).css("display","none")}),$(".tab").on("click",function(event){sessionStorage.getItem("moveURL")!==pathname&&null!==sessionStorage.getItem("moveURL")&&sessionStorage.clear(),event.preventDefault(),$(this).siblings().removeClass("active"),$(this).addClass("active");var joinDataTab=$(this).attr("data-tab").split(" ").join("_"),joinSubDataTab=$(this).find(".text-checkbox-checked-mobile").attr("data-subtab").split(" ").join("_");"Harga"!==joinDataTab&&"Kilometer"!==joinDataTab&&"Tahun"!==joinDataTab&&function(dataTab,dataSubtab,indeks){{var arrayTextCheckbox;dataTab==dataSubtab&&(null!=sessionStorage.getItem("text"+dataTab)?($("#checked-text-"+dataTab).text(sessionStorage.getItem("text"+dataTab)),""===sessionStorage.getItem("text"+dataTab)&&$("#checked-text-"+dataTab).hide()):""==$("#checked-text-"+dataTab).text()&&$("#checked-text-"+dataTab).hide(),arrayTextCheckbox=[],$(document).ready(function(){$("input").on("change",function(){arrayTextCheckbox[dataTab]=[],$.each($("#tab-"+indeks+" input[name='input-checked']:checked"),function(){arrayTextCheckbox[dataTab].push($(this).next("span").text())}),$("#checked-text-"+dataTab).text(arrayTextCheckbox[dataTab].join(", ")),sessionStorage.setItem("moveURL",window.location.pathname),0!=$("#checked-text-"+dataTab).text().trim().length?$("#checked-text-"+dataTab).show():$("#checked-text-"+dataTab).hide()})}))}}(joinDataTab,joinSubDataTab,$(this).index());var divID=$(this).children("a").attr("href");$(divID).siblings().removeClass("active"),$(divID).addClass("active")}),$(".apply-filter").on("click",function(){$(".tab").each(function(index){sessionStorage.clear;var joinDataTab=$(this).attr("data-tab").split(" ").join("_");0!=$("#checked-text-"+joinDataTab).text().trim().length?sessionStorage.setItem("text"+joinDataTab,$("#checked-text-"+joinDataTab).text()):sessionStorage.removeItem("text"+joinDataTab)})}),$("._filter-options").each(function(index){var filterName=$(this).children("span").text();$("#tab-"+index).find("#search-popup-mobile-"+filterName).keyup(function(){var value=$(this).val().toUpperCase();$(".li-mobile-"+filterName).filter(function(){$(this).toggle(-1<$(this).text().toUpperCase().indexOf(value))})})})),$("#openFilterpopup").on("click",function(){var numberPrice,stringPrice,$sliderPrice,priceMin,priceMax,priceMaxExtend,stepPrice,selectArrayPrice,priceMaxFinal,numberDistance,stringDistance,$sliderDistance,distanceMin,distanceMax,distanceMaxExtend,stepKilometer,selectArrayDistance,distanceMaxFinal,width;null!==window.location.search&&""!==window.location.search||(sessionStorage.clear,$(".visible-none").hide()),$(".hideScreen").addClass("apply"),$("#filter-popup").show(),$(".filter-button-holder").show(),$(".tab").each(function(){$(".tab-content div:last-child").removeClass("active")}),$sliderPrice=$("#sliderPrice"),priceMin=$("#minPrice").val(),priceMax=$("#maxPrice").val(),priceMaxExtend=parseInt($(".maxPriceData").val())+1e7,stepPrice=parseInt($("#stepPrice").val()),selectArrayPrice=[],priceMaxFinal=""==priceMax?priceMaxExtend:priceMax,$sliderPrice.slider({range:!0,min:0,max:priceMaxExtend,step:stepPrice,values:[priceMin,priceMaxFinal],slide:function(event,ui){$("#minPrice").val(ui.values[0]),$("#maxPrice").val(ui.values[1]),$("#minPriceFormat").val(formatNumber(ui.values[0])),$("#maxPriceFormat").val(formatNumber(ui.values[1])),$("#statusPriceExt").val(!1),qPriceCheck(ui.values[0],ui.values[1])},change:function(){var minPrice,maxPrice;selectArrayPrice=[],""!=$("#minPriceFormat").val().trim()&&(minPrice="Rp."+formatNumber(parseInt($("#minPriceFormat").val().replace(/[^0-9]/g,""))),selectArrayPrice.push(minPrice)),""!=$("#maxPriceFormat").val().trim()&&(maxPrice="Rp."+formatNumber(parseInt($("#maxPriceFormat").val().replace(/[^0-9]/g,""))),selectArrayPrice.push(maxPrice));var newArr=selectArrayPrice.join(",").replace(/,/g," - ").split();$("#checked-text-Harga").text(newArr),selectArrayPrice.length<1?$("#checked-text-Harga").hide():$("#checked-text-Harga").show(),"true"===$("#statusValidation").val()&&($("#validation-price").text(""),""===$("#validation-distance").text()&&($(".apply-filter").prop("disabled",!1),$("#statusValidation").val("false")))}}),$("#minPriceFormat").on("input",function(){var maxP;""===formatCurrency($(this))?($(this).val(""),(numberPrice="")===$("#maxPriceFormat").val()&&($("#minPrice").val(""),$sliderPrice.slider("values",0,0))):(numberPrice=parseInt($(this).val().replace(/[^0-9]/g,"")),maxP=parseInt($("#maxPrice").val()),stringPrice=$(this).val().replace(/[^0-9]/g,""),""!==$("#maxPriceFormat").val()?(numberPrice<maxP?$sliderPrice.slider("values",0,numberPrice):$sliderPrice.slider("values",0,maxP),$sliderPrice.slider("values",1,maxP)):($sliderPrice.slider("values",0,numberPrice),$sliderPrice.slider("values",1,priceMaxFinal)),textLength(stringPrice,"price")?$(".currencyMin").css("display",""):$(".currencyMin").css("display","none"),"true"===$("#statusValidation").val()&&""===$("#validation-distance").text()&&numberPrice<priceMaxFinal&&($("#validation-price").text(""),$(".apply-filter").prop("disabled",!1),$("#statusValidation").val("false")))}),$("#minPriceFormat").on("change",function(){var newArr;priceMaxExtend<numberPrice&&(numberPrice=priceMaxExtend-1e7,selectArrayPrice=[],0==$("#maxPrice").val().length?selectArrayPrice.push("Rp."+formatNumber(numberPrice)):selectArrayPrice.push("Rp."+formatNumber(numberPrice),"Rp."+formatNumber($("#maxPrice").val())),newArr=selectArrayPrice.join(",").replace(/,/g," - ").split(),$("#checked-text-Harga").text(newArr)),0<numberPrice&&($(this).val(formatNumber(numberPrice)),textLength(stringPrice,"price")||$(".currencyMin").css("display","")),$("#minPrice").val(numberPrice),$("#statusPriceExt").val(!1),""!=$("#maxPrice").val()&&(parseInt($("#maxPrice").val())<parseInt($("#minPrice").val())?("true"===$("#statusValidation").val()&&$("#statusValidation").val("false"),"false"===$("#statusValidation").val()&&($("#validation-price").append("Harga maksimal tidak boleh lebih kecil dari harga minimal."),$(".apply-filter").prop("disabled",!0),$("#statusValidation").val("true"))):(qPriceCheck(),"false"===$("#statusValidation").val()&&($(".apply-filter").prop("disabled",!1),$("#validation-price").text(""))))}),$("#maxPriceFormat").on("input",function(){var minP;""===formatCurrency($(this))?($(this).val(""),(numberPrice="")===$("#minPriceFormat").val()&&($("#maxPrice").val(""),$sliderPrice.slider("values",1,priceMaxFinal))):(numberPrice=parseInt($(this).val().replace(/[^0-9]/g,"")),minP=parseInt($("#minPrice").val()),stringPrice=$(this).val().replace(/[^0-9]/g,""),""!==$("#minPriceFormat").val()?minP<numberPrice?($sliderPrice.slider("values",0,minP),$sliderPrice.slider("values",1,numberPrice)):($sliderPrice.slider("values",0,minP),$sliderPrice.slider("values",1,minP)):($sliderPrice.slider("values",0,priceMin),$sliderPrice.slider("values",1,numberPrice)),textLength(stringPrice,"price")?$(".currencyMax").css("display",""):$(".currencyMax").css("display","none"),"true"===$("#statusValidation").val()&&""===$("#validation-distance").text()&&priceMin<numberPrice&&($("#validation-price").text(""),$(".apply-filter").prop("disabled",!1),$("#statusValidation").val("false")))}),$("#maxPriceFormat").on("change",function(){var newArr;priceMaxExtend<numberPrice&&(numberPrice=priceMaxExtend-1e7,selectArrayPrice=[],0==$("#minPrice").val().length?selectArrayPrice.push("Rp."+formatNumber(numberPrice)):selectArrayPrice.push("Rp."+formatNumber($("#minPrice").val()),"Rp."+formatNumber(numberPrice)),newArr=selectArrayPrice.join(",").replace(/,/g," - ").split(),$("#checked-text-Harga").text(newArr)),0<numberPrice&&($(this).val(formatNumber(numberPrice)),textLength(stringPrice,"price")||$(".currencyMax").css("display","")),$("#maxPrice").val(numberPrice),$("#statusPriceExt").val(!1),""!=$("#minPrice").val()&&(parseInt($("#maxPrice").val())<parseInt($("#minPrice").val())?("true"===$("#statusValidation").val()&&$("#statusValidation").val("false"),"false"===$("#statusValidation").val()&&($("#validation-price").append("Harga maksimal tidak boleh lebih kecil dari harga minimal."),$(".apply-filter").prop("disabled",!0),$("#statusValidation").val("true"))):(qPriceCheck(),"false"===$("#statusValidation").val()&&($(".apply-filter").prop("disabled",!1),$("#validation-price").text(""))))}),$sliderDistance=$("#sliderDistance"),distanceMin=$("#minDistance").val(),distanceMax=$("#maxDistance").val(),distanceMaxExtend=parseInt($(".maxDistanceData").val())+1e3,stepKilometer=parseInt($("#stepKilometer").val()),selectArrayDistance=[],distanceMaxFinal=""==distanceMax?distanceMaxExtend:distanceMax,$sliderDistance.slider({range:!0,min:0,max:distanceMaxExtend,step:stepKilometer,values:[distanceMin,distanceMaxFinal],slide:function(event,ui){$("#minDistance").val(ui.values[0]),$("#maxDistance").val(ui.values[1]),$("#minDistanceFormat").val(formatNumber(ui.values[0])),$("#maxDistanceFormat").val(formatNumber(ui.values[1])),$("#statusDistanceExt").val(!1),qDistanceCheck(ui.values[0],ui.values[1])},change:function(){var minDistance,maxDistance;selectArrayDistance=[],""!=$("#minDistanceFormat").val().trim()&&(minDistance=formatNumber(parseInt($("#minDistanceFormat").val().replace(/[^0-9]/g,"")))+" km",selectArrayDistance.push(minDistance)),""!=$("#maxDistanceFormat").val().trim()&&(maxDistance=formatNumber(parseInt($("#maxDistanceFormat").val().replace(/[^0-9]/g,"")))+" km",selectArrayDistance.push(maxDistance));var newArr=selectArrayDistance.join(",").replace(/,/g," - ").split();$("#checked-text-Kilometer").text(newArr),selectArrayDistance.length<1?$("#checked-text-Kilometer").hide():$("#checked-text-Kilometer").show(),"true"===$("#statusValidation").val()&&($("#validation-distance").text(""),""===$("#validation-price").text()&&($(".apply-filter").prop("disabled",!1),$("#statusValidation").val("false")))}}),$("#minDistanceFormat").on("input",function(){var maxD;""===formatCurrency($(this))?($(this).val(""),(numberDistance="")===$("#maxDistanceFormat").val()&&($("#minDistance").val(""),$sliderDistance.slider("values",0,0))):(numberDistance=parseInt($(this).val().replace(/[^0-9]/g,"")),maxD=parseInt($("#maxDistance").val()),stringDistance=$(this).val().replace(/[^0-9]/g,""),""!==$("#maxDistanceFormat").val()?(numberDistance<maxD?$sliderDistance.slider("values",0,numberDistance):$sliderDistance.slider("values",0,maxD),$sliderDistance.slider("values",1,maxD)):($sliderDistance.slider("values",0,numberDistance),$sliderDistance.slider("values",1,distanceMaxFinal)),textLength(stringDistance,"distance")?$(".minDistanceInput").css("display",""):$(".minDistanceInput").css("display","none"),"true"===$("#statusValidation").val()&&""===$("#validation-price").text()&&numberDistance<distanceMaxFinal&&($("#validation-distance").text(""),$(".apply-filter").prop("disabled",!1),$("#statusValidation").val("false")))}),$("#minDistanceFormat").on("change",function(){var newArr;distanceMaxExtend<numberDistance&&(numberDistance=distanceMaxExtend-1e3,selectArrayDistance=[],0==$("#maxDistance").val().length?selectArrayDistance.push(formatNumber(numberDistance)+" km"):selectArrayDistance.push(formatNumber(numberDistance)+" km",formatNumber($("#maxDistance").val()+" km")),newArr=selectArrayDistance.join(",").replace(/,/g," - ").split(),$("#checked-text-Kilometer").text(newArr)),0<numberDistance&&($(this).val(formatNumber(numberDistance)),textLength(stringDistance,"distance")||$(".minDistanceInput").css("display","")),$("#minDistance").val(numberDistance),$("#statusDistanceExt").val(!1),""!=$("#maxDistance").val()&&(parseInt($("#maxDistance").val())<parseInt($("#minDistance").val())?("true"===$("#statusValidation").val()&&$("#statusValidation").val("false"),"false"===$("#statusValidation").val()&&($("#validation-distance").append("Kilometer maksimal tidak boleh lebih kecil dari Kilometer minimal."),$(".apply-filter").prop("disabled",!0),$("#statusValidation").val("true"))):(qDistanceCheck(),"false"===$("#statusValidation").val()&&($(".apply-filter").prop("disabled",!1),$("#validation-distance").text(""))))}),$("#maxDistanceFormat").on("input",function(){var minD;""===formatCurrency($(this))?($(this).val(""),(numberDistance="")===$("#minDistanceFormat").val()&&($("#maxDistance").val(""),$sliderDistance.slider("values",1,distanceMaxFinal))):(numberDistance=parseInt($(this).val().replace(/[^0-9]/g,"")),minD=parseInt($("#minDistance").val()),stringDistance=$(this).val().replace(/[^0-9]/g,""),""!==$("#minDistanceFormat").val()?minD<numberDistance?($sliderDistance.slider("values",0,minD),$sliderDistance.slider("values",1,numberDistance)):($sliderDistance.slider("values",0,minD),$sliderDistance.slider("values",1,minD)):($sliderDistance.slider("values",0,distanceMin),$sliderDistance.slider("values",1,numberDistance)),textLength(stringDistance,"distance")?$(".maxDistanceInput").css("display",""):$(".maxDistanceInput").css("display","none"),"true"===$("#statusValidation").val()&&""===$("#validation-price").text()&&distanceMin<numberDistance&&($("#validation-distance").text(""),$(".apply-filter").prop("disabled",!1),$("#statusValidation").val("false")))}),$("#maxDistanceFormat").on("change",function(){var newArr;distanceMaxExtend<numberDistance&&(numberDistance=distanceMaxExtend-1e3,selectArrayDistance=[],0==$("#minDistance").val().length?selectArrayDistance.push(formatNumber(numberDistance)+" km"):selectArrayDistance.push(formatNumber($("#minDistance").val())+" km",formatNumber(numberDistance)+" km"),newArr=selectArrayDistance.join(",").replace(/,/g," - ").split(),$("#checked-text-Kilometer").text(newArr)),0<numberDistance&&($(this).val(formatNumber(numberDistance)),textLength(stringDistance,"distance")||$(".maxDistanceInput").css("display","")),$("#maxDistance").val(numberDistance),$("#statusDistanceExt").val(!1),""!=$("#minDistance").val()&&(parseInt($("#maxDistance").val())<parseInt($("#minDistance").val())?("true"===$("#statusValidation").val()&&$("#statusValidation").val("false"),"false"===$("#statusValidation").val()&&($("#validation-distance").append("Kilometer maksimal tidak boleh lebih kecil dari Kilometer minimal."),$(".apply-filter").prop("disabled",!0),$("#statusValidation").val("true"))):(qDistanceCheck(),"false"===$("#statusValidation").val()&&($(".apply-filter").prop("disabled",!1),$("#validation-distance").text(""))))}),$("#year-filter-min").select2({dropdownParent:$("#mobile-filter .tab-content"),minimumResultsForSearch:-1}),$("#year-filter-max").select2({dropdownParent:$("#mobile-filter .tab-content"),minimumResultsForSearch:-1}),$("#year-filter-min").next().next().remove(),$("#year-filter-max").next().next().remove(),$("#year-filter-min, #year-filter-max").on("select2:open",function(){isNaN(width)&&(width=parseInt($(".tab-content").find(".select2-dropdown").width())+14),$(".tab-content").find(".select2-dropdown").css("max-width",width+"px")})}),$(".cancel-filter").on("click",function(){window.location.href=document.URL}),$(".close-filter").on("click",function(){window.location.href=document.URL})),$(document).ready(function(){$(".lihat-semua-span").hide(),$(".lihat-semua-button").show(),$(".lihat-semua-button-pop-up").show()}),$("._filter-options span").on("click",function(){$(this).toggleClass("opened"),$(this).siblings("ul").slideToggle(),$(this).parents("._filter-options").find(".color_filter").css("display","flex"),$(this).parents("._filter-options").find(".color_filter").css("flex-wrap","wrap"),$(this).parents("._filter-options").find(".color_filter").css("text-align","center")}),$(".lihat-semua-button").on("click",function(){$(this).toggleClass("opened"),$(this).siblings("div.lihat-semua-span").slideToggle(),$(this).hasClass("opened")?$(this).text("Sembunyikan ▴"):$(this).text("Lihat Semua ▾")}),$(".facet__list__checkbox").each(function(){$(this).prop("checked")&&($(this).parents("._filter-options").find("._title").addClass("opened"),$(this).closest("ul").css("display","block"),$(this).closest("ul").siblings("span").find(".closed").addClass("opened"),$(this).parents("._filter-options").find(".color_filter").css("display","flex"),$(this).parents("._filter-options").find(".color_filter").css("flex-wrap","wrap"),$(this).parents("._filter-options").find(".color_filter").css("text-align","center"))}),$(".facet-filter-common").each(function(){var inputVal;$.each($(this).parents("form").find("input"),function(){inputVal=$(this).val(),inputVal=encodeURIComponent(inputVal).replace(/%3A/g,":").replace(/%20/g," ").replace(/%25/g,"%").replace(/%2B/g,"+"),$(this).val(inputVal)})}),$(window).width()<1025&&$("#compare-pane").is(":visible")&&$(".footer").addClass("compare-footer"),$(".expandClose").on("click",function(){$(this).closest(".modal-expand").hide(),$(this).closest(".modal-expand").removeClass("active"),$(this).parents(".facet__list").css("height","")}),$(".js-facet").each(function(){var target=$(this).data("id");$(target).find(".lihat-semua-button-pop-up").on("click",function(){$(".js-facet").find(".modal-expand.active").removeClass("active"),$(this).next(".modal-expand").addClass("active"),$(this).parents(".facet__list").css("height","140px")});var count=target.split("#")[1];$("#search-popup-"+count).focus(function(){$(this).css("border","solid 1px blue")}),$(target).find("#search-popup-"+count).keyup(function(){var value=$(this).val().toUpperCase();$(".li-name-"+count).filter(function(){$(this).toggle(-1<$(this).text().toUpperCase().indexOf(value))})})})},bookAppoinment:function(){var navitem;0<$("#service-nav").length&&($("#service-nav a.link-item").each(function(){var el=$(this);el.hasClass("active")&&$("#selected-nav-item").text(el.text())}),navitem=$("#service-nav").find("ul").clone(),$("#account-nav-item").append(navitem),$("#selected-nav-item").on("click",function(e){e.stopPropagation(),$("#account-nav-item").slideToggle()}),$("body").on("click",function(){$("#account-nav-item").slideUp()}))},dealerLocator:function(){$(window).on("load resize",function(){$(window).width()<=992&&setTimeout(function(){$(".branch__details-header a").click(function(){$(".branch__details-wrapper").hide(),$(".branch__filter-wrapper").show()}),$(".js-store-finder-navigation-list > li, .icon-Current_Location").click(function(){$(".branch__details-wrapper").show(),$(".branch__filter-wrapper").hide()}),$(".js-store-finder-search-input, #cartype--dropDown, #brand--dropDown").on("change",function(){$(".branch__details-wrapper").hide(),$(".branch__filter-wrapper").show()})},1e3)})},feedbackrating:function(){$(".orderfeedback__rating").each(function(){$(this).find(".ratinglevel__item.active").length&&($(this).find(".ratinglevel__item input").data("rule-required",!1).removeClass("error"),$(this).find(".form-group").removeClass("error-element"),$(this).find(".orderfeedback__ratinglevel label.error").remove())}),$("#orderFeedbackForm .btn-validation").on("click",function(){$("#orderFeedbackForm").valid()?$("#orderFeedbackForm").submit():$(".orderfeedback__rating").each(function(){$(this).find(".ratinglevel__item.active").length&&($(this).find(".ratinglevel__item input").data("rule-required",!1).removeClass("error"),$(this).find(".form-group").removeClass("error-element"),$(this).find(".orderfeedback__ratinglevel label.error").remove())})}),$('.ratinglevel input[type="radio"]').on("click",function(){var starRatingValue=$(this).val(),get_parent=$(this).parents(".orderfeedback__rating");get_parent.find(".ratinglevel__item ").removeClass("active"),$(this).parents(".ratinglevel").find("input").prop("checked",!1),get_parent.find(".ratingcontent li").hide().removeClass("active_feedback"),$(this).parent().prevAll().addClass("active");var ratinglevel=("ONE"==starRatingValue?1:"TWO"==starRatingValue?2:"THREE"==starRatingValue?3:"FOUR"==starRatingValue?4:"FIVE"==starRatingValue?5:starRatingValue)-1;$(this).prop("checked",!0),get_parent.find(".ratingcontent li:eq("+ratinglevel+")").show().addClass("active_feedback"),get_parent.find(".ratinglevel__item.active").length&&(get_parent.find(".ratinglevel__item input").data("rule-required",!1).removeClass("error"),get_parent.find(".form-group").removeClass("error-element"),get_parent.find(".orderfeedback__ratinglevel label.error").remove()),get_parent.find(".feedback-comments").not("hide")&&get_parent.find(".feedback-comments").addClass("hide")}),$('.orderfeedback__ratingitem input[type="radio"]').on("click",function(){$(this).parents(".orderfeedback__ratingitems").find('input[type="radio"]').removeClass("error"),$(this).parents(".orderfeedback__ratingitems").find(".orderfeedback__ratingitem").removeClass("active"),$(this).parent(".orderfeedback__ratingitem").addClass("active")});$('.orderfeedback__ratingitem input[type="radio"]').each(function(){$(this).on("click",function(){"other"==$(this).val().toLowerCase()||"lain"==$(this).val().toLowerCase()?$(this).parents(".orderfeedback__rating").find(".feedback-comments").removeClass("hide"):$(this).parents(".orderfeedback__rating").find(".feedback-comments").addClass("hide")})}),$(".ratinglevel__item").each(function(){$(this).on("click",function(){$(this).parents(".orderfeedback__rating").find(".orderfeedback__ratingitems.active_feedback .orderfeedback__ratingitem").each(function(){$(this).find("input[type='radio']").prop("checked",!1),$(this).removeClass("active")})})})},getCartCount:function(){$(".addBundleToCartButton").on("click",function(){$(".add_to_cart_form").removeClass("bundleForm-active"),$(this).closest(".add_to_cart_form").addClass("bundleForm-active");var currentCode=$(".bundleForm-active").find("input[name='serviceProductCode']").val();$.ajax({url:ACC.config.contextPath+"/sevaservice/cart-count",type:"GET",data:{},success:function(data){$("#addBundleToCartForm_"+currentCode).submit(),$("input[name='isCartNotEmpty']").val(data)}})})},getOrderStatus:function(){var orderCode,orderType,orderTypeTestDrive,brand,bookingType;$("body").find("#order_status").length&&(orderCode=$("#order_code").html().trim(),orderType=$("#order_type").val(),orderTypeTestDrive=$("#order_type_test_drive").text(),brand=$("#brand").html().trim(),bookingType=$("#booking_type").val(),$.ajax({url:ACC.config.contextPath+"/"+ACC.config.lang+"/my-account/orderStatus/",type:"GET",data:{orderCode:orderCode,orderType:orderType,orderTypeTestDrive:orderType,brand:brand,bookingType:bookingType},success:function(data){$("#order-status-form").html(data).removeClass("content-loader"),$("#SEO_text_container").tinyscrollbar({thumbSize:1}),$(".status-details ul").hide(),$(".status-details").find("ul"+$(".status-chart ul li.active").data("status")).show(),990<$(window).width()?$(".status-chart ul li.order-complete").on("mouseover",function(){$(".status-details ul").hide(),$(".status-chart ul li").removeClass("active"),$(this).addClass("active"),$(".status-details").find("ul"+$(this).data("status")).show()}):$(".status-chart ul li.order-complete").on("click",function(){$(".status-details ul").hide(),$(".status-chart ul li").removeClass("active"),$(this).addClass("active"),$(".status-details").find("ul"+$(this).data("status")).show()});var overflow_tab_li_count=$("#status .overflow_tab").find("li").length,overflow_tab_li_width=$("#status .overflow_tab").find("li").outerWidth(),currentStatus=$("[id^=car_order_status]:last").val();$(window).width()<990&&$("#status .overflow_tab").width(overflow_tab_li_count*overflow_tab_li_width),$("#order_newcar_creation_status").text(defaultValueProviderByText("#order_creation")),$("#order_newcar_dealer_location").text(defaultValueProviderByVal("#newcar_SalesSource_status")),$("#order_newcar_agent_name").text(defaultValueProviderByText("#newcar_salesManName_status")),$("#order_newcar_actual_brand").text(defaultValueProviderByVal("#newcar_brand_status")),$("#order_newcar_actual_model").text(defaultValueProviderByVal("#newcar_model_status")),$("#order_carURL").attr("src",$("#newcar_carURL").val()),$("#testdriveorder_carURL").attr("src",$("#testdrivecar_carURL").val()),$("#order_newcar_actual_year").text(defaultValueProviderByVal("#newcar_year_status")),$("#order_newcar_actual_color").text(defaultValueProviderByVal("#newcar_color_status"));var actualDeliveryDate=$("#newcar_actualDeliveryDate_status").text();""==actualDeliveryDate||"-"==actualDeliveryDate?$("#order_newcar_schedule_date").text(""==$("#newcar_planDeliveryDate_status").text()?"-":$("#newcar_planDeliveryDate_status").text()):""==actualDeliveryDate&&"-"==actualDeliveryDate||$("#order_newcar_schedule_date").text(""==$("#newcar_actualDeliveryDate_status").text()?"-":$("#newcar_actualDeliveryDate_status").text()),$("#order_newcar_dPAmount").text(defaultValueProviderByText("#newcar_DPAmount_status")),$("#car_model_status").text(defaultValueProviderByText("#car_model")),$("#car_job_type_status").text(defaultValueProviderByText("#car_job_type")),$("#car_engine_number_status").text(defaultValueProviderByText("#car_engine_number")),$("#car_police_number_status").text(defaultValueProviderByText("#car_police_number")),$("#order_creation_status").text(defaultValueProviderByText("#order_creation")),$("#order_creation_booking_Date").text(defaultValueProviderByText("#order_creation")),$("#order_newcar_creation_credit_tenure").text(defaultValueProviderByVal("#status_order_newcar_creation_credit_tenure")),$("#order_newcar_creation_credit_installment").text(defaultValueProviderByVal("#status_order_newcar_creation_credit_installment")),$("#order_newcar_tradein_price").text(defaultValueProviderByVal("#status_tradein_price")),$("#order_newcar_price_tradein").text(defaultValueProviderByVal("#status_tradein_price")),$("#requested_model_status").text(defaultValueProviderByText("#requested_model")),$("#order_status_order_year_tenure_year_lable").text($("#status_order_year_tenure_year_lable").val()),$("#order_carURLPresent").val($("#carURLPresent").val());var notFountUrl,carURL=$("#newcar_carURL").val();function defaultValueProviderByVal(elementId){return""==$(elementId).val()||null==$(elementId).val()?"-":$(elementId).val()}function defaultValueProviderByText(elementId){return""==$(elementId).text()||null==$(elementId).text()?"-":$(elementId).text()}""==carURL?(notFountUrl=ACC.config.themeResourcePath+"/images/product_image/astra-no-image.png",$("#order_carURL").attr("src",notFountUrl)):""!=carURL&&$("#order_carURL").attr("src",carURL),$("#testdriveorder_carURLPresent").val($("#carURLPresent").val()),""==(carURL=$("#testdrivecar_carURL").val())?(notFountUrl=ACC.config.themeResourcePath+"/images/product_image/astra-no-image.png",$("#testdriveorder_carURL").attr("src",notFountUrl)):""!=carURL&&$("#testdriveorder_carURL").attr("src",carURL);var newcarrequestedModel=$("#requested_model").text().trim().toLowerCase(),newcarrequestedBrand=$("#brand").text().trim().toLowerCase(),newcarrequestedColor=$("#requested_color").text().trim().toLowerCase(),newcaractualModel=$("#order_newcar_actual_model").text().trim().toLowerCase(),newcaractualBrand=$("#order_newcar_actual_brand").text().trim().toLowerCase(),newcaractualColor=$("#order_newcar_actual_color").text().trim().toLowerCase();newcarrequestedModel===newcaractualModel&&newcarrequestedBrand===newcaractualBrand&&newcarrequestedColor===newcaractualColor&&$(".actualNewCarDetails").addClass("disable");var totalPrice=$("#ordertotalPrice").text();""!=totalPrice&&(totalPrice=totalPrice.replace(/[.]/g,""));var newtradeInPrice,amountPaid,requestedModel,actualModel,actualBrand,requestedBrand,newtotalPrice=totalPrice.replace("Rp ",""),tradeInPrice=$("#order_newcar_tradein_price").text();"-"!=tradeInPrice&&""!=tradeInPrice?(newtradeInPrice=(tradeInPrice=tradeInPrice.replace(/[.]/g,"")).replace("Rp ",""),amountPaid=parseInt(newtotalPrice)-parseInt(newtradeInPrice),$("#tradein_amountpaid").text("Rp. "+amountPaid.toLocaleString("id"))):$("#tradein_amountpaid").text($("#ordertotalPrice").text()),$(document).on("click","#order-feedback-status",function(){$(this).prop("href",ACC.config.encodedContextPath+"/order-feedback?orderCode="+orderCode)}),$("#order-feedback-status").prop("href",ACC.config.encodedContextPath+"/order-feedback?orderCode="+orderCode),$("#car_orderstatus").text(currentStatus),"Service In Branch"===bookingType&&($("#car_service_advisor_name").text(defaultValueProviderByText("#car_service_advisor_name_status")),$("#car_service_branch_name").text(defaultValueProviderByText("#car_service_branch_name_status")),$("#car_service_invoice_amount").text(defaultValueProviderByText("#car_service_invoice_amount_status")),$("#car_service_spare_parts").text(defaultValueProviderByText("#car_service_spare_parts_status")),$("#car_service_type_status").text(defaultValueProviderByText("#car_service_type")),$("#car_service_notes_status").text(defaultValueProviderByText("#car_service_notes")),$("#car_service_branch_name_status").text(defaultValueProviderByText("#car_service_branch_name")),$("#car_service_chasis_number_status").text(defaultValueProviderByVal("#car_service_chasis_number")),"Request Sent"!==currentStatus&&"Permintaan terkirim"!==currentStatus||$("#order_cancel_button").removeClass("hide")),"Home Service"===bookingType&&($("#car_service_invoice_amount").text(defaultValueProviderByText("#car_service_invoice_amount_status")),$("#car_service_spare_parts").text(defaultValueProviderByText("#car_service_spare_parts_status")),$("#car_service_advisor_name").text(defaultValueProviderByText("#car_service_mechanic_name_status")),$("#request_sent_status").text(defaultValueProviderByText("#order_creation")),$("#car_service_type_status").text(defaultValueProviderByText("#car_service_type")),"Request Sent"!==currentStatus&&"Permintaan terkirim"!==currentStatus||$("#order_cancel_button").removeClass("hide")),"Test Drive"===orderTypeTestDrive&&($("#order_agentName").text(defaultValueProviderByText("#order_testdrive_agentName_status")),$("#order_actualModel").text(defaultValueProviderByText("#order_testdrive_actualModel_status")),$("#order_actualBrand").text(defaultValueProviderByText("#order_testdrive_actualBrand_status")),$("#order_dealeraddress").text(defaultValueProviderByText("#order_testdrive_dealeraddress_status")),$("#requestedcar_testdrive_model").text(defaultValueProviderByText("#car_testdrive_model")),requestedModel=$("#car_testdrive_model").text().trim().toLowerCase(),actualModel=$("#order_testdrive_actualModel_status").text().trim().toLowerCase(),actualBrand=$("#order_testdrive_actualBrand_status").text().trim().toLowerCase(),requestedBrand=$("#brand").text().trim().toLowerCase(),requestedModel===actualModel&&requestedBrand===actualBrand&&$(".actualCarDetails").addClass("disable"));for(var dateFormatList=[".confirmstatus1",".confirmstatus2",".completestatus1",".completestatus2",".requestsentdate",".paymentDateTime1",".paymentDateTime2",".paymentDateTime3",".paymentDateTime4",".requestCompleteDateTime1",".requestCompleteDateTime2",".finishDateTime1",".finishDateTime2",".finalCheckDateTime1",".finalCheckDateTime2",".finalCheckDateTime3",".finalCheckDateTime4",".serviceDateTime1",".serviceDateTime2",".serviceDateTime3",".serviceDateTime4",".waitingServiceDateTime1",".waitingServiceDateTime2",".waitingServiceDateTime3",".waitingServiceDateTime4",".receptionDateTime1",".receptionDateTime2",".inGateDateTime1",".inGateDateTime2",".orderCancelledDate1",".orderCancelledDate2",".orderCancelledDate3",".orderCancelledDate4",".serviceScheduleDateTime1",".serviceScheduleDateTime2"],i=0;i<dateFormatList.length;i++)dateFormatExpected($(dateFormatList[i]))},error:function(result){$("#order-status-form").removeClass("content-loader"),$("#server_error").show()}}))},menuTypeSplit:function(){for(var menuParent=$(".submenu_first"),i=0;i<menuParent.length;i++)for(var menuDivs=$(menuParent[i]).find(".submenu_first_types > .submenu_second > li "),j=0;j<menuDivs.length;j+=4)menuDivs.slice(j,j+4).wrapAll("<ul class='menu_wrap'></ul>")},menuBrandSplit:function(){for(var menuParent=$(".submenu_first"),i=0;i<menuParent.length;i++)for(var menuDivs=$(menuParent[i]).find(".submenu_first_brands > .submenu_second > li "),j=0;j<menuDivs.length;j+=4)menuDivs.slice(j,j+4).wrapAll("<ul class='menu_wrap'></ul>")},addBunddle:function(){"true"==$(".isCartNotEmpty").val()?($(".addBundleToCartButton").attr("type","button"),$(".addBundleToCartButton").attr("data-target","#confirm-add-bunddle-popup-Modal"),$(".addBundleToCartButton").attr("data-toggle","modal")):($(".addBundleToCartButton").removeAttr("data-target"),$(".addBundleToCartButton").removeAttr("data-toggle"),$(".addBundleToCartButton").attr("type","submit"))},howToSell:function(){},validateVoucher:function(){function displayError(){$("#voucherStatusFailure").show(),$("#voucherStatusSuccess").hide(),$(".voucher_code").addClass("voucher_code--error"),$(".voucher_code").removeClass("voucher_code--verified")}$("#js-validate-voucher-btn").on("click",function(e){$.ajax({url:ACC.config.contextPath+"/sevaservice/validate-coupon",data:{cartType:$.trim($("#cartType").val()),couponCode:$.trim($("#couponCode").val())},type:"GET",success:function(data){1==data?($("#voucherStatusSuccess").show(),$("#voucherStatusFailure").hide(),$(".voucher_code").addClass("voucher_code--verified"),$(".voucher_code").removeClass("voucher_code--error")):displayError()},error:function(){displayError()}})})},loginRedirectTo:function(){var loginUrl,currentUrl,finalUrl;null!=$("#id_login_wp")&&(loginUrl=$("#id_login_wp").attr("href"),currentUrl=window.location.href,finalUrl=""==window.location.search?loginUrl+"?redirectTo="+currentUrl+"?refresh=true":loginUrl+"?redirectTo="+currentUrl+"&refresh=true",$("#id_login_wp").attr("href",finalUrl))},init:function(){var _self=astra.global;_self.myNeedsSlctdImgs={},_self.home(),_self.common(),_self.pdpPage(),_self.comparePane(),_self.myNeeds(),_self.emptyCartPage(),_self.formValidationInt(),_self.cart(),_self.staticPages(),_self.chat(),_self.myVehicle(),_self.fetchHolidayDatesForBranch(),_self.plp(),_self.bookAppoinment(),_self.imageUpload(),_self.creditCalc(),_self.checkout(),_self.dealerLocator(),_self.feedbackrating(),_self.getOrderStatus(),_self.getCartCount(),_self.menuTypeSplit(),_self.menuBrandSplit(),_self.loginRedirectTo(),astra.global.astraLazyLoad.update(),_self.validateVoucher(),_self.howToSell(),$("body").scrollspy({target:"#list-example"}),$("body").scrollspy({target:"#navbar-example2"}),$(".slick-dots li").length<=1&&$(".slick-dots").css("display","none"),"car__used-car"==$(".tab-lg__button--active").attr("data-id")?$("#new_to_astra_type").val("USEDCAR"):$("#new_to_astra_type").val("NEWCAR"),"USEDCAR"==sessionStorage.getItem("carType")&&$('[data-id="car__used-car"]').trigger("click"),sessionStorage.setItem("carType","NEWCAR"),$(window).width()<992&&($(".expert_choice_component").slick(expertSlickObject),$(".expert_choice_component .wishlist-items").removeClass("col-sm-6 col-md-4 col-lg-4"))}},astra.global.init()}(jQuery),$(document).ready(function(){$("#status").change(function(){var urlPath=$(this).parents(".__dropdown-content").find(".url-path-vehicles-page").val();$(this).val(),window.open(ACC.config.encodedContextPath+urlPath+encodeURIComponent($(this).val()),"_self")}),"true"==sessionStorage.getItem("isFacet")&&($("html, body").animate({scrollTop:$(".producting-listing").offset().top-151},500),sessionStorage.setItem("isFacet",!1)),$(".expert_choice_container button").click(function(){sessionStorage.setItem("isFacet",!0)}),$(".product--filter a").click(function(){sessionStorage.setItem("isFacet",!0)}),$(".__filerName").click(function(){var formatDataFilter=$(this).attr("data-filter").replace(" ","_"),resultA=function(arr){for(var what,ax,a=arguments,L=a.length;1<L&&arr.length;)for(what=a[--L];-1!==(ax=arr.indexOf(what));)arr.splice(ax,1);return arr}(sessionStorage.getItem("text"+formatDataFilter).split(", "),$(this).attr("id").toString());sessionStorage.setItem("text"+formatDataFilter,resultA.join(", "))}),(0<$(".page-astraNewCarDetailsPage").length||0<$(".page-astraUsedCarDetailsPage").length)&&($(".thumbanil--link").click(function(){var videoURL=$(this).attr("data-video");$("#iframevideo")[0].src;$("#iframevideo")[0].src=videoURL}),$(".thumbanil--link").each(function(index,value){var url=$(this).data("video");$(this).find("img").attr("src","https://img.youtube.com/vi/"+url.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/)[1]+"/default.jpg")}))}),$(document).ready(function(){var preUrl=document.referrer,hrefVal=$("#removeCartProduct").attr("href");$("#removeCartProduct").attr("href",hrefVal+"?preUrl="+urlEncode(preUrl))});var getFormatValue=function(price){var formatValue=price.split(".");return formatValue.shift(),formatValue.join("").trim()};function _autoload(){$.each(ACC,function(section,obj){$.isArray(obj._autoload)&&$.each(obj._autoload,function(key,value){$.isArray(value)?value[1]?ACC[section][value[0]]():value[2]&&ACC[section][value[2]]():ACC[section][value]()})})}$(document).ready(function(){"OTHERS"==$("#serviceCategory").val()?($("#categoryDisclaimer").show(),$("#notesNotMandatory").hide(),$("#notesMandatory").show()):($("#categoryDisclaimer").hide(),$("#notesMandatory").hide(),$("#notesNotMandatory").show()),$("#serviceCategory").change(function(){"OTHERS"==$("#serviceCategory").val()?($("#notesNotMandatory #notes").val(""),$("#categoryDisclaimer").show(),$("#notesNotMandatory").hide(),$("#notesMandatory").show()):($("#notesMandatory #notes").val(""),$("#categoryDisclaimer").hide(),$("#notesMandatory").hide(),$("#notesNotMandatory").show())}),$(".powerful-engines-wpr .engine-item:eq(0)").addClass("showDiv"),150<$(".showDiv .totalDescBlock1").height()?($(".showDiv .totalDescBlock1").css({height:"150px",overflow:"hidden"}),$(".showDiv #readMoreLink").css("display","inline-block")):($(".showDiv .totalDescBlock1").css({height:"auto"}),$(".showDiv #readMoreLink").css("display","none")),$(".showDiv #readMoreLink").on("click",function(){$(".showDiv .totalDescBlock1").text();$(".showDiv .totalDescBlock1").css({height:"auto",overflow:"visible"}),$(".showDiv #readMoreLink").css("display","none"),$(".showDiv #readLessLink").css({display:"inline-block"})}),$(".showDiv #readLessLink").on("click",function(){$(".showDiv .totalDescBlock1").css({height:"150px",overflow:"hidden"}),$(".showDiv #readMoreLink").css("display","inline-block"),$(".showDiv #readLessLink").css({display:"none"})}),$(window).width()<768&&($(".showDiv .totalDescBlock1").css({height:"150px",overflow:"hidden"}),$(".showDiv #readMoreLink").css("display","inline-block"),$(".showDiv #readLessLink").css({display:"none"})),$(".showDiv .totalDescBlock1").removeAttr("style"),150<$(".showDiv .totalDescBlock1").height()?"inline-block"==$(".showDiv #readLessLink").css("display")?($(".showDiv .totalDescBlock1").css({height:"auto",overflow:"visible"}),$(".showDiv #readMoreLink").css("display","none"),$(".showDiv #readLessLink").css({display:"inline-block"})):($(".showDiv .totalDescBlock1").css({height:"150px",overflow:"hidden"}),$(".showDiv #readMoreLink").css("display","inline-block")):($(".showDiv .totalDescBlock1").css({height:"auto"}),$(".showDiv #readMoreLink").css("display","none")),$(".product-color").slick({infinite:!1,slidesToShow:6,slidesToScroll:1,vertical:!0,arrows:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:6,slidesToScroll:1,arrows:!0}},{breakpoint:794,settings:{slidesToShow:6,slidesToScroll:1,arrows:!0}}]});var size_li=$(".showDiv .specification-li li").length,limit=5;function formatNumber(n){return n.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,".")}size_li<6?($(".showDiv .specification-li li:lt("+size_li+")").show(),$(".showDiv #readMoreLinkSpec").hide(),$(".showDiv #readLessLinkSpec").hide()):($(".showDiv .specification-li li:lt("+limit+")").show(),$(".showDiv #readMoreLinkSpec").show(),$(".showDiv #readMoreLinkSpec").click(function(){limit=(limit=size_li)<=size_li?limit:size_li,$(".showDiv .specification-li li:lt("+limit+")").show(),$(".showDiv #readMoreLinkSpec").hide(),$(".showDiv #readLessLinkSpec").show()}),$("#readLessLinkSpec").click(function(){$(".showDiv .specification-li li:lt("+size_li+")").hide(),$(".showDiv .specification-li li:lt(5)").show(),$(".showDiv #readMoreLinkSpec").show(),$(".showDiv #readLessLinkSpec").hide()})),$("#engine-types").on("change",function(){var size_li=$(".showDiv .specification-li li").length,limit=5;size_li<6?($(".showDiv .specification-li li:lt("+size_li+")").show(),$(".showDiv #readMoreLinkSpec").hide(),$(".showDiv #readLessLinkSpec").hide()):($(".showDiv .specification-li li:lt("+size_li+")").hide(),$(".showDiv #readMoreLinkSpec").hide(),$(".showDiv #readLessLinkSpec").hide(),$(".showDiv .specification-li li:lt("+limit+")").show(),$(".showDiv #readMoreLinkSpec").show(),$(".showDiv #readMoreLinkSpec").click(function(){limit=(limit=size_li)<=size_li?limit:size_li,$(".showDiv .specification-li li:lt("+limit+")").show(),$(".showDiv #readMoreLinkSpec").hide(),$(".showDiv #readLessLinkSpec").show()}),$(".showDiv #readLessLinkSpec").click(function(){$(".showDiv .specification-li li:lt("+size_li+")").hide(),$(".showDiv .specification-li li:lt(5)").show(),$(".showDiv #readMoreLinkSpec").show(),$(".showDiv #readLessLinkSpec").hide()}))}),$(".number-formatter #kilometer,.number-formatter #cylinderCapacity,.number-formatter #price,.number-formatter #odometer").keyup(function(e){!function(input){var input_val=input.val();if(""===input_val)return;var original_len=input_val.length,caret_pos=input.prop("selectionStart");input_val=formatNumber(input_val),input.val(input_val);var updated_len=input_val.length;caret_pos=updated_len-original_len+caret_pos,input[0].setSelectionRange(caret_pos,caret_pos)}($(this))});var kilometer=$(".number-formatter #kilometer").val();null!=$(".number-formatter #kilometer").val()&&""!=$(".number-formatter #kilometer").val()&&(kilometer=formatNumber(kilometer),$(".number-formatter #kilometer").val(kilometer));var cylinder=$(".number-formatter #cylinderCapacity").val();null!=$(".number-formatter #cylinderCapacity").val()&&""!=$(".number-formatter #cylinderCapacity").val()&&(cylinder=formatNumber(cylinder),$(".number-formatter #cylinderCapacity").val(cylinder));var price=$("#price").val();null!=$(".number-formatter #price").val()&&""!=$(".number-formatter #price").val()&&(price=formatNumber(price),$(".number-formatter #price").val(price));var odometer=$("#odometer").val();null!=$(".number-formatter #odometer").val()&&""!=$(".number-formatter #odometer").val()&&(odometer=formatNumber(odometer),$(".number-formatter #odometer").val(odometer))}),$(document).ready(function(){"USEDCAR"==$(".creditcal-condition").val()?$("#year_block").show():$("#year_block").hide(),$(".js-service-bookingtype-select").children().each(function(){"Home Service"!==$(this).val()&&"Mobile Service"!==$(this).val()||$(this).text("Mobile Service")}),$(".js-service-bookingtype-select").next().find(".select2-selection").on("click",function(){$(".js-service-bookingtype-select").parent().find("#select2-bookingType-results").find("li").each(function(){-1<$(this)[0].id.indexOf("Home")&&$(this).text("Mobile Service")})});var afterRefresh=$(".js-service-bookingtype-select").next().find("#select2-bookingType-container");function fetchHolidayDetails(branchCode){branchCode&&$.ajax({url:ACC.config.contextPath+"/sevaservice/fetch-holidays",type:"GET",data:{branchCode:branchCode},success:function(data){for(var holidays=data,i=0;i<holidays.length;i++)holidays[i]=formatDate(holidays[i]);var today=new Date;today.setDate(today.getDate()+1);today.getDay();var limitDate=new Date;limitDate.setDate(limitDate.getDate()+15);!function(startDate,endDate){var count=0,curDate=new Date(startDate);for(;curDate<=endDate;){var dayOfWeek=curDate.getDay();if(6!=dayOfWeek&&0!=dayOfWeek&&-1==holidays.indexOf(formatDate(curDate))){if(!(++count<3))break;holidays.push(formatDate(curDate))}else 0;curDate.setDate(curDate.getDate()+1)}}(today,limitDate);var $input=$("#dob-datepicker input");function formatDate(date){var d=new Date(date),month=""+(d.getMonth()+1),day=""+d.getDate(),year=d.getFullYear();return month.length<2&&(month="0"+month),day.length<2&&(day="0"+day),[day,month,year].join("-")}$input.datepicker("destroy"),$input.datepicker({format:"dd-mm-yyyy",autoclose:!0,startDate:startDate($input),endDate:endDate($input),daysOfWeekDisabled:[0,6],datesDisabled:holidays}).on("changeDate",function(e){$(this).removeClass("error"),$(this).parents(".form-group").find("label.error").remove()})}})}afterRefresh.ready(function(){"Home Service"==afterRefresh.attr("title")&&afterRefresh.text("Mobile Service")}),$(".js-service-bookingtype-select").on("select2:select",function(e){var afterRefresh=$(".js-service-bookingtype-select").next().find("#select2-bookingType-container");afterRefresh.ready(function(){"Home Service"==afterRefresh.attr("title")&&afterRefresh.text("Mobile Service")})}),$(".service-branchlocation #branch").on("select2:select",function(){fetchHolidayDetails($(this).val())});""!=$(".testdrive-brand").val()&&function(){$(".testdrive-brand").val();var isHomeAvailalbe=$(".testdrive-brand").select2({minimumResultsForSearch:6}).find(":selected").data("testdrive"),testDriveLocation=$(".testdrive-location");testDriveLocation.empty(),testDriveLocation.append($("<option></option>").attr("value","").text("")),isHomeAvailalbe?"true"==$("#home").val()?(testDriveLocation.append($("<option selected='selected'></option>").attr("value","HOME").text("HOME")),testDriveLocation.append($("<option></option>").attr("value","BRANCH").text("BRANCH")),$(".testDrive-address").show(),$(".testdrive-branchlocation").hide()):"true"==$("#branch").val()?(testDriveLocation.append($("<option></option>").attr("value","HOME").text("HOME")),testDriveLocation.append($("<option  selected='selected'></option>").attr("value","BRANCH").text("BRANCH")),getBranchCodeByBrandName({branchCode:$(".testdrive-brand").val(),orderTypeFlag:$(".orderTypeFlag").val()})):(testDriveLocation.append($("<option></option>").attr("value","HOME").text("HOME")),testDriveLocation.append($("<option></option>").attr("value","BRANCH").text("BRANCH"))):testDriveLocation.append($("<option></option>").attr("value","BRANCH").text("BRANCH"))}(),0<$("#test-drive-date").length&&$("#test-drive-date input").datepicker({format:"dd-mm-yyyy",autoclose:!0,startDate:new Date((new Date).getTime()+864e5)}),0<$("#dob-datepicker").length&&$("#dob-datepicker input").datepicker({format:"dd-mm-yyyy",autoclose:!0,startDate:new Date((new Date).getTime()+864e5)}),$(".js-type1-select").on("change",function(){null!=$(".js-servicetype-select").val()&&loadModel()});var loadModel=function(){var options={brandCode:$(".js-servicetype-select").val(),typeCode:$(".js-type1-select").val()};$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/getModelList",async:!1,data:options,type:"GET",success:function(response){var modelList=$(".js-servicemodel-select");modelList.empty(),modelList.append($("<option value=''></option>").text("")),$.each(response,function(key,value){modelList.append($("<option></option>").attr("value",value.code).attr("code",value.code).text(value.name))})}})};$(".js-servicetype-select").on("change",function(){$(".engineNoMandatory").find("span").remove(),$("#engineNo").data("rule-required",!1),"DAIHATSU"==$(this).val().toUpperCase()&&($(".engineNoMandatory").append("<span>*</span>"),$("#engineNo").data("rule-required",!0))}),$(document).on("change",".js-servicetype-select",function(){var options={brandCode:$(".js-servicetype-select").val()};$(".js-servicetype-select").val();loadModel(),$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/getBookingTypeList",async:!0,data:options,type:"GET",success:function(response){var bookingyTypeList=$(".js-service-bookingtype-select");bookingyTypeList.empty(),bookingyTypeList.append($("<option value=''></option>").text("")),$.each(response,function(key,value){"Home Service"===value.code?bookingyTypeList.append($("<option></option>").attr("value",value.name).attr("code",value.code).text("Mobile Service")):bookingyTypeList.append($("<option></option>").attr("value",value.name).attr("code",value.code).text(value.name))}),$(".service-branchlocation, .service-address").hide()}})});function loadVariants(){var options={brandCode:$(".js-servicetype-select").val(),typeCode:$(".js-type1-select").val(),modelCode:$(".js-servicemodel-select").val()};$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/getVariantList",async:!1,data:options,type:"GET",success:function(response){var variantList=$(".js-servicevariant-select");variantList.empty(),variantList.append($("<option value=''></option>").text("")),$.each(response,function(key,value){variantList.append($("<option></option>").attr("value",value.code).attr("code",value.code).text(value.name))})}})}$(document).on("change",".js-servicemodel-select",function(){loadVariants()}),$("#verify_bookservice_otp").click(function(){verifyOTP($("#service-mobileNumber").val(),$("#isdCode").attr("placeholder"),$("#otp").val(),function(data){-1!==data.toLowerCase().indexOf("invalid")||-1!==data.toLowerCase().indexOf("not valid")||-1!==data.toLowerCase().indexOf("expired")?($("#server_error").hide(),$("#invalid_otp").show()):($("#server_error").hide(),$("#invalid_otp").hide(),$("#otp-popup-Modal").modal("hide"),$("#success-message").addClass("show-error"),$("#autoServiceForm").submit())},function(error){$("#server_error").show()})}),$("#submit_book").click(function(e){e.preventDefault(),$("#server_error").hide(),$("#invalid_otp").hide(),$(".otp-popup-input-value").val(""),$("#invalid_engineNo").hide(),1==$("#bookServiceForm").valid()?"true"==$("#serviceBookingOTPRequired").val()?requestForOTP($("#service-mobileNumber").val(),$("#isdCode").attr("placeholder"),function(data){"Invalid"===data?$("#errorMessage").addClass("show-error"):$("#otp-popup-Modal").modal("show")},function(error){$("#serverMessage").addClass("show-error")}):$("#bookServiceForm").submit():$("html, body").animate({scrollTop:$(".form-group .error").parent().offset().top-100},"slow")}),$("#addressCartSubmit").on("click",function(){$("#bargainPrice").val($("#bargainprice").val());var validation=$("#autoServiceForm").valid(),emailPhoneValidationresult=!1;$("#service-email").valid()&&$("#service-mobileNumber").valid()&&(emailPhoneValidationresult=validateCustomerEmailAndPhone($("#service-email").val(),$("#service-mobileNumber").val())),$("#gaClientId").val(ga.getAll()[0].get("clientId")),emailPhoneValidationresult?($("#service-mobileNumber").val(""),$("#loginModal").modal("show")):validation&&("true"!=$("#serviceBookingOTPRequired").val()?$("#autoServiceForm").submit():requestForOTP($("#service-mobileNumber").val(),$("#isdCode").attr("placeholder"),function(data){"Invalid"===data?$("#errorMessage").addClass("show-error"):$("#otp-popup-Modal").modal("show")},function(error){$("#serverMessage").addClass("show-error")}))});var count=1;$("#change-pwd-resend-otp").on("click",function(e){var seconds,min,maxcount=parseInt($("#noOfAllowedAttemptsToSendOtp").val()),timeoutduration=parseInt($("#disableResendOtpLinkTimer").val());count++<maxcount?requestForOTP($("#change_phone_number").val(),$("#isdCode").attr("placeholder"),function(data){"Invalid"===data?$("#errorMessage").addClass("show-error"):$("#otp-popup-Modal").modal("show")},function(error){$("#serverMessage").addClass("show-error")}):(100<timeoutduration&&(seconds=timeoutduration/1e3),60<seconds?seconds-=60*(min=Math.floor(seconds/60)):min=0,$("#otp_text").show(),document.getElementById("timer").innerHTML=(min<10&&min.length<2?"0"+min:min)+":"+(seconds<10&&seconds.length<2?"0"+seconds:seconds),startTimer(),count=1)});var countBook=1;$("#book_a_service_otp").on("click",function(e){var min,maxcount=parseInt($("#noOfAllowedAttemptsToSendOtp").val()),timeoutduration=parseInt($("#disableResendOtpLinkTimer").val());countBook++<maxcount?sendOTP($("#service-mobileNumber").val(),$("#isdCode").attr("placeholder")):(100<timeoutduration&&(seconds=timeoutduration/1e3),60<seconds?(min=Math.floor(seconds/60),seconds-=60*min):min=0,$("#otp_text").show(),document.getElementById("timer").innerHTML=(min<10&&min.length<2?"0"+min:min)+":"+(seconds<10&&seconds.length<2?"0"+seconds:seconds),startTimer(),countBook=1)}),$(document).on("change",".testdrive-type",function(e){var options,brand=$(".testdrive-brand").val();null!=brand&&(options={selectedBrand:brand,selectedType:$(".testdrive-type").val(),testDrive:!0},$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/get-products",async:!0,data:options,type:"GET",success:function(response){var productList=$(".testdrive-model");productList.empty();var modelList=$(".testdrive-variant");modelList.empty(),productList.append($("<option></option>").attr("value","").text("")),modelList.append($("<option></option>").attr("value","").text("")),$.each(response,function(key,value){productList.append($("<option></option>").attr("value",value.code).attr("id",value.code).text(value.name))})}}))}),$(document).on("change",".testdrive-location",function(e){$(".testdrive-branch").val("").trigger("change"),$("input[name='callDate']").val("").datepicker("destroy").datepicker();var location=$(this).val();"BRANCH"==location?getBranchCodeByBrandName({branchCode:$(".testdrive-brand").val(),orderTypeFlag:$(".orderTypeFlag").val()}):"HOME"==location&&($(".testDrive-address").show(),$(".testdrive-branchlocation").hide())}),$(document).on("change",".js-service-bookingtype-select",function(){$(".js-service-branch-select").val("").trigger("change"),$("input[name='callDate']").val("").datepicker("destroy").datepicker(),$("#callTime").val("").trigger("change");var province,city,location=$(this).val();null!=location&&(-1!=location.indexOf("Branch")||-1!=location.indexOf("Body")?($(".js-service-province-wrapper").show(),$(".js-service-city-wrapper").show(),$(".service-branchlocation").show(),$(".js-service-province-select").val("").trigger("change"),$(".js-servicecity-select").empty()):-1!=location.indexOf("Home")&&("true"==$("#isLoggedIn").val()?($(".service-branchlocation").hide(),province=$("#astra-province").val(),city=$("#astra-city").val(),loadCityByProvince(province),$(".js-service-province-select").val(province).trigger("change"),selector2(".js-servicecity-select",city),$(".js-service-province-wrapper").show(),$(".js-service-city-wrapper").show()):($(".js-service-province-select").val("").trigger("change"),$(".js-servicecity-select").val("").trigger("change"),$(".js-service-province-wrapper").show(),$(".js-service-city-wrapper").show(),$(".service-branchlocation").hide())))}),$(document).on("click",".vehicle-info",function(e){$(".vehicle-info").removeClass("selected"),$(this).addClass("selected"),null!=$(".astra-selected-vehicle")&&$(".astra-selected-vehicle").val($(this).find(".select-my-vehicle").val()),null!=$(".payment-selected-vehicle")&&$(".payment-selected-vehicle").val($(this).find(".select-my-vehicle-code").val())}),$(document).on("click",".close-vehicle-popup",function(e){$("#myVehicleModal").modal("hide"),$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/prepopulate",async:!0,data:$("#bookServiceForm").serialize(),type:"GET",success:function(response){var branchCode;$.each(response,function(key,value){-1<["type","brand","model","variant"].indexOf(key)?("model"==key&&loadModel(),"variant"==key&&loadVariants(),null!=value&&selector2("brand"==key?"#selected-brand":"#"+key,value)):($("#"+key).val(value),null==$(".page-book-a-service #serviceCategory").val()&&$(".page-book-a-service #select2-serviceCategory-container").empty(),null==$(".page-book-a-service #callTime").val()&&$(".page-book-a-service #select2-callTime-container").empty(),$(".page-book-a-service #select2-bookingType-container").empty(),$(".page-book-a-service #select2-provinceSelector-container").empty(),$(".page-book-a-service #select2-citySelector-container").empty(),$(".page-book-a-service #select2-branch-container").empty()),$("#bookServiceForm .form-group").hasClass("error-element")&&($("#bookServiceForm .form-group").removeClass("error-element"),$("#bookServiceForm .form-group input").removeClass("error"),$("#bookServiceForm .form-group label.error").remove())}),branchCode={branchCode:$(".js-servicetype-select").val(),orderTypeFlag:$(".orderTypeFlag").val()},$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/get-branches",async:!0,data:branchCode,type:"GET",success:function(response){var branchList=$(".js-service-branch-select");branchList.empty(),branchList.append($("<option value=''></option>").text("")),$.each(response,function(key,value){branchList.append($("<option></option>").attr("value",value.name).attr("code",value.name).text(value.displayName))})},error:function(response){}})}})}),$(document).on("click",".add-test-address",function(e){e.preventDefault(),addAddressToAddressBook({selectedAddressTarget:"#service-address-details",selectedAddressUniqueIdTarget:".testdrive-selected-address"})});var selector2=function(selector,value){$(selector).hasClass("select2-hidden-accessible")&&$(selector).select2("destroy"),$(selector+" option:selected").removeAttr("selected"),$(selector+" option[value='"+value+"']").attr("selected","selected"),$(selector).select2()},addAddressToAddressBook=function(targetElementSelector){1==$("#addressForm").valid()?$("#addressForm").ajaxSubmit({callbackData:targetElementSelector,type:"POST",success:function(response){$.trim(response.errorMessage)?$("#addNewAddressModal").html(response.popup):($(this.callbackData.selectedAddressTarget).html(response.newAddress),$(this.callbackData.selectedAddressUniqueIdTarget).val(response.addressId),$("#addressBookPopupWrapper .address-book-popup").html(response.addressBook),$("#addNewAddressModal").modal("hide"))},error:function(result){}}):$("html, body").animate({scrollTop:$(".form-group .error").parent().offset().top-100},"slow")};function getBranchCodeByBrandName(branchCode){$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/get-branches",async:!0,data:branchCode,type:"GET",success:function(response){var branchList=$(".testdrive-branch");branchList.empty(),branchList.append($("<option></option>").attr("value","").text("")),$.each(response,function(key,value){branchList.append($("<option></option>").attr("value",value.name).attr("id",value.name).text(value.displayName))}),$(".testDrive-address").hide(),$(".testdrive-branchlocation").show(),$(".testdrive-branch").select2("destroy"),$(".testdrive-branch").select2()},error:function(){datePicker($("#test-drive-date input")),$("#bookServiceForm #dob-datepicker input, #bookServiceForm .timeWrapper select").prop("disabled",!1),$("#testDriveForm #test-drive-date input, #testDriveForm .timeWrapper select").prop("disabled",!1)}})}$(document).on("change",".testdrive-brand",function(e){var options={selectedBrand:$(this).val(),selectedType:$(".testdrive-type").val(),testDrive:!0},isHomeAvailalbe=($(this).val(),$(".testdrive-brand").select2({minimumResultsForSearch:6}).find(":selected").data("testdrive"));$(".testdrive-branch").empty();var testDriveLocation=$(".testdrive-location");testDriveLocation.empty(),testDriveLocation.append($("<option></option>").attr("value","").text("")),isHomeAvailalbe?"true"==$("#home").val()?(testDriveLocation.append($("<option selected='selected'></option>").attr("value","HOME").text("HOME")),testDriveLocation.append($("<option></option>").attr("value","BRANCH").text("BRANCH")),$(".testDrive-address").show(),$(".testdrive-branchlocation").hide()):"true"==$("#branch").val()?(testDriveLocation.append($("<option></option>").attr("value","HOME").text("HOME")),testDriveLocation.append($("<option  selected='selected'></option>").attr("value","BRANCH").text("BRANCH")),getBranchCodeByBrandName({branchCode:$(".testdrive-brand").val(),orderTypeFlag:$(".orderTypeFlag").val()})):(testDriveLocation.append($("<option></option>").attr("value","HOME").text("HOME")),testDriveLocation.append($("<option></option>").attr("value","BRANCH").text("BRANCH"))):testDriveLocation.append($("<option></option>").attr("value","BRANCH").text("BRANCH")),$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/get-products",async:!0,data:options,type:"GET",success:function(response){var productList=$(".testdrive-model");productList.empty();var modelList=$(".testdrive-variant");modelList.empty(),productList.append($("<option></option>").attr("value","").text("")),modelList.append($("<option></option>").attr("value","").text("")),$.each(response,function(key,value){productList.append($("<option></option>").attr("value",value.code).attr("id",value.code).text(value.name))}),$(".testdrive-model").select2("destroy"),$(".testdrive-model").select2({minimumResultsForSearch:6}),$(".testdrive-variant").select2("destroy"),$(".testdrive-variant").select2({minimumResultsForSearch:6})}})}),$(document).on("change",".testdrive-variant",function(e){branchCode={branchCode:$(".testdrive-brand").val(),orderTypeFlag:$(".orderTypeFlag").val()},getBranchCodeByBrandName(branchCode)}),$(document).on("change",".creditcal-condition",function(e){var options={selectedCondition:$(this).val()};$(".creditcal-brand").val("").trigger("change"),$(".creditcal-type").empty(),$(".creditcal-variant").empty(),$(".creditcal-model").empty(),$("#price").val(""),$("#tenorval").val("1").trigger("change"),$("#precentageval").val("25").trigger("change"),$("#contentTableDiv").remove(),$("#credit_simulation_table").hide(),"USEDCAR"==options.selectedCondition?($("#year_block").show(),$(".creditcal-year").select2("val"," ")):$("#year_block").hide(),$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/get-type",async:!0,data:options,type:"GET",success:function(response){var branchList=$(".creditcal-type");branchList.empty(),branchList.append($("<option></option>").attr("value","").text("")),$.each(response,function(key,value){branchList.append($("<option></option>").attr("value",value.code).attr("id",value.name).text(value.name))}),$(".creditcal-type").select2("destroy"),$(".creditcal-type").select2()}}),function(condition){var options={};""!=condition&&(options.condition=condition);$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/get-brands",async:!0,data:options,type:"GET",success:function(response){var branchList=$(".creditcal-brand");branchList.empty(),branchList.append($("<option></option>").attr("value","").text("")),$.each(response,function(key,value){branchList.append($("<option></option>").attr("value",value.code).attr("id",value.name).text(value.name))}),$(".creditcal-brand").select2("destroy"),$(".creditcal-brand").select2()}})}(options.selectedCondition)}),$(document).on("change",".testdrive-model",function(e){var options={productCode:$(this).val(),testDrive:!0};$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/get-variants",async:!0,data:options,type:"GET",success:function(response){var modelList=$(".testdrive-variant");modelList.empty(),modelList.append($("<option></option>").attr("value","").text("")),$.each(response,function(key,value){modelList.append($("<option></option>").attr("value",value.code).attr("id",value.code).text(value.name))}),$(".testdrive-variant").select2("destroy"),$(".testdrive-variant").select2({minimumResultsForSearch:6})}})}),$("#verify_testdrive_otp").click(function(){verifyOTP($("#testDrive-mobileNumber").val(),$("#isdCode").attr("placeholder"),$("#otp").val(),function(data){-1!==data.toLowerCase().indexOf("invalid")||-1!==data.toLowerCase().indexOf("not valid")||-1!==data.toLowerCase().indexOf("expired")?($("#server_error").hide(),$("#invalid_otp").show()):($("#server_error").hide(),$("#invalid_otp").hide(),$("#test-drive-otppopup").modal("hide"),$("#testDriveForm").submit(),$("#success-message").addClass("show-error"))},function(error){$("#server_error").show()})}),$("#verifyOtpForm").on("submit",function(){return!1});var countTest=1;$("#test_drive_otp").on("click",function(e){var min,maxcount=parseInt($("#noOfAllowedAttemptsToSendOtp").val()),timeoutduration=parseInt($("#disableResendOtpLinkTimer").val());countTest++<maxcount?requestForOTP($("#testDrive-mobileNumber").val(),$("#isdCode").attr("placeholder"),function(data){"Invalid"===data?$("#errorMessage").addClass("show-error"):$("#test-drive-otppopup").modal("show")},function(error){$("#serverMessage").addClass("show-error")}):(100<timeoutduration&&(seconds=timeoutduration/1e3),60<seconds?(min=Math.floor(seconds/60),seconds-=60*min):min=0,$("#otp_text").show(),document.getElementById("timer").innerHTML=(min<10&&min.length<2?"0"+min:min)+":"+(seconds<10&&seconds.length<2?"0"+seconds:seconds),startTimer(),countTest=1)}),$(document).on("click","#order_verify_otp",function(e){verifyOTP($("#customer-mobileNumber").val(),$("#isdCode").val(),$("#order-otp").val(),function(data){-1!==data.toLowerCase().indexOf("invalid")||-1!==data.toLowerCase().indexOf("not valid")||-1!==data.toLowerCase().indexOf("expired")?($("#server_error").hide(),$("#invalid_otp").show()):($("#server_error").hide(),$("#invalid_otp").hide(),$("#order-otppopup").modal("hide"),$("#placeOrderForm").submit(),$("#success-message").addClass("show-error"))},function(error){$("#server_error").show()})});var countOrder=1;$("#order-resend-otp").on("click",function(e){var min,maxcount=parseInt($("#noOfAllowedAttemptsToSendOtp").val()),timeoutduration=parseInt($("#disableResendOtpLinkTimer").val());countOrder++<maxcount?requestForOTP($("#customer-mobileNumber").val(),$("#isdCode").val(),function(data){"Invalid"===data?$("#errorMessage").addClass("show-error"):$("#order-otppopup").modal("show")},function(error){$("#serverMessage").addClass("show-error")}):(100<timeoutduration&&(seconds=timeoutduration/1e3),60<seconds?(min=Math.floor(seconds/60),seconds-=60*min):min=0,$("#otp_text").show(),document.getElementById("timer").innerHTML=(min<10&&min.length<2?"0"+min:min)+":"+(seconds<10&&seconds.length<2?"0"+seconds:seconds),startTimer(),countOrder=1)}),$(document).on("click",".placeOrder",function(e){e.preventDefault();var validation=$(".validation-from").valid(),emailPhoneValidationresult=!1;$("#email").valid()&&$("#customer-mobileNumber").valid()&&(emailPhoneValidationresult=validateCustomerEmailAndPhone($("#email").val(),$("#customer-mobileNumber").val())),$("#autoService_gaClientId").val(ga.getAll()[0].get("clientId"));var result,bundleValidationResult=(result=!1,$.ajax({url:ACC.config.encodedContextPath+"/cart/cart-validation-ajax",async:!1,data:{},type:"GET",success:function(response){result=response}}),result);validation?emailPhoneValidationresult?($("#customer-mobileNumber").val(""),$("#loginModal").modal("show")):bundleValidationResult?validation&&("false"==$("#placeOrderOTPRequired").val()?$("#placeOrderForm").submit():requestForOTP($("#customer-mobileNumber").val(),$("#isdCode").val(),function(data){"Invalid"===data?$("#errorMessage").addClass("show-error"):$("#order-otppopup").modal("show")},function(error){$("#serverMessage").addClass("show-error")})):($("#globalErrorBundle").hasClass("hide")&&($("#globalErrorBundle").removeClass("hide"),$('<div class="alert alert-danger alert-dismissable getAccAlert"><button id="globalErrorBundleCloseButton" class="close closeAccAlert" type="button" data-dismiss="alert" aria-hidden="true">×</button>Silakan pilih salah satu bundel produk yang tersedia sebelum melanjutkan ke langkah berikutnya.</div>').appendTo("#globalErrorBundle")),window.scrollTo(0,0)):function(){if(!$("#email").valid())return!1;if(!$("#customer-mobileNumber").valid())return!1;if(!$("#title").valid())return!1;if(!$("#firstName").valid())return!1;if(!$("#lastName").valid())return!1;if(!$("#city").valid())return!1;if(0!=$("#branch").length&&!$("#branch").valid())return!1;return!0}()?$("#paymentDetail_isTradeInByCashPayment").val()?$(".TRADEIN_CASH-heading-wrapper").get(0).scrollIntoView():$(".TRADEIN_CREDIT-heading-wrapper").get(0).scrollIntoView():$(".checkout-heading").get(0).scrollIntoView()}),$(document).on("click",".paymentmethod",function(e){e.preventDefault(),$(".validation-from").valid()&&($(".checkout-personalinfo").hide(),$(".checkout-paymentmethod").fadeIn("300"),$(".payment-method").addClass("active"),$(".personal-info").removeClass("active"),$(".separator").addClass("separator-left"),$(".separator").removeClass("separator-right"))}),$(".close-testdrive-modal").click(function(){$("#test-drive-otppopup").modal("hide")}),$(document).on("click",".change-service-address",function(e){var address=$(".testdrive-selected-address").val();$("#addressBookPopupWrapper .address-id-"+address).addClass("address-details--selected")}),$(document).on("click",".address-book.address-details",function(e){$(".address-details").removeClass("address-details--selected"),$(this).addClass("address-details--selected"),$(".testdrive-selected-address").val($(this).find(".select-address-id").val()),$(".addressbook-select").prop("disabled",!1)}),$(document).on("click",".addressbook-select",function(e){$("#service-address-details").html($(".address-details--selected").html()),$("#addressBookPopupWrapper").modal("hide")}),$(document).on("change",".creditcal-variant",function(e){var options={productCode:$(this).val()};$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/get-productprice",async:!0,data:options,type:"GET",success:function(response){$("#price").val(response)}})}),$(document).on("change",".creditcal-model",function(e){var options={productCode:$(this).val()};$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/get-variants",async:!0,data:options,type:"GET",success:function(response){var modelList=$(".creditcal-variant");modelList.empty(),modelList.append($("<option></option>").attr("value","").text(ACC.astra.testDriveLocation)),$.each(response,function(key,value){modelList.append($("<option></option>").attr("value",value.code).attr("id",value.code).text(value.name))}),$(".select-dropdown").select2()}})}),$(document).on("change",".creditcal-brand",function(e){var options={selectedBrand:$(this).val(),selectedType:$(".creditcal-type").val()};$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/get-products",async:!0,data:options,type:"GET",success:function(response){var productList=$(".creditcal-model");productList.empty();var modelList=$(".creditcal-variant");modelList.empty(),productList.append($("<option></option>").attr("value","").text(ACC.astra.testDriveLocation)),modelList.append($("<option></option>").attr("value","").text(ACC.astra.testDriveLocation)),$.each(response,function(key,value){productList.append($("<option></option>").attr("value",value.code).attr("id",value.code).text(value.name))}),$(".select-dropdown").select2()}})}),$(document).on("change",".creditcal-type",function(e){var options;null!=$(".creditcal-brand").val()&&(options={selectedBrand:$(".creditcal-brand").val(),selectedType:$(".creditcal-type").val()},$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/get-products",async:!0,data:options,type:"GET",success:function(response){var productList=$(".creditcal-model");productList.empty();var modelList=$(".creditcal-variant");modelList.empty(),productList.append($("<option></option>").attr("value","").text(ACC.astra.testDriveLocation)),modelList.append($("<option></option>").attr("value","").text(ACC.astra.testDriveLocation)),$.each(response,function(key,value){productList.append($("<option></option>").attr("value",value.code).attr("id",value.code).text(value.name))}),$(".select-dropdown").select2()}}))}),$(document).on("click",".service-address",function(e){$("#addressForm").trigger("reset"),$(".select-new-address").val("").trigger("change")}),$(document).on("click",".cart-Payment",function(e){$("#addressForm").trigger("reset"),$(".select-new-address").val("").trigger("change"),$(".address-details").removeClass("address-details--selected"),$(".selected-div-address").val("cart-Payment");var address=$(".payment-selected-address").val();$("#addressBookPopupWrapper .address-id-"+address).addClass("address-details--selected")}),$(document).on("click",".cart-shipping",function(e){$("#addressForm").trigger("reset"),$(".select-new-address").val("").trigger("change"),$(".address-details").removeClass("address-details--selected"),$(".selected-div-address").val("cart-shipping");var address=$(".delivery-selected-address").val();$("#addressBookPopupWrapper .address-id-"+address).addClass("address-details--selected")}),$(document).on("click",".cart-document",function(e){$("#addressForm").trigger("reset"),$(".select-new-address").val("").trigger("change"),$(".address-details").removeClass("address-details--selected"),$(".selected-div-address").val("cart-document");var address=$(".document-selected-address").val();$("#addressBookPopupWrapper .address-id-"+address).addClass("address-details--selected")}),$(document).on("click",".address-book.address-details",function(e){"cart-Payment"==$(".selected-div-address").val()&&($(".address-details").removeClass("address-details--selected"),$(this).addClass("address-details--selected"),$(".payment-selected-address").val($(this).find(".select-address-id").val())),"cart-shipping"==$(".selected-div-address").val()&&($(".address-details").removeClass("address-details--selected"),$(this).addClass("address-details--selected"),$(".delivery-selected-address").val($(this).find(".select-address-id").val())),"cart-document"==$(".selected-div-address").val()&&($(".address-details").removeClass("address-details--selected"),$(this).addClass("address-details--selected"),$(".document-selected-address").val($(this).find(".select-address-id").val()))}),$(document).on("click",".addressbook-select",function(e){"cart-Payment"==$(".selected-div-address").val()&&$("#payment-address-details").html($(".address-details--selected").html()),"cart-shipping"==$(".selected-div-address").val()&&$("#delivery-address-details").html($(".address-details--selected").html()),"cart-document"==$(".selected-div-address").val()&&$("#document-address-details").html($(".address-details--selected").html()),$("#addressBookPopupWrapper").modal("hide")}),$(document).on("click",".checkout-add-test-address",function(e){e.preventDefault(),"cart-Payment"==$(".selected-div-address").val()&&addAddressToAddressBook({selectedAddressTarget:"#payment-address-details",selectedAddressUniqueIdTarget:".payment-selected-address"}),"cart-shipping"==$(".selected-div-address").val()&&addAddressToAddressBook({selectedAddressTarget:"#delivery-address-details",selectedAddressUniqueIdTarget:".delivery-selected-address"}),"cart-document"==$(".selected-div-address").val()&&addAddressToAddressBook({selectedAddressTarget:"#document-address-details",selectedAddressUniqueIdTarget:".document-selected-address"})}),$(document).on("change",".general-appintment-brand",function(e){var options={selectedBrand:$(this).val(),selectedType:$(".general-appointment-type").val()},branchCode={branchCode:$(this).val()};$(".general-appintment-brand").select2().find(":selected").data("testdrive");$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/get-branches-general-appointment",async:!0,data:branchCode,type:"GET",success:function(response){var branchList=$(".testdrive-branch");branchList.empty(),branchList.append($("<option></option>").attr("value","").text(ACC.astra.testDriveLocation)),$.each(response,function(key,value){branchList.append($("<option></option>").attr("value",value.name).attr("id",value.name).text(value.displayName))})},error:function(result){$(".testdrive-branch").empty()}}),$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/get-products-general-appointment",async:!0,data:options,type:"GET",success:function(response){var productList=$(".general-appintment-model");productList.empty();var modelList=$(".general-appintment-model");modelList.empty(),productList.append($("<option></option>").attr("value","").text(ACC.astra.testDriveLocation)),modelList.append($("<option></option>").attr("value","").text(ACC.astra.testDriveLocation)),$.each(response,function(key,value){productList.append($("<option></option>").attr("value",value.code).attr("id",value.code).text(value.name))})}})}),$("#submit_general_appointment").click(function(e){e.preventDefault(),$("#server_error").hide(),$("#invalid_otp").hide(),$(".otp-popup-input-value").val(""),1==$("#generalAppointmentForm").valid()?requestForOTP($("#change_phone_number").val(),$("#isdCode").attr("placeholder"),function(data){"Invalid"===data?$("#errorMessage").addClass("show-error"):$("#otp-popup-Modal").modal("show")},function(error){$("#serverMessage").addClass("show-error")}):$("html, body").animate({scrollTop:$(".form-group .error").parent().offset().top-100},"slow")}),$("#gnrl-appnt-verify_otp").click(function(){verifyOTP($("#change_phone_number").val(),$("#isdCode").attr("placeholder"),$("#otp").val(),function(data){-1!==data.toLowerCase().indexOf("invalid")||-1!==data.toLowerCase().indexOf("not valid")||-1!==data.toLowerCase().indexOf("expired")?($("#server_error").hide(),$("#invalid_otp").show()):($("#server_error").hide(),$("#invalid_otp").hide(),$("#test-drive-otppopup").modal("hide"),$("#generalAppointmentForm").submit(),$("#success-message").addClass("show-error"))},function(error){$("#server_error").show()})});function loadTradeInCashVariants(){var options={brandCode:$(".js-servicetype-selecttradeInCash").val(),typeCode:$(".js-type1-selecttradeInCash").val(),modelCode:$(".js-serviceModel-selecttradeInCash").val()};$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/getVariantList",async:!1,data:options,type:"GET",success:function(response){var variantList=$(".js-serviceVariant-selecttradeInCash");variantList.empty(),variantList.append($("<option value=''></option>").text("")),$.each(response,function(key,value){variantList.append($("<option></option>").attr("value",value.code).attr("code",value.code).text(value.name))})}})}$(document).on("change",".js-serviceModel-selecttradeInCash",function(){loadTradeInCashVariants()});function loadTradeInCashModels(){var options={brandCode:$(".js-servicetype-selecttradeInCash").val(),typeCode:$(".js-type1-selecttradeInCash").val()};$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/getModelList",async:!1,data:options,type:"GET",success:function(response){var modelList=$(".js-serviceModel-selecttradeInCash");modelList.empty(),modelList.append($("<option value=''></option>").text("")),$.each(response,function(key,value){modelList.append($("<option></option>").attr("value",value.code).attr("code",value.code).text(value.name))})}})}$(document).on("change",".js-servicetype-selecttradeInCash",function(){loadTradeInCashModels()});function loadTradeInCreditModels(){var options={brandCode:$(".js-servicetype-selecttradeInCredit").val(),typeCode:$(".js-type1-selecttradeInCredit").val()};$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/getModelList",async:!1,data:options,type:"GET",success:function(response){var modelList=$(".js-serviceModel-selecttradeInCredit");modelList.empty(),modelList.append($("<option value=''></option>").text("")),$.each(response,function(key,value){modelList.append($("<option></option>").attr("value",value.code).attr("code",value.code).text(value.name))})}})}$(document).on("change",".js-servicetype-selecttradeInCredit",function(){loadTradeInCreditModels()});function loadTradeInCreditVariants(){var options={brandCode:$(".js-servicetype-selecttradeInCredit").val(),typeCode:$(".js-type1-selecttradeInCredit").val(),modelCode:$(".js-serviceModel-selecttradeInCredit").val()};$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/getVariantList",async:!1,data:options,type:"GET",success:function(response){var variantList=$(".js-serviceVariant-selecttradeInCredit");variantList.empty(),variantList.append($("<option value=''></option>").text("")),$.each(response,function(key,value){variantList.append($("<option></option>").attr("value",value.code).attr("code",value.code).text(value.name))})}})}$(document).on("change",".js-serviceModel-selecttradeInCredit",function(){loadTradeInCreditVariants()}),$(document).on("click",".payment-tradeInCredit",function(e){$("#payment-trade-type").val("tradeInCredit"),""==$("#myVehicleModal .modal-body").find(".vehicle-section").html().trim()?($("#myVehicleModal .modal-body").find("#emptyVehicleList").removeClass("hide"),$("#myVehicleModal .modal-footer").find(".__button-holder button[type='submit']").addClass("hide"),$("#myVehicleModal .modal-footer").find(".__button-holder button[type='button']").removeClass("hide")):($("#myVehicleModal .modal-footer").find(".__button-holder button[type='submit']").removeClass("hide"),$("#myVehicleModal .modal-footer").find(".__button-holder button[type='button']").addClass("hide"))}),$(document).on("click",".payment-tradeInCash",function(e){$("#payment-trade-type").val("tradeInCash"),""==$("#myVehicleModal .modal-body").find(".vehicle-section").html().trim()?($("#myVehicleModal .modal-body").find("#emptyVehicleList").removeClass("hide"),$("#myVehicleModal .modal-footer").find(".__button-holder button[type='submit']").addClass("hide"),$("#myVehicleModal .modal-footer").find(".__button-holder button[type='button']").removeClass("hide")):($("#myVehicleModal .modal-footer").find(".__button-holder button[type='submit']").removeClass("hide"),$("#myVehicleModal .modal-footer").find(".__button-holder button[type='button']").addClass("hide"))}),$(document).on("click",".payment-close-vehicle-popup",function(e){$("#myVehicleModal").modal("hide"),$(".image-uploaded").empty(),$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/payment-vehicle-simple-checkout",async:!0,data:$("#placeOrderForm").serialize(),type:"GET",success:function(response){console.log(response);var tradeType=$("#payment-trade-type").val();console.log(tradeType),null!=response.type?selector2("#"+tradeType+"compareType",response.type):selector2("#"+tradeType+"compareType",""),selector2("#"+tradeType+"compareBrand",response.brand),"tradeInCash"==$("#payment-trade-type").val()&&loadTradeInCashModels(),"tradeInCredit"==$("#payment-trade-type").val()&&loadTradeInCreditModels(),selector2("#"+tradeType+"comparemodel",response.model),"tradeInCash"==$("#payment-trade-type").val()&&loadTradeInCashVariants(),"tradeInCredit"==$("#payment-trade-type").val()&&loadTradeInCreditVariants(),selector2("#"+tradeType+"compareVariant",response.variant),selector2("#"+tradeType+"year",response.year),$("#"+tradeType+"licensNumber").val(response.licensePlateNumber),$("#"+tradeType+"chasisNumber").val(response.chasisNumber),$("#"+tradeType+"engineNumber").val(response.engineNumber),$("#"+tradeType+"stnkExpiryDate").val(response.stnkExpiryDate),$("#"+tradeType+"mileage").val(response.mileage),$("#"+tradeType+"odometer").val(response.odometer),$("#"+tradeType+"transmission").find("option").each(function(){$(this).attr("value")==response.transmission&&$(this).prop("selected",!0)}),$("#"+tradeType+"transmission").select2(),$("#"+tradeType+"cylinderCapacity").val(response.cylinderCapacity),$("#"+tradeType+"fuelType").find("option").each(function(){$(this).attr("value")==response.fuelType&&$(this).prop("selected",!0)}),$("#"+tradeType+"fuelType").select2(),$("#"+tradeType+"color").val(response.color),$("#"+tradeType+"expectedCarPrice").val(response.expectedCarPrice),$("#"+tradeType+"hand").val(response.hand),$("#"+tradeType+"callDate").val(response.callDate),$("#"+tradeType+"callTime").val(response.callTime),$("#"+tradeType+"price").val(response.price),$("#"+tradeType+"shareContactDetails").val(response.shareContactDetails),$("#"+tradeType+"code").val($(".payment-selected-vehicle").val()),$("#"+tradeType+"countryIso").val(response.countryIso),$("#"+tradeType+"cityCode").val(response.cityCode),$("#"+tradeType+"regionIso").val(response.regionIso),$("#"+tradeType+"sellingTerms").val(response.sellingTerms),$("#"+tradeType+"manualBook").val(response.manualBook),$("#"+tradeType+"serviceBook").val(response.serviceBook),$("#"+tradeType+"spareKey").val(response.spareKey),$("#"+tradeType+"backupKey").val(response.backupKey),$("#"+tradeType+"taxesUpto").val(response.taxesUpto),$("#"+tradeType+"ownership").val(response.ownership),$("#"+tradeType+"isNegotiable").val(response.isNegotiable);for(var i=0;i<response.images.length;i++)$(".activePanel").next(".accordionContent").find(".image-uploaded").append('<li class="success-img"> <img src= '+response.images[i].downloadUrl+' alt="product image"> <i class="icon-Error remove-upload-image"></i> <input id="vehicle-upload'+i+'" class="operation-value" value="2" type="hidden"><input type="file" name="" class="vehicle-myupload-files" />')}})});var imageUploadnotNeeded=$(".image-uploaded").parents(".accordionContent").prev().not(".activePanel");$(".image-uploaded").parents(".accordionContent").prev().not(".activePanel")&&imageUploadnotNeeded.next().find(".image-uploaded").html("");function submitNewsletterSubscribtionForm(that){var subscriptionEmailId=$(that).closest("form").find(".js-newsletter-subscription-emailid").val();$(".js-newsletter-subscription-form-emailid").val(subscriptionEmailId),$(".js-newsletter-subscription-form").submit()}$(".js-newsletter-subscription-btn").on("click",function(){submitNewsletterSubscribtionForm(this)}),$(".js-newsletter-subscription-emailid").keypress(function(e){13==e.which&&submitNewsletterSubscribtionForm(this)}),$(".js-notification-mark-read").on("click",function(event){return event.preventDefault(),$(this).hasClass("js-marking-notification-read")||($(this).addClass("js-marking-notification-read"),$.ajax({url:ACC.config.encodedContextPath+"/my-account/mark-notification-read/",async:!0,cache:!1,data:{notificationCode:$(this).data("notification-code")},type:"GET",context:this,success:function(){var notificationCenterId;notificationCenterId=$(this).data("notificationcenter-id"),$.ajax({url:"/wp-admin/admin-ajax.php?action=notification_read",type:"GET",async:!0,cache:!1,xhrFields:{withCredentials:!0},data:{message_id:notificationCenterId}}),window.location.href=$(this).attr("href")},error:function(){window.location.href=$(this).attr("href")}})),!1}),$(document).on("click","#addToCartConfirmButton",function(){$("#addToCartForm").submit()}),$(document).on("click",".bestOfferButton",function(){$("input[name='productCodePost']").val($(this).attr("data-productcode")),$("input[name='productCodeVariant']").val($(this).attr("data-productcode")),$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/cart-count",type:"GET",data:{},success:function(data){$("#addToCartForm").submit()}})}),$(document).on("click","#addBundleCartConfirmation",function(){var currentCode=$(".bundleForm-active").find("input[name='serviceProductCode']").val();$("#addBundleToCartForm_"+currentCode).submit()}),(0<$(".testdrive-city").length||0<$("#cityValue").length)&&$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/get-city",async:!0,type:"GET",success:function(response){var branchList=$(".testdrive-city");branchList.empty(),branchList.append($("<option value=''></option>").text("")),$.each(response,function(key,value){branchList.append($("<option></option>").attr("value",value.isocode).text(value.name))});var checkout_city=$("#cityValue").val();0<$("#cityValue").length&&null!=$("#cityValue").val()&&($(".testdrive-city").find("option").each(function(){$(this).attr("value")==checkout_city&&$(this).prop("selected",!0)}),$(".testdrive-city").select2())}}),$(".js-service-province-select").on("change",function(){loadCityByProvince($(this).val())}),$(document).on("change",".js-servicecity-select",function(){loadBranchByCity()});var loadCityByProvince=function(province){var options={regionIsoCode:province};$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/get-cities",async:!1,data:options,type:"GET",success:function(response){var cityList=$(".js-servicecity-select");cityList.empty(),$(".js-service-branch-select").empty(),cityList.append($("<option value=''></option>").text("")),$.each(response,function(key,value){cityList.append($("<option></option>").attr("value",value.isocode).attr("id",value.isocode).text(value.name))}),$(".js-servicecity-select").select2({dropdownParent:$(".js-servicecity-select").parent()})}})},loadBranchByCity=function(){var branchCode={cityCode:$(".js-servicecity-select").val(),brandCode:$("#selected-brand").val(),isbookAServicePage:$("#selected-page").val()};$.ajax({url:ACC.config.encodedContextPath+"/sevaservice/get-branches-by-city",async:!0,data:branchCode,type:"GET",success:function(response){var branchList=$(".js-service-branch-select");branchList.empty(),branchList.append($("<option value=''></option>").text("")),response.toString().length<1?($(".branch-not-found").show(),$(".branch-not-found").css("display","inline-flex"),$("#branch-text").removeClass("hide-this"),$("#new-car-branch").find(".select2-selection--single").css("border-color","#F90013"),$("#new-car-branch").find(".select2-selection--single").prop("disabled","true")):$.each(response,function(key,value){$(".branch-not-found").hide(),$("#branch-text").addClass("hide-this"),$("#new-car-branch").find(".select2-selection--single").css("border-color","#d8d8d8"),$("#new-car-branch").find(".select2-selection--single").prop("disabled","true"),branchList.append($("<option></option>").attr("value",value.name).attr("code",value.name).text(value.displayName))})},error:function(response){}})};function validateCustomerEmailAndPhone(email,phone){var result=!1,options={email:email,phone:phone};return $.ajax({url:ACC.config.encodedContextPath+"/checkout/multi/summary/validate-customer",async:!1,data:options,type:"POST",success:function(response){result=response}}),result}$("#email").on("focusout",function(event){var result=!1;$("#email").valid()&&$("#customer-mobileNumber").valid()&&(result=validateCustomerEmailAndPhone($("#email").val(),$("#customer-mobileNumber").val())),result&&($("#customer-mobileNumber").val(""),$("#loginModal").modal("show"))}),$("#customer-mobileNumber").on("focusout",function(event){var result=!1;$("#email").valid()&&$("#customer-mobileNumber").valid()&&(result=validateCustomerEmailAndPhone($("#email").val(),$("#customer-mobileNumber").val())),result&&($("#customer-mobileNumber").val(""),$("#loginModal").modal("show"))}),$("#service-email").on("focusout",function(event){var result=!1;$("#service-email").valid()&&$("#service-mobileNumber").valid()&&(result=validateCustomerEmailAndPhone($("#service-email").val(),$("#service-mobileNumber").val())),result&&($("#service-mobileNumber").val(""),$("#loginModal").modal("show"))}),$(".service-mobileNumber").on("focusout",function(event){var result=!1;$("#service-email").valid()&&$("#service-mobileNumber").valid()&&(result=validateCustomerEmailAndPhone($("#service-email").val(),$("#service-mobileNumber").val())),result&&($("#service-mobileNumber").val(""),$("#loginModal").modal("show"))}),$(document).on("submit",".addToEntryGroupForm",function(e){e.preventDefault(),$.ajax({url:ACC.config.encodedContextPath+"/entrygroups/cart/addToEntryGroup-ajax",async:!1,data:$(this).serialize(),type:"POST",success:function(response){var benefits,bundlePopupButton,otherbundlePopupButton,lastIndexOfSlash,urlLength,bundlePopupUrl,lastEntryNumber,otherLastIndexOfSlash,otherbundlePopupUrl;null!=response&&(benefits=$("#benefits1"),bundlePopupButton=$("#bundlePopupLink1"),otherbundlePopupButton=null,0!=$("#bundlePopupLink2").length&&(otherbundlePopupButton=$("#bundlePopupLink2")),response.component.id.endsWith("AddonBenefitByAFFCOComponent")&&(benefits=$("#benefits2"),bundlePopupButton=$("#bundlePopupLink2"),0!=$("#bundlePopupLink1").length&&(otherbundlePopupButton=$("#bundlePopupLink1"))),benefits.hasClass("hide")?(benefits.removeClass("hide"),bundlePopupButton.text("Ganti"),bundlePopupButton.get(0).href=bundlePopupButton.get(0).href+"/"+response.entryNumber):(lastIndexOfSlash=bundlePopupButton.get(0).href.lastIndexOf("/"),urlLength=bundlePopupButton.get(0).href.length,(lastEntryNumber=(bundlePopupUrl=bundlePopupButton.get(0).href).substring(lastIndexOfSlash+1,urlLength))!=response.entryNumber&&(bundlePopupButton.get(0).href=bundlePopupUrl.substring(0,lastIndexOfSlash+1)+response.entryNumber,null!=otherbundlePopupButton&&(otherLastIndexOfSlash=otherbundlePopupButton.get(0).href.lastIndexOf("/"),otherbundlePopupUrl=otherbundlePopupButton.get(0).href,otherbundlePopupButton.get(0).href=otherbundlePopupUrl.substring(0,otherLastIndexOfSlash+1)+lastEntryNumber))),benefits.text(response.product.name)),$("#cboxClose").click()}})}),$(document).on("click","#globalErrorBundleCloseButton",function(e){$("#globalErrorBundle").addClass("hide")})}),function(){var debug=!1,EXIF=function(obj){return obj instanceof EXIF?obj:this instanceof EXIF?void(this.EXIFwrapped=obj):new EXIF(obj)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=EXIF),exports.EXIF=EXIF):this.EXIF=EXIF;var ExifTags=EXIF.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},TiffTags=EXIF.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},GPSTags=EXIF.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},IFD1Tags=EXIF.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},StringValues=EXIF.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function getImageData(img,callback){function handleBinaryFile(binFile){var data=findEXIFinJPEG(binFile);img.exifdata=data||{};var xmpdata,iptcdata=function(file){var dataView=new DataView(file);debug&&console.log("Got file of length "+file.byteLength);if(255!=dataView.getUint8(0)||216!=dataView.getUint8(1))return debug&&console.log("Not a valid JPEG"),!1;var offset=2,length=file.byteLength;for(;offset<length;){if(function(dataView,offset){return 56===dataView.getUint8(offset)&&66===dataView.getUint8(offset+1)&&73===dataView.getUint8(offset+2)&&77===dataView.getUint8(offset+3)&&4===dataView.getUint8(offset+4)&&4===dataView.getUint8(offset+5)}(dataView,offset)){var nameHeaderLength=dataView.getUint8(offset+7);nameHeaderLength%2!=0&&(nameHeaderLength+=1),0===nameHeaderLength&&(nameHeaderLength=4);var startOffset=offset+8+nameHeaderLength,sectionLength=dataView.getUint16(offset+6+nameHeaderLength);return function(file,startOffset,sectionLength){var fieldValue,fieldName,dataSize,segmentType,dataView=new DataView(file),data={},segmentStartPos=startOffset;for(;segmentStartPos<startOffset+sectionLength;)28===dataView.getUint8(segmentStartPos)&&2===dataView.getUint8(segmentStartPos+1)&&(segmentType=dataView.getUint8(segmentStartPos+2))in IptcFieldMap&&(dataSize=dataView.getInt16(segmentStartPos+3),fieldName=IptcFieldMap[segmentType],fieldValue=getStringFromDB(dataView,segmentStartPos+5,dataSize),data.hasOwnProperty(fieldName)?data[fieldName]instanceof Array?data[fieldName].push(fieldValue):data[fieldName]=[data[fieldName],fieldValue]:data[fieldName]=fieldValue),segmentStartPos++;return data}(file,startOffset,sectionLength)}offset++}}(binFile);img.iptcdata=iptcdata||{},EXIF.isXmpEnabled&&(xmpdata=function(file){if(!("DOMParser"in self))return;var dataView=new DataView(file);debug&&console.log("Got file of length "+file.byteLength);if(255!=dataView.getUint8(0)||216!=dataView.getUint8(1))return debug&&console.log("Not a valid JPEG"),!1;var offset=2,length=file.byteLength,dom=new DOMParser;for(;offset<length-4;){if("http"==getStringFromDB(dataView,offset,4)){var startOffset=offset-1,sectionLength=dataView.getUint16(offset-2)-1,xmpString=getStringFromDB(dataView,startOffset,sectionLength),xmpEndIndex=xmpString.indexOf("xmpmeta>")+8,indexOfXmp=(xmpString=xmpString.substring(xmpString.indexOf("<x:xmpmeta"),xmpEndIndex)).indexOf("x:xmpmeta")+10;return xmpString=xmpString.slice(0,indexOfXmp)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+xmpString.slice(indexOfXmp),function(xml){try{var obj={};if(0<xml.children.length)for(var i=0;i<xml.children.length;i++){var idx,item=xml.children.item(i),attributes=item.attributes;for(idx in attributes){var itemAtt=attributes[idx],dataKey=itemAtt.nodeName,dataValue=itemAtt.nodeValue;void 0!==dataKey&&(obj[dataKey]=dataValue)}var old,nodeName=item.nodeName;void 0===obj[nodeName]?obj[nodeName]=xml2json(item):(void 0===obj[nodeName].push&&(old=obj[nodeName],obj[nodeName]=[],obj[nodeName].push(old)),obj[nodeName].push(xml2json(item)))}else obj=xml.textContent;return obj}catch(e){console.log(e.message)}}(dom.parseFromString(xmpString,"text/xml"))}offset++}}(binFile),img.xmpdata=xmpdata||{}),callback&&callback.call(img)}var http,fileReader;img.src?/^data\:/i.test(img.src)?handleBinaryFile(function(base64,contentType){contentType=contentType||base64.match(/^data\:([^\;]+)\;base64,/im)[1]||"",base64=base64.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var binary=atob(base64),len=binary.length,buffer=new ArrayBuffer(len),view=new Uint8Array(buffer),i=0;i<len;i++)view[i]=binary.charCodeAt(i);return buffer}(img.src)):/^blob\:/i.test(img.src)?((fileReader=new FileReader).onload=function(e){handleBinaryFile(e.target.result)},function(url,callback){var http=new XMLHttpRequest;http.open("GET",url,!0),http.responseType="blob",http.onload=function(e){200!=this.status&&0!==this.status||callback(this.response)},http.send()}(img.src,function(blob){fileReader.readAsArrayBuffer(blob)})):((http=new XMLHttpRequest).onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";handleBinaryFile(http.response),http=null},http.open("GET",img.src,!0),http.responseType="arraybuffer",http.send(null)):self.FileReader&&(img instanceof self.Blob||img instanceof self.File)&&((fileReader=new FileReader).onload=function(e){debug&&console.log("Got file of length "+e.target.result.byteLength),handleBinaryFile(e.target.result)},fileReader.readAsArrayBuffer(img))}function findEXIFinJPEG(file){var dataView=new DataView(file);if(debug&&console.log("Got file of length "+file.byteLength),255!=dataView.getUint8(0)||216!=dataView.getUint8(1))return debug&&console.log("Not a valid JPEG"),!1;for(var marker,offset=2,length=file.byteLength;offset<length;){if(255!=dataView.getUint8(offset))return debug&&console.log("Not a valid marker at offset "+offset+", found: "+dataView.getUint8(offset)),!1;if(marker=dataView.getUint8(offset+1),debug&&console.log(marker),225==marker)return debug&&console.log("Found 0xFFE1 marker"),function(file,start){if("Exif"!=getStringFromDB(file,start,4))return debug&&console.log("Not valid EXIF data! "+getStringFromDB(file,start,4)),!1;var bigEnd,tags,tag,exifData,gpsData,tiffOffset=start+6;if(18761==file.getUint16(tiffOffset))bigEnd=!1;else{if(19789!=file.getUint16(tiffOffset))return debug&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;bigEnd=!0}if(42!=file.getUint16(tiffOffset+2,!bigEnd))return debug&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var firstIFDOffset=file.getUint32(tiffOffset+4,!bigEnd);if(firstIFDOffset<8)return debug&&console.log("Not valid TIFF data! (First offset less than 8)",file.getUint32(tiffOffset+4,!bigEnd)),!1;if((tags=readTags(file,tiffOffset,tiffOffset+firstIFDOffset,TiffTags,bigEnd)).ExifIFDPointer)for(tag in exifData=readTags(file,tiffOffset,tiffOffset+tags.ExifIFDPointer,ExifTags,bigEnd)){switch(tag){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":exifData[tag]=StringValues[tag][exifData[tag]];break;case"ExifVersion":case"FlashpixVersion":exifData[tag]=String.fromCharCode(exifData[tag][0],exifData[tag][1],exifData[tag][2],exifData[tag][3]);break;case"ComponentsConfiguration":exifData[tag]=StringValues.Components[exifData[tag][0]]+StringValues.Components[exifData[tag][1]]+StringValues.Components[exifData[tag][2]]+StringValues.Components[exifData[tag][3]]}tags[tag]=exifData[tag]}if(tags.GPSInfoIFDPointer)for(tag in gpsData=readTags(file,tiffOffset,tiffOffset+tags.GPSInfoIFDPointer,GPSTags,bigEnd))"GPSVersionID"===tag&&(gpsData[tag]=gpsData[tag][0]+"."+gpsData[tag][1]+"."+gpsData[tag][2]+"."+gpsData[tag][3]),tags[tag]=gpsData[tag];return tags.thumbnail=function(dataView,tiffStart,firstIFDOffset,bigEnd){var IFD1OffsetPointer=function(dataView,dirStart,bigEnd){var entries=dataView.getUint16(dirStart,!bigEnd);return dataView.getUint32(dirStart+2+12*entries,!bigEnd)}(dataView,tiffStart+firstIFDOffset,bigEnd);{if(!IFD1OffsetPointer)return{};if(IFD1OffsetPointer>dataView.byteLength)return{}}var thumbTags=readTags(dataView,tiffStart,tiffStart+IFD1OffsetPointer,IFD1Tags,bigEnd);if(thumbTags.Compression)switch(thumbTags.Compression){case 6:var tOffset,tLength;thumbTags.JpegIFOffset&&thumbTags.JpegIFByteCount&&(tOffset=tiffStart+thumbTags.JpegIFOffset,tLength=thumbTags.JpegIFByteCount,thumbTags.blob=new Blob([new Uint8Array(dataView.buffer,tOffset,tLength)],{type:"image/jpeg"}));break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",thumbTags.Compression)}else 2==thumbTags.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return thumbTags}(file,tiffOffset,firstIFDOffset,bigEnd),tags}(dataView,offset+4,dataView.getUint16(offset+2));offset+=2+dataView.getUint16(offset+2)}}var IptcFieldMap={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function readTags(file,tiffStart,dirStart,strings,bigEnd){for(var entryOffset,tag,entries=file.getUint16(dirStart,!bigEnd),tags={},i=0;i<entries;i++)entryOffset=dirStart+12*i+2,!(tag=strings[file.getUint16(entryOffset,!bigEnd)])&&debug&&console.log("Unknown tag: "+file.getUint16(entryOffset,!bigEnd)),tags[tag]=function(file,entryOffset,tiffStart,bigEnd){var offset,vals,val,n,numerator,denominator,type=file.getUint16(entryOffset+2,!bigEnd),numValues=file.getUint32(entryOffset+4,!bigEnd),valueOffset=file.getUint32(entryOffset+8,!bigEnd)+tiffStart;switch(type){case 1:case 7:if(1==numValues)return file.getUint8(entryOffset+8,!bigEnd);for(offset=4<numValues?valueOffset:entryOffset+8,vals=[],n=0;n<numValues;n++)vals[n]=file.getUint8(offset+n);return vals;case 2:return getStringFromDB(file,offset=4<numValues?valueOffset:entryOffset+8,numValues-1);case 3:if(1==numValues)return file.getUint16(entryOffset+8,!bigEnd);for(offset=2<numValues?valueOffset:entryOffset+8,vals=[],n=0;n<numValues;n++)vals[n]=file.getUint16(offset+2*n,!bigEnd);return vals;case 4:if(1==numValues)return file.getUint32(entryOffset+8,!bigEnd);for(vals=[],n=0;n<numValues;n++)vals[n]=file.getUint32(valueOffset+4*n,!bigEnd);return vals;case 5:if(1==numValues)return numerator=file.getUint32(valueOffset,!bigEnd),denominator=file.getUint32(valueOffset+4,!bigEnd),(val=new Number(numerator/denominator)).numerator=numerator,val.denominator=denominator,val;for(vals=[],n=0;n<numValues;n++)numerator=file.getUint32(valueOffset+8*n,!bigEnd),denominator=file.getUint32(valueOffset+4+8*n,!bigEnd),vals[n]=new Number(numerator/denominator),vals[n].numerator=numerator,vals[n].denominator=denominator;return vals;case 9:if(1==numValues)return file.getInt32(entryOffset+8,!bigEnd);for(vals=[],n=0;n<numValues;n++)vals[n]=file.getInt32(valueOffset+4*n,!bigEnd);return vals;case 10:if(1==numValues)return file.getInt32(valueOffset,!bigEnd)/file.getInt32(valueOffset+4,!bigEnd);for(vals=[],n=0;n<numValues;n++)vals[n]=file.getInt32(valueOffset+8*n,!bigEnd)/file.getInt32(valueOffset+4+8*n,!bigEnd);return vals}}(file,entryOffset,tiffStart,bigEnd);return tags}function getStringFromDB(buffer,start,length){for(var outstr="",n=start;n<start+length;n++)outstr+=String.fromCharCode(buffer.getUint8(n));return outstr}function xml2json(xml){var json={};if(1==xml.nodeType){if(0<xml.attributes.length){json["@attributes"]={};for(var j=0;j<xml.attributes.length;j++){var attribute=xml.attributes.item(j);json["@attributes"][attribute.nodeName]=attribute.nodeValue}}}else if(3==xml.nodeType)return xml.nodeValue;if(xml.hasChildNodes())for(var i=0;i<xml.childNodes.length;i++){var old,child=xml.childNodes.item(i),nodeName=child.nodeName;null==json[nodeName]?json[nodeName]=xml2json(child):(null==json[nodeName].push&&(old=json[nodeName],json[nodeName]=[],json[nodeName].push(old)),json[nodeName].push(xml2json(child)))}return json}EXIF.enableXmp=function(){EXIF.isXmpEnabled=!0},EXIF.disableXmp=function(){EXIF.isXmpEnabled=!1},EXIF.getData=function(img,callback){return!((self.Image&&img instanceof self.Image||self.HTMLImageElement&&img instanceof self.HTMLImageElement)&&!img.complete)&&(img.exifdata?callback&&callback.call(img):getImageData(img,callback),!0)},EXIF.getTag=function(img,tag){if(img.exifdata)return img.exifdata[tag]},EXIF.getIptcTag=function(img,tag){if(img.exifdata)return img.iptcdata[tag]},EXIF.getAllTags=function(img){if(!img.exifdata)return{};var a,data=img.exifdata,tags={};for(a in data)data.hasOwnProperty(a)&&(tags[a]=data[a]);return tags},EXIF.getAllIptcTags=function(img){if(!img.exifdata)return{};var a,data=img.iptcdata,tags={};for(a in data)data.hasOwnProperty(a)&&(tags[a]=data[a]);return tags},EXIF.pretty=function(img){if(!img.exifdata)return"";var a,data=img.exifdata,strPretty="";for(a in data)data.hasOwnProperty(a)&&("object"==typeof data[a]?data[a]instanceof Number?strPretty+=a+" : "+data[a]+" ["+data[a].numerator+"/"+data[a].denominator+"]\r\n":strPretty+=a+" : ["+data[a].length+" values]\r\n":strPretty+=a+" : "+data[a]+"\r\n");return strPretty},EXIF.readFromBinaryFile=findEXIFinJPEG,"function"==typeof define&&define.amd&&define("exif-js",[],function(){return EXIF})}.call(this),function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=function(){function t(){}return t.getWebappScriptElementFromDocument=function(e){if(e.currentScript){if(!(e.currentScript instanceof HTMLScriptElement))throw new Error("getWebappScriptElementFromDocument() found non htlm script element");return e.currentScript}var n=e.querySelector("script#"+t.webappScriptId);if(n)return n;var r=e.querySelectorAll("script[src*="+t.webappScriptName+"]");if(1!==r.length)throw new Error("SmartEdit unable to load - invalid "+t.webappScriptName+" script tag");return r.item(0)},t.extractQueryParameter=function(t,e){var n={};return t.replace(/([?&])([^&=]+)=([^&]*)?/g,function(t,e,r,o){return n[r]=o,""}),n[e]},t.injectJS=function(e,n){void 0===n&&(n=0),e.length&&n<e.length&&t.getScriptJs()(e[n],function(){t.injectJS(e,n+1)})},t.injectCSS=function(e,n,r){var o;void 0===r&&(r=0),n&&0!==n.length&&((o=document.createElement("link")).rel="stylesheet",o.href=n[r],e.appendChild(o),r+1<n.length&&t.injectCSS(e,n,r+1))},t.getScriptJs=function(){return r},t.webappScriptId="smartedit-injector",t.webappScriptName="webApplicationInjector",t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(3),a=n(4),i="smartEditBootstrap",c=r.default.getWebappScriptElementFromDocument(document);if(!c)throw new Error("Unable to location webappInjector script");var u=o.default.getWhitelistFromScriptElement(c,window),l=o.default.convertWhitelistingToRegexp(u);parent.postMessage({pk:Math.random(),gatewayId:i,eventId:"loading",data:{location:document.location.href}},"*"),window.addEventListener("load",function(){parent.postMessage({pk:Math.random(),gatewayId:i,eventId:"bootstrapSmartEdit",data:{location:document.location.href}},"*")}),window.addEventListener("message",function(t){if(t.data.gatewayId===i&&"bundle"===t.data.eventId){if(!o.default.isAllowed(t.origin,window,l))throw new Error(t.origin+" is not allowed to override this storefront.");!function(t,e){if(window.smartedit=window.smartedit||{},parent.postMessage({gatewayId:i,eventId:"promiseAcknowledgement",data:{pk:t}},"*"),e){if(e.properties)for(var n in e.properties)e.properties.hasOwnProperty(n)&&(window.smartedit[n]=e.properties[n]);var a,o=document.getElementsByTagName("head")[0];e.js&&0<e.js.length&&(a=void 0,a="string"==typeof e.js[0]?e.js:e.js.filter(function(t){return!t.namespaceToCheck||!window[t.namespaceToCheck]}).map(function(t){return t.src}),r.default.injectJS(a)),e.css&&0<e.css.length&&r.default.injectCSS(o,e.css)}parent.postMessage({gatewayId:i,eventId:"promiseReturn",data:{pk:t,type:"success"}},"*")}(t.data.pk,t.data.data.resources)}},!1),window.onbeforeunload=function(){parent.postMessage({pk:Math.random(),gatewayId:i,eventId:"unloading",data:{location:document.location.href}},"*")},a.Heartbeat.startSendingHeartBeatToIframe(c)},function(t,e,n){var r,o,a=function(){var t,e,n=document,r=n.getElementsByTagName("head")[0],o=!1,a="push",i="readyState",c="onreadystatechange",u={},l={},s={},d={};function f(t,e){for(var n=0,r=t.length;n<r;++n)if(!e(t[n]))return o;return 1}function p(t,e){f(t,function(t){return e(t),1})}function m(e,n,r){e=e[a]?e:[e];var o=n&&n.call,i=o?n:r,c=o?e.join(""):n,h=e.length;function w(t){return t.call?t():u[t]}function v(){if(!--h)for(var t in u[c]=1,i&&i(),s)f(t.split("|"),w)&&!p(s[t],w)&&(s[t]=[])}return setTimeout(function(){p(e,function e(n,r){return null===n?v():(r||/^https?:\/\//.test(n)||!t||(n=-1===n.indexOf(".js")?t+n+".js":t+n),d[n]?(c&&(l[c]=1),2==d[n]?v():setTimeout(function(){e(n,!0)},0)):(d[n]=1,c&&(l[c]=1),void g(n,v)))})},0),m}function g(t,o){var a,u=n.createElement("script");u.onload=u.onerror=u[c]=function(){u[i]&&!/^c|loade/.test(u[i])||a||(u.onload=u[c]=null,a=1,d[t]=2,o())},u.async=1,u.src=e?t+(-1===t.indexOf("?")?"?":"&")+e:t,r.insertBefore(u,r.lastChild)}return m.get=g,m.order=function(t,e,n){!function r(o){o=t.shift(),t.length?m(o,r):m(o,e,n)}()},m.path=function(e){t=e},m.urlArgs=function(t){e=t},m.ready=function(t,e,n){t=t[a]?t:[t];var r,o=[];return p(t,function(t){u[t]||o[a](t)}),f(t,function(t){return u[t]})?e():(r=t.join("|"),s[r]=s[r]||[],s[r][a](e),n&&n(o)),m},m.done=function(t){m([null],t)},m};t.exports?t.exports=a():void 0===(o="function"==typeof(r=a)?r.call(e,n,e,t):r)||(t.exports=o)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=function(){function t(){}return t.convertWhitelistingToRegexp=function(e){return(e=e||[]).map(function(e){var n=e.trim();if(t.whitelistingConfigRegex.test(n)){var r=["^","$"].join(n.replace(/\./g,"\\.").replace(/\*/g,"[-a-zA-Z0-9]*"));return new RegExp(r)}throw new Error(t.whitelistingErrorMsg)})},t.getWhitelistFromScriptElement=function(e,n){var o=[t.getSanitizedHostFromLocation(n.location)],a=e.getAttribute(t.allowOriginAttributeName)||"";a&&(o=o.concat(a.split(",")));var i="",c=n.document.createElement("a");c.href=e.src;var u=r.default.extractQueryParameter(c.search,t.allowOriginQueryParamName);return u&&(i=decodeURI(u))&&i.split(",").forEach(function(t){return o.push(t)}),o},t.isAllowed=function(e,n,r){if(!/^(https?:)\/\/([-.a-zA-Z0-9]+(:[0-9]{1,5})?)$/.test(e))return!1;var o=n.document.createElement("a");return o.href=e,("https:"!==n.location.protocol||"https:"===o.protocol)&&r.some(function(e){return e.lastIndex=0,e.test(t.getSanitizedHostFromLocation(o))})},t.getSanitizedHostFromLocation=function(t){var e=t.port||("https"===t.protocol.replace(/:/g,"")?"443":"80");return t.hostname+":"+e},t.whitelistingConfigRegex=new RegExp(/^(([-*a-zA-Z0-9]+[.])*([-a-zA-Z0-9]+[.]))?[-a-zA-Z0-9]+(:[0-9]{1,5})$/),t.allowOriginAttributeName="data-smartedit-allow-origin",t.allowOriginQueryParamName="allow-origin",t.whitelistingErrorMsg="\n\t\tAllowed whitelist characters are a-z, A-Z, 0-9, -, period, or *\n\t\tThe wildcard * can be used to represent a prefixed domain, Good example: *.domain.com:80\n\t\tbut not a suffix or port, Bad examples: subdomain.*.com subdomain.domain.com:*.\n\t\tEvery whitelisting must contain a specific port.\n\t",t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.startSendingHeartBeatToIframe=function(e){var n=t.getHeartBeatInterval(e);setInterval(function(){parent.postMessage({pk:Math.random(),gatewayId:"heartBeatGateway",eventId:"heartBeat",data:{location:document.location.href}},"*")},n)},t.getHeartBeatInterval=function(e){return parseInt(e.getAttribute("data-smartedit-heart-beat-interval")||t.DEFAULT_HEARTBEAT_INTERVAL,10)},t.DEFAULT_HEARTBEAT_INTERVAL="500",t}();e.Heartbeat=r}]),function(){window.smartedit=window.smartedit||{};var onReprocessListeners=[];window.smartedit.reprocessPage=function(){onReprocessListeners.forEach(function(callbackFn){try{callbackFn()}catch(e){}})},window.smartedit.addOnReprocessPageListener=function(callbackFn){if(!(obj=callbackFn)||"function"!=typeof obj)throw new Error("SmartEditAddon - Cannot register page reprocessing listener. Provided callback must be a function.");var obj;onReprocessListeners.push(callbackFn)}}(),window.Imager&&(Imager.prototype.replaceImagesBasedOnScreenDimensions=function(image){var srcARRAY,cwidth,eMedia,availableWidths=[];void 0!==$(image).attr("data-media")&&(eMedia=$(image).attr("data-media"),$(image).removeAttr("data-media"),eMedia=$.parseJSON(eMedia),$.each(eMedia,function(key,value){availableWidths.push(parseInt(key))}),$(image).data("width",availableWidths),$(image).data("media",eMedia)),(srcARRAY=$(image).data("media"))[cwidth=Imager.getClosestValue(window.innerWidth,$.extend([],$(image).data("width")))]&&image.src!=srcARRAY[cwidth]&&(image.src=srcARRAY[cwidth])}),window.smartedit.addOnReprocessPageListener(function(){ACC.global.initImager(),ACC.global.reprocessImages(),0===$(".navigation--top .myAccountLinksHeader").length&&($(".js-myAccount-root").empty(),$(".js-secondaryNavAccount > ul").empty(),ACC.navigation.myAccountNavigation()),ACC.carousel.bindCarousel(),ACC.autocomplete.bindSearchAutocomplete()}),$(function(){_autoload()});